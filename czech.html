<!doctype html>
<meta charset=utf-8>
<meta name=viewport content=width=device-width,initial-scale=1.0>
<style>
body{background:#2f2f2f;color:white;text-align:center}
p,pre,ul,li,blockquote,table,dl{text-align:left}
body,td,th{font:14.5px/1.33 Arial,Helvetica,'Liberation Sans',sans-serif}
p{max-width:500px;margin:1em auto}
dl,pre{margin:1em auto;width:fit-content;max-width:min(100%, 1000px);box-sizing:border-box}
hr{border:none;border-top: 2px solid #bbb;margin:1em auto;max-width:500px}
ul,ol{width:min(100%, 500px);margin:1em auto;box-sizing:border-box}
ul ul,ul ol,ol ol,ol ul{margin-top:0;margin-bottom:0}
h1,h2,h3,h2 a,h3 a,h2 a:visited,h3 a:visited{color:white;font-weight:normal}
h1{font-size:2.1em;margin:.7em 0 .5em 0}
h2{font-size:1.75em}
h3{font-size:1.35em}
blockquote h2,blockquote h3{margin:.5em 0}
blockquote ul,blockquote ol{margin:.4em 0}
a,a .quote{color:hsl(220,100%,75%)}
a:visited,a .quote{color:hsl(270,100%,75%)}
pre,code{white-space:pre-wrap;word-wrap:break-word;font:13.7px Menlo,'DejaVu Sans Mono','Liberation Mono',Consolas,monospace;background:#4a4a4a;color:white}
pre{padding:4px}
code{padding:1px}
table{border-collapse:collapse;margin:0 auto}
td,th{border:1px solid #555;padding:1px 3px}
th{background:#444;font-weight:bold}
img{max-width:100%;margin:0;vertical-align:middle}
div:has(img){width:fit-content;margin:0 auto}
dt{font-size:1.3em;margin:.4em 0}
body>blockquote{margin:1em auto;padding-left:45px;width:465px}
blockquote blockquote{width:calc(100% - 45px);margin-left:45px;box-sizing:border-box}
blockquote>:first-child{margin-top:0}
blockquote>:last-child{margin-bottom:0}
blockquote,.quote,em{color:hsl(100,100%,88%)}
blockquote blockquote,blockquote .quote,.quote .quote,blockquote em,.quote em,em .quote{color:hsl(100,50%,67%)}
blockquote blockquote blockquote,blockquote blockquote .quote,blockquote .quote .quote,.quote .quote .quote,blockquote blockquote em,blockquote .quote em,.quote .quote em,blockquote em .quote{color:hsl(100,38%,45%)}
blockquote blockquote blockquote blockquote,blockquote blockquote blockquote .quote,blockquote blockquote .quote .quote,blockquote blockquote blockquote em,blockquote blockquote .quote em,blockquote .quote .quote em,blockquote blockquote em .quote{color:hsl(100,28%,35%)}
blockquote h3{color:inherit}
.spoiler{max-width:1100px;margin:0 auto}
.spoiler button{width:90px;border:0;font-family:inherit;font-size:inherit;color:inherit;background:#4a4a4a;padding:4px 0px;outline:none;cursor:pointer;margin:0 0 -.3em 0}
.spoiler pre{display:none;margin-top:0;text-align:left}
.red,.red .quote{color:hsl(0,100%,77%)!important}
.comment{color:hsl(0,100%,80%)!important}
.dates{color:#ccc}
.toc{width:calc(50% + 250px);margin:1em 0 1em max(0px, 50% - 250px)}
.toc ul{width:min(100%, 50% + 250px - 40px);margin:0}
.maxwidth{max-width:100%}
.wide{width:min(100%, 1000px)}
@media print{
  body{background:white;color:black;margin:0px;zoom:.9;print-color-adjust:exact;-webkit-print-color-adjust:exact}
  a,a:visited{color:#0000EE}
  h1,h2,h2 a,h3 a,h2 a:visited,h3 a:visited{color:black}
  pre,code{background:#d6d6d6;color:black}
  th{background:#ddd}
  td,th{border:1px solid #ccc}
  blockquote,.quote{color:hsl(100,65%,28%)}
  blockquote .quote,blockquote blockquote,.quote .quote{color:hsl(100,50%,53%)}
  blockquote blockquote blockquote,blockquote .quote .quote,.quote .quote .quote{color:hsl(100,70%,72%)}
  .spoiler{display:none}
  .red,.red .quote{color:hsl(0,50%,60%)!important}
  .dates{color:#777}
}
</style>
<title>Czech individual-level mortality data by vaccination status (part 1)</title>
<h1>Czech individual-level mortality data by vaccination status (part 1) - <a href=index.html>sars2.net</a></h1><div class=dates>First published 2024-07-17 UTC, last modified 2025-10-15 UTC</div><p>Links to other parts: <a href=czech2.html>czech2.html</a>,
<a href=czech3.html>czech3.html</a>,
<a href=czech4.html>czech4.html</a>.</p>
<h2 id=Contents><a href=#Contents>Contents</a></h2>
<ul class=toc>
<li><a href="#Background">Background</a></li>
<li><a href="#Files_used_in_my_analysis">Files used in my analysis</a></li>
<li><a href="#Were_Pfizer_and_Moderna_vaccines_allocated_randomly">Were Pfizer and Moderna vaccines allocated randomly?</a></li>
<li><a href="#Bucket_analysis">Bucket analysis</a></li>
<li><a href="#Deaths_and_population_estimates_by_single_year_of_age_from_Eurostat">Deaths and population estimates by single year of age from Eurostat</a></li>
<li><a href="#Simple_yearly_ASMR_calculation">Simple yearly ASMR calculation</a></li>
<li><a href="#Simple_ASMR_by_vaccine_type_during_the_first_year_after_the_first_dose">Simple ASMR by vaccine type during the first year after the first dose</a></li>
<li><a href="#Plot_for_ASMR_by_dose_and_date">Plot for ASMR by dose and date</a></li>
<li><a href="#Why_is_there_a_peak_in_mortality_rate_about_30_to_35_weeks_after_the_second_dose">Why is there a peak in mortality rate about 30 to 35 weeks after the second dose?</a></li>
<li><a href="#Excess_mortality_relative_to_all_people_matched_by_age">Excess mortality relative to all people matched by age</a></li>
<li><a href="#Triangle_plot_for_excess_mortality_by_month_of_vaccination_and_month_of_death">Triangle plot for excess mortality by month of vaccination and month of death</a></li>
<li><a href="#Excess_mortality_by_type_of_first_vaccine">Excess mortality by type of first vaccine</a></li>
<li><a href="#Deaths_by_weeks_after_first_dose">Deaths by weeks after first dose</a></li>
<li><a href="#Projected_mortality_rates_by_age_group_based_on_a_2010_2019_trend">Projected mortality rates by age group based on a 2010-2019 trend</a></li>
<li><a href="#Excess_mortality_by_weeks_after_vaccination_and_age_group">Excess mortality by weeks after vaccination and age group</a></li>
<li><a href="#People_who_got_the_second_dose_from_a_different_vaccine_type_than_the_first_dose">People who got the second dose from a different vaccine type than the first dose</a></li>
<li><a href="#Plot_of_multiple_variables_from_OWID">Plot of multiple variables from OWID</a></li>
<li><a href="#Representation_of_age_groups_compared_to_2021_census_and_Eurostat">Representation of age groups compared to 2021 census and Eurostat</a></li>
<li><a href="#Monthly_ratio_of_unvaccinated_ASMR_to_vaccinated_ASMR_and_comparison_to_Maldives_data">Monthly ratio of unvaccinated ASMR to vaccinated ASMR and comparison to Maldives data</a></li>
<li><a href="#Ratio_between_monthly_ASMR_for_Moderna_and_Pfizer_vaccines">Ratio between monthly ASMR for Moderna and Pfizer vaccines</a></li>
<li><a href="#Monthly_excess_mortality_in_both_vaccinated_and_unvaccinated_people_relative_to_a_2010_2019_trend">Monthly excess mortality in both vaccinated and unvaccinated people relative to a 2010-2019 trend</a></li>
<li><a href="#Moderna_Pfizer_ratio_by_age_group_and_month_of_vaccination">Moderna-Pfizer ratio by age group and month of vaccination</a></li>
<li><a href="#Daily_deaths_and_vaccine_doses_by_age_group">Daily deaths and vaccine doses by age group</a></li>
<li><a href="#Paper_about_two_subsets_of_Czech_record_level_data_from_insurance_companies">Paper about two subsets of Czech record-level data from insurance companies</a></li>
<li><a href="#Table_for_percentage_of_different_vaccine_types_given_each_month">Table for percentage of different vaccine types given each month</a></li>
<li><a href="#Kirschs_calculation_for_increase_in_all_cause_mortality">Kirsch&#39;s calculation for increase in all-cause mortality</a></li>
</ul>


<h2>
<a href=#Background id=Background>Background</a>
</h2>
<p>In March 2024 Stanislav Veselý received a FOI response of vaccination
data from the Institute of Health Information and Statistics of the
Czech Republic: <a href=https://www.skirsch.com/covid/CzechFOIA.pdf.><a
href="https://www.skirsch.com/covid/CzechFOIA.pdf"
class="uri">https://www.skirsch.com/covid/CzechFOIA.pdf</a>.</a> The
dataset includes rows for about 11 million people, who have columns for
the year of birth, date of death, dates of vaccination for doses 1-7,
and the type and batch number of each dose.</p>
<p>The data was already uploaded to GitHub in March 2024, but it was
almost completely overlooked until Steve Kirsch published his analysis
of the data in July 2024:
<a href=https://kirschsubstack.com/p/breaking-record-level-data-from-czech>https://kirschsubstack.com/p/breaking-record-level-data-from-czech</a>,
<a href=https://github.com/skirsch/Czech.><a
href="https://github.com/skirsch/Czech"
class="uri">https://github.com/skirsch/Czech</a>.</a></p>
<h2>
<a href=#Files_used_in_my_analysis id=Files_used_in_my_analysis>Files
used in my analysis</a>
</h2>
<p>Full record-level data:</p>
<ul>
<li><a href=https://github.com/PalackyUniversity/uzis-data-analysis/blob/main/data/Vesely_106_202403141131.tar.xz>https://github.com/PalackyUniversity/uzis-data-analysis/blob/main/data/Vesely_106_202403141131.tar.xz</a>
(50 MiB): Original data released in response to the freedom of
information request.</li>
</ul>
<p>Bucket files:</p>
<ul>
<li><a href=f/czbuckets.csv.gz>f/czbuckets.csv.gz</a> (6 MiB): Deaths
and person-days grouped by ongoing month, month of vaccination, weeks
since vaccination, age, dose number, and vaccine type. People are
removed under earlier doses after a new dose.</li>
<li><a href=f/czbucketskeep.csv.gz>f/czbucketskeep.csv.gz</a> (8 MiB):
Same as <code>czbuckets.csv</code> but people are kept under earlier
doses after a new dose.</li>
<li><a href=f/czbucketsbatchkeep.csv.xz>f/czbucketsbatchkeep.csv.xz</a>
(38 MiB): Same as <code>czbucketskeep.csv</code> but with an additional
column for batch identifier.</li>
<li><a href=f/czbucketsdaily.csv.gz>f/czbucketsdaily.csv.gz</a> (2 MiB):
Deaths and person-days grouped by ongoing day, age, and dose number.
People are removed under earlier doses after a new dose.</li>
</ul>
<p>Population and deaths:</p>
<ul>
<li><a href=f/czcensus2021pop.csv>f/czcensus2021pop.csv</a> (2 kiB):
Estimated resident population on March 26th 2021 from the
<a href=https://vdb.czso.cz/vdbvo2/faces/en/index.jsf?page=vystup-objekt&z=T&f=TABULKA&skupId=4449&katalog=33517&pvo=SLD21022-VSE&pvo=SLD21022-VSE&str=v335>2021
Czech census</a>.</li>
<li><a href=f/czpopdead.csv>f/czpopdead.csv</a> (115 kiB): Data from
<a href=https://ec.europa.eu/eurostat/data/database>Eurostat</a> for
yearly deaths by single year of age and yearly resident population
estimates on January 1st by single year of age.</li>
<li><a href=f/czweeklydead.csv>f/czweeklydead.csv</a> (100 kiB): Weekly
number of deaths by 5-year age groups published by the
<a href=https://vdb.czso.cz/vdbvo2/faces/en/index.jsf?page=vystup-objekt-parametry&pvo=DEMD007KR-R2024&sp=A&skupId=3629&pvokc=&katalog=30845&z=T>Czech
Statistical Bureau</a>.</li>
<li><a href=f/czdeadproj.csv>f/czdeadproj.csv</a> (4 MiB): Daily
projected deaths by 5-year age groups derived from a
seasonality-adjusted linear trend in CMR in 2010-2019 multiplied by
population size. Also includes daily deaths by 5-year age groups
interpolated from weekly deaths by 5-year age groups and daily
population estimates by 5-year age groups interpolated from Eurostat's
yearly resident population estimates.</li>
<li><a href=f/czicd.csv.gz>f/czicd.csv.gz</a> (4 MiB): Deaths by ICD
code, year, region, and 5-year age groups. Generated by combining Excel
files published by the
<a href=https://csu.gov.cz/produkty/zemreli-podle-seznamu-pricin-smrti-pohlavi-a-veku-v-cr-krajich-a-okresech-fgjmtyk2qr>Czech
Statistical Office</a>.</li>
<li><a href=https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e>https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e</a>
(5 MiB): Population by year, 5-year age groups, and region.</li>
</ul>
<p>COVID data published by the
<a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19>Czech
Ministry of Health</a>:</p>
<ul>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani.csv</a>
(30 MiB): Daily new vaccine doses by age, region, dose number, and
vaccine type.</li>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/umrti.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/umrti.csv</a>
(3 MiB): Includes rows for about 40,000 COVID deaths, with fields for
date, age, sex, region, and municipality.</li>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/nakazeni-hospitalizace-testy.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/nakazeni-hospitalizace-testy.csv</a>
(30 MiB): Tests, hospitalizations, and cases by age group. This file
only has the number of new PCR tests performed but it's missing the
number of positive PCR tests.</li>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/testy-pcr-antigenni.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/testy-pcr-antigenni.csv</a>
(200 kiB): PCR and antigen testing data which doesn't include age groups
but which does include the number of positive PCR tests by day.</li>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani-profese.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani-profese.csv</a>
(4 GiB): Includes rows for about 19 million vaccine doses, with columns
for occupation and education of each person, a column which indicates
whether the person had a chronic illness or not, and columns for the
name and code of the vaccinator.</li>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani-hospitalizace-pozitivni-hospitalizovani.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani-hospitalizace-pozitivni-hospitalizovani.csv</a>
(1 GiB): Includes rows for about 7 million vaccinated people, with a
column that indicates if the person was hospitalized after vaccination
or not.</li>
<li><a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani-hospitalizace-tyden.csv>https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/ockovani-hospitalizace-tyden.csv</a>
(200 kiB): Hospitalizations by week, age group, and number of vaccine
doses. Also includes unvaccinated people.</li>
</ul>
<p>Other:</p>
<ul>
<li><a href=https://github.com/PalackyUniversity/batch-dependent-safety/blob/main/data/SUKL-batches-AE.xlsx>https://github.com/PalackyUniversity/batch-dependent-safety/blob/main/data/SUKL-batches-AE.xlsx</a>
(28 kiB): Number of adverse event reports per batch.</li>
<li><a href=https://www.vaersaware.com/post/vaers-nov-11th-downloadable-files>https://www.vaersaware.com/post/vaers-nov-11th-downloadable-files</a>
(649 MiB): Old snapshot of VAERS data that includes country codes that
were removed in November 2022.</li>
<li><a href=f/cznuts.csv>f/cznuts.csv</a> (2 kiB): NUTS3 and NUTS4 codes
of Czech regions.</li>
</ul>
<h2>
<a href=#Were_Pfizer_and_Moderna_vaccines_allocated_randomly id=Were_Pfizer_and_Moderna_vaccines_allocated_randomly>Were
Pfizer and Moderna vaccines allocated randomly?</a>
</h2>
<p>In an earlier version of the GitHub repository about the Czech data,
Kirsch wrote: <span class="quote">"Vaccines were randomly distributed
for those wishing to get vaxxed. [...] People were not allowed to select
which vaccines they got. [...] The randomization of which vaccine someone
got created a perfect real-world randomized clinical trial where we
could compute the mortality rates for 1 year after Dose 2 for the two
most popular vaccines."</span>
[<a href=https://github.com/skirsch/Czech/blob/5725ac1b64ede7124e00b72af68892f31736b349/README.md>https://github.com/skirsch/Czech/blob/5725ac1b64ede7124e00b72af68892f31736b349/README.md</a>]</p>
<p>However I didn't find any source which said that the vaccines were
actually allocated randomly in the Czech Republic.</p>
<p>In the FOIA record-level the average year of birth is about 1973 for
people whose vaccine type for the second dose was <span
class="quote">"Comirnaty"</span> (Pfizer) but about 1966 for <span
class="quote">"SPIKEVAX"</span> (Moderna), which indicates that the
vaccine types were not allocated randomly. And there's also about 6
million people whose second vaccine type was Comirnaty but only about
500,000 people whose second vaccine type was Spikevax:</p>
<pre>&gt; system(&quot;curl -Ls https://github.com/skirsch/Czech/raw/main/data/CR_records.csv.xz|xz -dc&gt;CR_records.csv&quot;)
&gt; rec=data.table::fread(&quot;CR_records.csv&quot;)
&gt; rec[,.(year=mean(Rok_narozeni),.N),.(type=OckovaciLatka_2)][order(year)]|&gt;print(r=F)
                                      type     year       N
                                 VAXZEVRIA 1952.506  439705 # AstraZeneca
                                   Valneva 1953.500       2
                Comirnaty Omicron XBB.1.5. 1960.761      67
                         Nuvaxovid XBB 1.5 1964.500       2
                                  SPIKEVAX 1965.842  517783 # Moderna
                  COVID-19 Vaccine Janssen 1969.026     271
                                   Covovax 1971.517      29
                                 Comirnaty 1972.682 5519975 # Pfizer
      Comirnaty Original/Omicron BA.4/BA.5 1973.527     300
                                   Sinovac 1974.657     178
           Comirnaty Original/Omicron BA.1 1976.048     230
                                 Sinopharm 1979.538      39
                                 Nuvaxovid 1980.135    5098
                                 Sputnik V 1981.300      10
   Spikevax bivalent Original/Omicron BA.1 1981.375      16
                                Covishield 1984.713      94
                                           1989.098 4544448 # people with no second dose listed
                                   COVAXIN 1990.500       4
 SPIKEVAX BIVALENT ORIGINAL/OMICRON BA.4-5 1992.000       2
           Comirnaty Omicron XBB.1.5. 5-11 2017.000       2
                            Comirnaty 6m-4 2019.902      92
            COMIRNATY OMICRON XBB.1.5 6m-4 2020.840      25
                                      type     year       N</pre>
<p>Kirsch included these comments in the file
<code>Pfizer v. Moderna mortality by age.xlsx</code>:</p>
<blockquote>
<h3 id="a-simpsons-paradox-example-here-that-really-surprised-us">A
Simpson's paradox example here that really surprised us</h3>
<p>There is a really interesting simpson's paradox due to ratios. For
each individual age, the MRR (mortality rate ratio) rarely go above
2.25. Yet when you divide the CMR for Moderna/Pfizer, you get 2.25.</p>
<p>You can see this in the calculation on the Combined but skip tab at
the bottom.</p>
<p>But of course our result isn't a simpson's paradox because we
computed the CMR ratios by single digit age groups and five year
brackets and plotted it.</p>
</blockquote>
<p>However people who received a Moderna vaccine were older on average
than people who received a Pfizer vaccine, which explains why Kirsch's
ratio is higher for all ages aggregated together than for individual age
groups.</p>
<p>Added later: Kirsch later edited the README file at GitHub and he
told me: "i've changed randomly to non-systematically in the github.
sorry for the error."</p>
<h2>
<a href=#Bucket_analysis id=Bucket_analysis>Bucket analysis</a>
</h2>
<p>The following code generates a file for deaths and person-days
grouped by ongoing month, month of vaccination, weeks since vaccination,
single year of age, dose number, and vaccine type.</p>
<p>The record-level data only has a year of birth for each person but
not a date of birth, so here I generated a random date of birth for each
person.</p>
<pre>library(data.table)

# unique apply (faster for long vectors with many repeated values)
ua=\(x,y,...){u=unique(x);y(u,...)[match(x,u)]}

# fast way to get a floored number of years between dates after 1900 and before 2100
age=\(x,y){class(x)=class(y)=NULL;(y-x-(y-789)%/%1461+(x-789)%/%1461)%/%365}

mindate=as.Date(&quot;2020-1-1&quot;);maxdate=as.Date(&quot;2022-12-31&quot;)

rec=fread(&quot;Czech/data/CR_records.csv&quot;)
t=rec[,.(id=1:.N,death=DatumUmrti)]
set.seed(0);t$birth=ua(paste0(rec$Rok_narozeni,&quot;-1-1&quot;),as.Date)+sample(0:364,nrow(t),T)
t=t[rep(1:nrow(t),8),]
t$dose=rep(0:7,each=nrow(rec))
t$date=c(rep(mindate,nrow(rec)),rec[,`class&lt;-`(unlist(.SD,,F),&quot;Date&quot;),.SDcols=paste0(&quot;Datum_&quot;,1:7)])
t$type=c(rep(&quot;&quot;,nrow(rec)),rec[,unlist(.SD,,F),.SDcols=paste0(&quot;OckovaciLatka_&quot;,1:7)])
t=t[!is.na(date)][date&lt;=maxdate][order(-date)]
t$vaxmonth=ua(t$date,substr,1,7)

name1=unique(t$type);name2=rep(&quot;Other&quot;,length(name1))
name2[name1==&quot;&quot;]=&quot;&quot;
name2[grep(&quot;comirnaty&quot;,ignore.case=T,name1)]=&quot;Pfizer&quot;
name2[grep(&quot;spikevax&quot;,ignore.case=T,name1)]=&quot;Moderna&quot;
name2[grep(&quot;nuvaxovid&quot;,ignore.case=T,name1)]=&quot;Novavax&quot;
name2[name1==&quot;COVID-19 Vaccine Janssen&quot;]=&quot;Janssen&quot;
name2[name1==&quot;VAXZEVRIA&quot;]=&quot;AstraZeneca&quot;
t$type=name2[match(t$type,name1)]

rm(rec) # free up memory so the script won&#39;t have to use swap

buck=data.table()
for(day in as.list(seq(mindate,maxdate,1))){
  cat(as.character(day),&quot;\n&quot;)
  buck=rbind(buck,unique(t[date&lt;=day&amp;(is.na(death)|day&lt;=death)&amp;day&gt;=birth],by=&quot;id&quot;)[,.( # remove under earlier doses
  # buck=rbind(buck,t[date&lt;=day&amp;(is.na(death)|day&lt;=death)&amp;day&gt;=birth][!(dose==0&amp;id%in%id[dose&gt;0])][,.( # keep under earlier doses
    month=substr(day,1,7),vaxmonth,week=ifelse(type==&quot;&quot;,0,as.numeric(day-date)%/%7),
    age=age(birth,day),dose,type,alive=1,dead=death==day)])[,.(
      alive=sum(alive),dead=sum(dead,na.rm=T)),by=.(month,vaxmonth,week,age,dose,type)]
}

setorder(buck,month,vaxmonth,week,age,dose,type)
fwrite(buck,&quot;czbuckets.csv&quot;,quote=F)</pre>
<p>Here's different versions of the output produced by the script:</p>
<ul>
<li><a href=f/czbuckets.csv.gz>f/czbuckets.csv.gz</a> (6 MiB): Deaths
and person-days grouped by ongoing month, month of vaccination, weeks
since vaccination, age, dose number, and vaccine type. People are
removed under earlier doses after a new dose.</li>
<li><a href=f/czbucketskeep.csv.gz>f/czbucketskeep.csv.gz</a> (8 MiB):
Same as <code>czbuckets.csv.gz</code> but people are kept under earlier
doses after a new dose.</li>
<li><a href=f/czbucketsbatchkeep.csv.xz>f/czbucketsbatchkeep.csv.xz</a>
(38 MiB): Same as <code>czbucketskeep.csv</code> but with an additional
column for batch identifier.</li>
<li><a href=f/czbucketsdaily.csv.gz>f/czbucketsdaily.csv.gz</a> (2 MiB):
Deaths and person-days grouped by ongoing day, age, and dose number.
People are removed under earlier doses after a new dose.</li>
</ul>
<p>My code is similar to the <code>buckets.py</code> script provided by
Kirsch except my code accounts for the aging of people over time
correctly. In <code>buckets.py</code> each person has a constant age
that is either the age on the day of death for people who died or the
age on the day when the script was ran for people who didn't die (and in
both cases the age is calculated incorrectly as a floored division of
the age in days by 365).
[<a href=https://github.com/skirsch/Czech/blob/main/code/buckets.py>https://github.com/skirsch/Czech/blob/main/code/buckets.py</a>]
So if for example the <code>buckets.py</code> script is ran in July
2024, the age of someone who was born in January 1950 and who didn't die
is treated as 74 even during 2020.</p>
<h2>
<a href=#Deaths_and_population_estimates_by_single_year_of_age_from_Eurostat id=Deaths_and_population_estimates_by_single_year_of_age_from_Eurostat>Deaths
and population estimates by single year of age from Eurostat</a>
</h2>
<p>Eurostat has yearly deaths and population estimates for Czech
Republic by single year of age:
<a href=https://ec.europa.eu/eurostat/data/database.><a
href="https://ec.europa.eu/eurostat/data/database"
class="uri">https://ec.europa.eu/eurostat/data/database</a>.</a> The
following code combines the two datasets into a more conveniently
formatted single CSV file:</p>
<pre>api=&quot;https://ec.europa.eu/eurostat/api/dissemination/sdmx/2.1/data/&quot;

pop=read.table(paste0(api,&quot;demo_pjan?format=TSV&quot;),sep=&quot;\t&quot;,header=T,check.names=F,na.strings=&quot;:&quot;)
pop=pop[grep(&quot;^A,NR,(?!(TOTAL|UNK)).*,T,CZ&quot;,pop[,1],perl=T),]
age=c(as.numeric(head(sub(&quot;.*,Y(.*?),.*&quot;,&quot;\\1&quot;,pop[,1]),-2)),0,100)
flat=as.numeric(sub(&quot;:? *\\w?$&quot;,&quot;&quot;,unlist(pop[,-1])))
d1=data.frame(year=rep(as.numeric(colnames(pop)[-1]),each=nrow(pop)),age,pop=flat)

dead=read.table(paste0(api,&quot;demo_magec?format=TSV&quot;),sep=&quot;\t&quot;,header=T,check.names=F,na.strings=&quot;:&quot;)
dead=dead[grep(&quot;,T,(?!(TOTAL|UNK)).*,CZ&quot;,dead[,1],perl=T),]
age=c(as.numeric(head(sub(&quot;.*,Y(.*?),.*&quot;,&quot;\\1&quot;,dead[,1]),-2)),0,100)
flat=as.numeric(unlist(dead[,-1]))
d2=data.frame(year=rep(as.numeric(colnames(dead)[-1]),each=nrow(dead)),age,dead=flat)

me=merge(d1,d2,all=T)
me=me[order(me$year,me$age),]
write.csv(me,&quot;czpopdead.csv&quot;,quote=F,row.names=F,na=&quot;&quot;)</pre>
<p>The output looks like this:
[<a href=f/czpopdead.csv>f/czpopdead.csv</a>]</p>
<pre>$ curl -Ls sars2.net/f/czpopdead.csv|sed 3q
year,age,pop,dead
1960,0,126977,2581
1960,1,139022,222</pre>
<p>In my CSV file age 100 means ages 100 and above. The population
estimates are for January 1st and not mid-year estimates.</p>
<p>This dataset has resident population estimates on December 31st 2022
by age group, region, and sex:
<a href=https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e.><a
href="https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e"
class="uri">https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e</a>.</a>
The total population size in the dataset is identical to Eurostat's
population estimate for January 1st 2023:</p>
<pre>&gt; system(&quot;wget csu.gov.cz/docs/107508/a53bbc83-5e04-5a74-36f9-549a090a806e/130142-24data051724.zip;unzip 130142-24data051724.zip&quot;)
&gt; pop=fread(&quot;130181-23data2022.csv&quot;)
&gt; pop[uzemi_typ==&quot;stát&quot;&amp;is.na(vek_txt)&amp;pohlavi_txt==&quot;&quot;,hodnota] # region type is whole country, age is empty (all ages), and sex is empty (both males and females)
[1] 10827529
&gt; fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2023,sum(pop)]
[1] 10827529</pre>
<p>The Czech Statistical Office has published Excel files which show the
yearly number of deaths by ICD code, age group, and region:
<a href=https://csu.gov.cz/produkty/zemreli-podle-seznamu-pricin-smrti-pohlavi-a-veku-v-cr-krajich-a-okresech-fgjmtyk2qr.><a
href="https://csu.gov.cz/produkty/zemreli-podle-seznamu-pricin-smrti-pohlavi-a-veku-v-cr-krajich-a-okresech-fgjmtyk2qr"
class="uri">https://csu.gov.cz/produkty/zemreli-podle-seznamu-pricin-smrti-pohlavi-a-veku-v-cr-krajich-a-okresech-fgjmtyk2qr</a>.</a>
In the years 2020 to 2022, the yearly number of deaths in the Excel
files is identical to the data published by Eurostat, and both are
otherwise identical to the record-level data except the record-level
data is missing a single death in 2021:</p>
<pre>&gt; rec=fread(&quot;curl -Ls github.com/skirsch/Czech/raw/main/data/CR_records.csv.xz|xz -dc&quot;)
&gt; reclev=rec[,.(reclev=.N),.(year=year(DatumUmrti))]
&gt; eurostat=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[,.(eurostat=sum(dead)),year]
&gt; icd=fread(&quot;http://sars2.net/f/czicd.csv.gz&quot;)[,.(icd=sum(dead)),year]
&gt; merge(icd,merge(reclev,eurostat))|&gt;print(r=F)
year    icd reclev eurostat
2020 129289 129289   129289
2021 139891 139890   139891
2022 120219 120219   120219</pre>
<h2>
<a href=#Simple_yearly_ASMR_calculation id=Simple_yearly_ASMR_calculation>Simple
yearly ASMR calculation</a>
</h2>
<p>When I used Eurostat's data to calculate the yearly ASMR among the
total population of the Czech Republic, it was about 1343 for 2021 and
1143 for 2022. My standard population was Eurostat's Czech population
estimates for January 1st 2022:</p>
<pre>&gt; pop=read.csv(&quot;http://sars2.net/f/czpopdead.csv&quot;)
&gt; std=pop$pop[pop$year==2022]
&gt; asmr=tapply(pop$dead/pop$pop*std[pop$age+1]/sum(std)*1e5,pop$year,sum)
&gt; round(tail(asmr))
2017 2018 2019 2020 2021 2022
1143 1134 1104 1244 1343 1143</pre>
<p>In the record-level data unvaccinated people had an ASMR of about
2064 in 2021 and 1865 in 2022, but it might partially be because of the
healthy vaccinee effect because people with 1 or 2 doses also had high
ASMR in 2022:</p>
<pre>&gt; buck=fread(&quot;http://sars2.net/f/czbuckets.csv.gz&quot;)
&gt; a=aggregate(buck[,4:5],list(year=substr(buck$month,1,4),dose=buck$dose,age=buck$age),sum)
&gt; m=tapply(a$dead/a$alive*std[pmin(a$age,100)+1]/sum(std)*365e5,a[,1:2],sum,na.rm=T)
&gt; round(m)
      dose
year      0    1    2   3    4    5  6  7
  2020 1245    0    0  NA   NA   NA NA NA
  2021 2078 1068  885 610 4837    0  0 NA
  2022 1875 2099 1773 889  866 2206  0  0</pre>
<p>This shows the excess ASMR as percentage of ASMR the same year among
the total Czech population:</p>
<pre>&gt; round((m/c(tail(asmr,4))-1)*100)
      dose
year    0    1    2   3   4    5    6    7
  2020 13 -100 -100  NA  NA   NA   NA   NA
  2021 67   -3  -23 -55 289 -100 -100   NA
  2022 40   69   60 -22 -36   77 -100 -100</pre>
<h2>
<a href=#Simple_ASMR_by_vaccine_type_during_the_first_year_after_the_first_dose id=Simple_ASMR_by_vaccine_type_during_the_first_year_after_the_first_dose>Simple
ASMR by vaccine type during the first year after the first dose</a>
</h2>
<p>In the code below I used a simplified but somewhat inaccurate method
to calculate ASMR within the first 365 days from the first dose, so that
I treated the age of each person as their year of birth subtracted from
2021, and I didn't remove people from the population size after they
died. I only included people who got the first dose before 2022 so all
people had at least 365 days of follow-up time to die after vaccination,
since the record-level data only includes deaths up to the end of
2022.</p>
<p>I got about 32% higher ASMR for Moderna than Pfizer, but they were
still both far below the ASMR of the total Czech population in 2021 and
2022:</p>
<pre>&gt; std=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2022,pop]
&gt; system(&quot;curl -Ls https://github.com/skirsch/Czech/raw/main/data/CR_records.csv.xz|xz -dc&gt;CR_records.csv&quot;)
&gt; rec=fread(&quot;CR_records.csv&quot;)
&gt; cmr=rec[Datum_1&lt;as.Date(&quot;2022-1-1&quot;),.(cmr=mean(!is.na(DatumUmrti)&amp;DatumUmrti&lt;Datum_1+365),.N),.(age=pmin(100,2021-Rok_narozeni),type=OckovaciLatka_1)]
&gt; cmr[,.(asmr=sum(cmr*std[age+1]/sum(std)*1e5),N=sum(N)),type][order(-N)]
                        type      asmr       N
 1:                Comirnaty  787.3562 5461526 # Pfizer
 2:                 SPIKEVAX 1028.3506  516562 # Moderna
 3:                VAXZEVRIA  978.4670  447437 # AstraZeneca
 4: COVID-19 Vaccine Janssen 1325.4320  404824
 5:                  Sinovac    0.0000     178
 6:               Covishield    0.0000     115
 7:                Sinopharm    0.0000      36
 8:                  Covovax    0.0000      28
 9:                Sputnik V    0.0000       9
10:                  COVAXIN    0.0000       5</pre>
<p>The output above shows that there's almost as many people whose first
dose was Janssen as people whose first dose was Moderna, but I got a
much higher ASMR for Janssen than Moderna.</p>
<p>Almost all people got the second vaccine from the same type as the
first vaccine, except the schedule for the Janssen vaccine only included
a single dose:</p>
<pre>&gt; rec[,.(type1=OckovaciLatka_1,type2=OckovaciLatka_2)][,.N,.(type1,type2)][order(-N)][1:16]
                                   type1     type2       N
 1:                            Comirnaty Comirnaty 5517414 # Pfizer
 2:                                                4046219 # unvaccinated
 3:                             SPIKEVAX  SPIKEVAX  517152 # Moderna
 4:                            VAXZEVRIA VAXZEVRIA  439653 # AstraZeneca
 5:             COVID-19 Vaccine Janssen            412314
 6:                            Comirnaty             68726
 7:                             SPIKEVAX              8467
 8:                            VAXZEVRIA              5524
 9:                            Nuvaxovid Nuvaxovid    5090
10:           Comirnaty Omicron XBB.1.5.              1924
11:                            VAXZEVRIA Comirnaty    1801
12:                             SPIKEVAX Comirnaty     736
13: Comirnaty Original/Omicron BA.4/BA.5               665
14:                            VAXZEVRIA  SPIKEVAX     329
15:                            Nuvaxovid               323
16:                            Comirnaty  SPIKEVAX     300</pre>
<p>Ther's many people who got a Janssen vaccine for the first dose but
who later got a booster from another vaccine type, but their field for
the second dose is blank and the booster is listed as the third
dose:</p>
<pre>&gt; rec[,.(type1=OckovaciLatka_1,type2=OckovaciLatka_2,type3=OckovaciLatka_3)][grep(&quot;Jans&quot;,type1),.N,.(type1,type2,type3)][order(-N)]
                       type1 type2                                     type3      N
 1: COVID-19 Vaccine Janssen                                                 243484
 2: COVID-19 Vaccine Janssen                                       Comirnaty 123603
 3: COVID-19 Vaccine Janssen                                        SPIKEVAX  40641
 4: COVID-19 Vaccine Janssen            Comirnaty Original/Omicron BA.4/BA.5   1877
 5: COVID-19 Vaccine Janssen                        COVID-19 Vaccine Janssen   1518
 6: COVID-19 Vaccine Janssen                 Comirnaty Original/Omicron BA.1    599
 7: COVID-19 Vaccine Janssen                      Comirnaty Omicron XBB.1.5.    436
 8: COVID-19 Vaccine Janssen         Spikevax bivalent Original/Omicron BA.1     70
 9: COVID-19 Vaccine Janssen                                       Nuvaxovid     66
10: COVID-19 Vaccine Janssen                                       VAXZEVRIA      9
11: COVID-19 Vaccine Janssen                 Comirnaty Omicron XBB.1.5. 5-11      6
12: COVID-19 Vaccine Janssen       SPIKEVAX BIVALENT ORIGINAL/OMICRON BA.4-5      4
13: COVID-19 Vaccine Janssen                               Nuvaxovid XBB 1.5      1</pre>
<p>However the average date of first vaccination was much later for
Janssen vaccines than for the other three most popular vaccine
types:</p>
<pre>&gt; rec[,.(date=rec$Datum_1,type=rec$OckovaciLatka_1)][type!=&quot;&quot;&amp;type%in%type[rowid(type)==1e4]][,.(date=mean(date),.N),type][order(date)]
                       type       date       N
1:                VAXZEVRIA 2021-04-02  447450 # AstraZeneca
2:                 SPIKEVAX 2021-05-29  526453 # Moderna
3:                Comirnaty 2021-06-08 5586979 # Pfizer
4: COVID-19 Vaccine Janssen 2021-09-05  412314</pre>
<p>And this shows that people who got a Pfizer or Moderna vaccine in
late 2021 subsequently also had high ASMR over the next 365 days:</p>
<pre>rec=fread(&quot;CR_records.csv&quot;)
std=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2022,pop]

rec2=rec[Datum_1&lt;as.Date(&quot;2022-1-1&quot;)]
d=rec2[,.(dead=!is.na(DatumUmrti)&amp;DatumUmrti&lt;Datum_1+365,type=OckovaciLatka_1)]
d$age=pmin(100,2021-rec2$Rok_narozeni)

ua=\(x,fun,...){u=unique(x);fun(u,...)[match(x,u)]}
d$vaxmonth=ua(rec2$Datum_1,substr,1,7)

name1=c(&quot;Comirnaty&quot;,&quot;SPIKEVAX&quot;,&quot;VAXZEVRIA&quot;,&quot;COVID-19 Vaccine Janssen&quot;)
name2=c(&quot;Pfizer&quot;,&quot;Moderna&quot;,&quot;AstraZeneca&quot;,&quot;Janssen&quot;)
d$type=ifelse(d$type%in%name1,name2[match(d$type,name1)],&quot;Other&quot;)
d$type=factor(d$type,names(sort(table(d$type),T)))

rate=d[,.(rate=mean(dead)),.(age=age,type=type,vaxmonth=vaxmonth)]
round(tapply(rate$rate*std[rate$age+1]/sum(std)*1e5,rate[,2:3],sum))</pre>
<!-- -->
<pre>             vaxmonth
type          2020-12 2021-01 2021-02 2021-03 2021-04 2021-05 2021-06
  Pfizer         1461    1402    1369     740     868     823    1029
  Moderna          NA    3369    1952     975     927    1089    1231
  AstraZeneca      NA      NA    1628     904    1061    1184    1676
  Janssen          NA      NA      NA       0     918    1089    1402
  Other            NA       0       0       0       0       0       0
             vaxmonth
type          2021-07 2021-08 2021-09 2021-10 2021-11 2021-12
  Pfizer         1067    1241    1639    1757    1499    1782
  Moderna        1134    1204    1995    1647    1552    1882
  AstraZeneca    1992    1985     470      96       0       0
  Janssen        1340    1410    1569    1352    1422    1862
  Other             0       0       0       0       0       0</pre>
<h2>
<a href=#Plot_for_ASMR_by_dose_and_date id=Plot_for_ASMR_by_dose_and_date>Plot
for ASMR by dose and date</a>
</h2>
<p>In the plot below the ASMR of people with one dose shoots up when the
second dose is rolled out, and the ASMR of people with two doses shoots
up when the third dose is rolled out. Martin Neil and Norman Fenton
speculated that a similar phenomenon in the English ONS data was
explained by the so-called cheap trick, where people were categorized
under the previous vaccine dose for a certain number of weeks after a
new vaccine dose, so that for example a death that occured soon after
the second dose would've been classified under the first dose. Jeffrey
Morris said that the phenomenon was explained by the healthy vaccinee
effect instead, because the healthy vaccinees who move under the nth
dose have low mortality, it means that the so-called unhealthy
stragglers who remain under dose n-1 will have increased mortality.
However the same kind of a phenomenon can also be seen in the Czech data
even though it doesn't employ the cheap trick, which makes it seem more
likely that Morris was right and Neil and Fenton were wrong. And the New
Zealand data released by Barry Young doesn't employ the cheap trick
either but the same phenomenon can also be seen in Barry's data.</p>
<p>From the plot below you can also see that during a COVID wave in
December 2021, unvaccinated people have a big spike in mortality but
there is essentially no spike in mortality in people with 3 doses, and
there is only a small spike in the black line which shows the mortality
among all vaccinated people. People with 2 doses do have a big increase
in mortality in November to December 2021, but it's probably not only
because of COVID but also because a lot of people got the third dose so
the unhealthy stragglers were left under the second dose:</p>
<div>
<img src=i/czech-asmr.png width=800>
</div>
<p>In the plot above the dark gray line shows the mortality rate among
both vaccinated and unvaccinated people in the record-level data, and
the light gray line shows the mortality rate based on the weekly number
of deaths in 5-year age groups reported by the Czech Statistical Office
combined with population estimates from Eurostat.
[<a href=https://csu.gov.cz/produkty/number-of-deaths-weekly-and-monthly-time-series>https://csu.gov.cz/produkty/number-of-deaths-weekly-and-monthly-time-series</a>,
<a href=https://ec.europa.eu/eurostat/data/database>https://ec.europa.eu/eurostat/data/database</a>]
The discrepancy between the lines might partially be because I used
5-year age groups up to 95+ for the dark gray line but 90+ for the light
gray line.</p>
<pre>library(data.table);library(ggplot2)

isoweek=\(year,week,weekday=1){d=as.Date(paste0(year,&quot;-1-4&quot;));d-(as.integer(format(d,&quot;%w&quot;))+6)%%7-1+7*(week-1)+weekday}
ma=\(x,b=1,f=b){x[]=rowMeans(embed(c(rep(NA,b),x,rep(NA,f)),f+b+1),na.rm=T);x}

xstart=as.Date(&quot;2020-1-1&quot;);xend=as.Date(&quot;2023-1-1&quot;);dates=seq(xstart,xend,1)

std=fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,.(pop=sum(pop)),.(age=pmin(age,95)%/%5*5)][,.(std=pop/sum(pop),age)]

b=fread(&quot;http://sars2.net/f/czbucketsdaily.csv.gz&quot;)
b=b[,.(alive=sum(alive),dead=sum(dead)),.(date,age=pmin(age,95)%/%5*5,dose=ifelse(dose==0,&quot;Unvaccinated&quot;,paste0(&quot;Dose &quot;,ifelse(dose&gt;=4,&quot;4+&quot;,dose))))]
b=unique(rbind(b,cbind(expand.grid(lapply(b[,1:3],unique)),alive=0,dead=0)),by=1:3)[order(date)]

b=rbind(b,b[,.(alive=sum(alive),dead=sum(dead),dose=&quot;All people (record-level data)&quot;),.(age,date)])
b=rbind(b,b[grep(&quot;Dose&quot;,dose),.(alive=sum(alive),dead=sum(dead),dose=&quot;All vaccinated&quot;),.(age,date)])

p=b[,.(date,alive=ma(alive,10),dead=ma(dead,10)),.(age,dose)]
p=merge(p,std)[,.(y=sum(dead/alive*std*365e5,na.rm=T),pop=sum(alive)),.(x=date,z=dose)]

dead=fread(&quot;http://sars2.net/f/czweeklydead.csv&quot;)
dead=dead[,approx(isoweek(year,week,4),dead/7,dates,rule=2),age][,.(x,dead=y,age)]
pop=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year&gt;=2010]
pop=pop[,.(pop=sum(pop)),.(age=pmin(90,age%/%5*5),year)]
pop=pop[,spline(as.Date(paste0(year,&quot;-1-1&quot;)),pop,xout=dates),age][,.(x,pop=y,age)]
std2=std[,.(std=sum(std)),.(age=pmin(age,90))]
p=rbind(p,merge(std2,merge(dead,pop))[,.(y=sum(dead/pop*std*365e5),pop=NA,z=&quot;All people (Czech Statistical Office)&quot;),.(x=as.IDate(x))])

p[,z:=factor(z,unique(z))]
p[pop&lt;2e3,y:=NA]

yend=4e3;ystep=1e3;yend2=100;ystep2=25;secmult=yend/yend2

color=c(hcl(c(210,120,60,0,300)+15,90,50),&quot;black&quot;,&quot;gray45&quot;,&quot;gray70&quot;)
fill=c(hcl(c(210,120,60,0,300)+15,80,70),&quot;black&quot;,&quot;gray45&quot;,&quot;gray70&quot;)

label=data.frame(x=xstart+.02*(xend-xstart),y=seq(yend,,-yend/15,nlevels(p$z))-yend/16,label=levels(p$z))

sub=&quot;The lines are ±10-day moving averages. People are removed under earlier doses after a new
dose. The standard population is the estimated resident population in the 2021 census by 5-year
age groups. ASMR values are not displayed on days with a population size below 2,000. Sources:
github.com/PalackyUniversity/uzis-data-analysis, scitani.gov.cz/age-structure, ec.europa.eu/
eurostat/data/database, csu.gov.cz/produkty/number-of-deaths-weekly-and-monthly-time-series.&quot;

p2=p[grep(&quot;Unvaccinated|Dose&quot;,z)]
p2=merge(p2,p2[,.(popsum=sum(pop)),x])

ggplot(p2,aes(x,y))+
geom_area(aes(color=z,fill=z,y=pop/popsum*99.999*secmult),linewidth=.1,alpha=.22)+
geom_line(aes(color=z),linewidth=.4)+
geom_line(data=p[grep(&quot;All vaccinated&quot;,z)],color=color[6],linewidth=.4)+
geom_line(data=p[grep(&quot;record-level&quot;,z)],color=color[7],linewidth=.4)+
geom_line(data=p[grep(&quot;Office&quot;,z)],color=color[8],linewidth=.4)+
geom_hline(yintercept=c(0,yend),linewidth=.3,lineend=&quot;square&quot;)+
geom_vline(xintercept=c(xstart,xend),linewidth=.3,lineend=&quot;square&quot;)+
geom_label(data=label,aes(x=x,y=y,label=label),fill=alpha(&quot;white&quot;,.7),label.r=unit(0,&quot;pt&quot;),label.padding=unit(1,&quot;pt&quot;),label.size=0,color=color[1:nrow(label)],size=2.7,hjust=0)+
labs(title=&quot;Age-standardized mortality rate in Czech record-level data&quot;,subtitle=sub,x=NULL,y=&quot;ASMR per 100,000 person-years&quot;)+
scale_x_date(limits=c(xstart,xend),breaks=seq(xstart,xend,&quot;2 month&quot;),date_labels=&quot;%b\n%y&quot;)+
scale_y_continuous(limits=c(0,yend),breaks=seq(0,yend,ystep),labels=\(x)ifelse(x==0,x,paste0(x/1e3,&quot;k&quot;)),sec.axis=sec_axis(trans=~./secmult,breaks=seq(0,yend2,ystep2),name=&quot;Percentage of people with dose&quot;))+
scale_color_manual(values=color)+
scale_fill_manual(values=fill)+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
theme(axis.text=element_text(size=6.5,color=&quot;black&quot;),
  axis.ticks=element_line(linewidth=.3),
  axis.title.y.left=element_text(margin=margin(0,4,0,0)),
  axis.title.y.right=element_text(margin=margin(0,-1,0,4)),
  axis.ticks.length=unit(3,&quot;pt&quot;),
  axis.title=element_text(size=7.5),
  legend.position=&quot;none&quot;,
  panel.background=element_rect(fill=&quot;white&quot;),
  plot.margin=margin(4,4,4,4),
  plot.subtitle=element_text(size=7,margin=margin(0,0,4,0)),
  plot.title=element_text(size=7.5,face=&quot;bold&quot;,margin=margin(2,0,4,0)))
ggsave(&quot;0.png&quot;,width=5,height=3.3,dpi=400*4)
system(&quot;magick 0.png -resize 25% 1.png&quot;)</pre>
<h2>
<a href=#Why_is_there_a_peak_in_mortality_rate_about_30_to_35_weeks_after_the_second_dose id=Why_is_there_a_peak_in_mortality_rate_about_30_to_35_weeks_after_the_second_dose>Why
is there a peak in mortality rate about 30 to 35 weeks after the second
dose?</a>
</h2>
<p>Kirsch included this comment in the file
<code>CR time series analysis.xlsx</code>: <span class="quote">"MR
peaking 35 weeks after the shots #2 for male and female is hard for them
to explain. It can't be HVE because HVE doesn't <span
class="quote">'peak'</span>."</span></p>
<p>For example in this plot the mortality rate peaks on week 30 after
the second dose:</p>
<div>
<img src=i/czech-dose2peak.jpg width=500>
</div>
<p>However it's because the mortality rate of people who remained under
the second dose shot up when the third dose was rolled out, and people
got the third dose about 30 weeks after the second dose on average:</p>
<pre>&gt; rec=fread(&quot;CR_records.csv&quot;)
&gt; mean(rec$Datum_3-rec$Datum_2,na.rm=T)/7
[1] 29.6133</pre>
<p>The average date of third doses is only about 26 weeks later than the
average date of second doses:</p>
<pre>&gt; as.Date(mean(rec$Datum_2,na.rm=T))
[1] &quot;2021-07-09&quot;
&gt; as.Date(mean(rec$Datum_3,na.rm=T))
[1] &quot;2022-01-04&quot;
&gt; (mean(rec$Datum_3,na.rm=T)-mean(rec$Datum_2,na.rm=T))/7
[1] 25.57143</pre>
<p>However people who got both the second and third dose got the second
dose much earlier on average than people who only got the second dose
(because younger people got vaccinated later and younger people were
less likely to get a booster):</p>
<pre>&gt; as.Date(mean(rec$Datum_2[!is.na(rec$Datum_3)],na.rm=T))
[1] &quot;2021-06-10&quot; # average date of second dose for people who also got a third dose
&gt; as.Date(mean(rec$Datum_2[is.na(rec$Datum_3)],na.rm=T))
[1] &quot;2021-08-31&quot;&quot; # average date of second dose for people who didn&#39;t get a third dose</pre>
<h2>
<a href=#Excess_mortality_relative_to_all_people_matched_by_age id=Excess_mortality_relative_to_all_people_matched_by_age>Excess
mortality relative to all people matched by age</a>
</h2>
<p>Here for each combination of month and dose number, I derived the
expected number of deaths by multiplying the number of person-days for
each single year of age by the mortality rate that month of the same age
among all people who are included in the dataset, and I added together
the expected deaths for each age to get the baseline number of deaths
among all ages.</p>
<p>For example in January 2021 the mortality rate of all people aged 70
in the dataset was about 9.734e-5 deaths per person-days, so the
expected number of deaths was about 2.606 (from
<code>9.734e-5*26871</code>). So the excess mortality percent was about
<code>(2/2.606-1)*100</code> which is about -23%. When I repeated the
same calculation for all ages, the expected number of deaths for all
ages added together was about 523.6. But the actual number of deaths was
326, so the total excess mortality percent was about
<code>(326/523.6-1)*100</code> which is about -38%.</p>
<div>
<img src=i/czech-composition.png width=800>
</div>
<p>In the plot above the excess mortality of unvaccinated people peaks
in December 2021 when there was a COVID wave. And conversely in December
2021 the excess mortality of the <span class="quote">"All
vaccinated"</span> group is also lower than in the surrounding
months.</p>
<p>In the plot above I used a different baseline for each month, so the
excess mortality rates were adjusted for seasonal variation in mortality
and the effect of COVID waves. But in the next plot I'm using the total
mortality rate in 2021-2022 as the baseline throughout the plot, which
increases the excess mortality percentages during the COVID wave in
December 2021:</p>
<div>
<img src=i/czech-composition-2.png width=800>
</div>
<p>In the plot above unvaccinated people have 174% excess mortality in
December 2021 but 43% in September 2021, so it's an approximately
1.92-fold increase in mortality (from
<code>(173.53+100)/(42.68+100)</code>). But vaccinated people only have
an approximately 1.54-fold increase in mortality when December 2021 is
compared to September 2021 (from <code>(5.46+100)/(-31.64+100)</code>).
In the US Medicare data that Kirsch published in 2023, the spikes in
deaths during COVID waves were also bigger in unvaccinated people than
vaccinated people.</p>
<div class="spoiler">
<button>
Show code
</button>
<pre>library(data.table)

b=fread(&quot;http://sars2.net/f/czbuckets.csv.gz&quot;)[dose&lt;=4]
b[,dose:=ifelse(dose==0,&quot;Unvaccinated&quot;,paste(&quot;Dose&quot;,dose,&quot;but not more&quot;))]
b2=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose%in%1:4][,dose:=paste0(&quot;Dose &quot;,dose,&quot; or more&quot;)]
b=rbind(b,b2)[month&gt;=&quot;2020-12&quot;]

me=merge(b,b[dose%like%&quot;Unvaccinated|1 or more&quot;,.(base=sum(dead)/sum(alive)),.(age,month)])
# me=merge(b,b[dose%like%&quot;Unvaccinated|1 or more&quot;,.(base=sum(dead)/sum(alive)),age]) # use 2021-2022 total as baseline for each month

a=me[,base:=base*alive][,.(alive=sum(alive),dead=sum(dead),base=sum(base)),.(month,dose)]
a=rbind(a,a[,.(dead=sum(dead),alive=sum(alive),base=sum(base),month=&quot;Total&quot;),dose])

a$dose=factor(a$dose,c(&quot;Unvaccinated&quot;,paste(&quot;Dose&quot;,1:4,&quot;but not more&quot;),paste(&quot;Dose&quot;,1:4,&quot;or more&quot;)))

mpop=xtabs(alive~dose+month,a)/365
m=tapply(with(a,(dead-base)/ifelse(dead&gt;base,base,dead)*100),a[,2:1],c)
disp=tapply(100*(a$dead/a$base-1),a[,2:1],round)
hide=mpop&lt;10;m[hide]=disp[hide]=NA
exp=.8;m=abs(m)^exp*sign(m)
maxcolor=300^exp;m[is.infinite(m)]=-maxcolor

pheatmap::pheatmap(m,filename=&quot;i1.png&quot;,display_numbers=disp,
  cluster_rows=F,cluster_cols=F,legend=F,cellwidth=19,cellheight=14,fontsize=9,fontsize_number=8,
  border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse((abs(m)&gt;.55*maxcolor)&amp;!is.na(m),&quot;white&quot;,&quot;black&quot;),
  breaks=seq(-maxcolor,maxcolor,,256),
  colorRampPalette(hsv(rep(c(7/12,0),5:4),c(.9,.75,.6,.3,0,.3,.6,.75,.9),c(.4,.65,1,1,1,1,1,.65,.4)))(256))

disp2=kimi(mpop);disp2[mpop&lt;.5]=0
exp2=.6;mpop=mpop^exp2;maxcolor2=max(mpop[-nrow(m),-ncol(m)])

kimi=\(x){e=floor(log10(ifelse(x==0,1,abs(x))));e2=pmax(e,0)%/%3+1;p=!is.na(x)
  x[p]=paste0(sprintf(paste0(&quot;%.&quot;,ifelse(e[p]%%3==0,1,0),&quot;f&quot;),x[p]/1e3^(e2[p]-1)),c(&quot;&quot;,&quot;k&quot;,&quot;M&quot;,&quot;B&quot;,&quot;T&quot;)[e2[p]]);x}

pheatmap::pheatmap(mpop,filename=&quot;i2.png&quot;,display_numbers=disp2,
  cluster_rows=F,cluster_cols=F,legend=F,cellwidth=19,cellheight=14,fontsize=9,fontsize_number=8,
  border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(mpop&gt;maxcolor2*.45,&quot;white&quot;,&quot;black&quot;),
  breaks=seq(0,maxcolor2,,256),
  sapply(seq(1,0,,256),\(i)rgb(i,i,i)))

system(&quot;w=`identify -format %w i1.png`;pad=38;convert -gravity northwest -pointsize 40 -font Arial-Bold \\( -splice x24 -size $[w-pad]x caption:&#39;Czech record-level data: Excess mortality percent relative to total Czech population matched by age and observation month&#39; -extent $[w-pad]x -gravity center \\) i1.png -gravity northwest \\( -size $[w-40]x caption:&#39;Person-years by dose and month&#39; -extent $[w-pad]x -gravity center \\) i2.png -append 1.png&quot;)</pre>
</div>
<h2>
<a href=#Triangle_plot_for_excess_mortality_by_month_of_vaccination_and_month_of_death id=Triangle_plot_for_excess_mortality_by_month_of_vaccination_and_month_of_death>Triangle
plot for excess mortality by month of vaccination and month of death</a>
</h2>
<p>In the New Zealand data released by Barry Young, I noticed an effect
where people who got vacinated during the early part of the main vaccine
rollout subsequently had lower excess mortality than people who got
vaccinated later on, which I called the <span class="quote">"early
vaccinee effect"</span>. I later also noticed a similar effect in a May
2024 FOI response to Clare Craig, which showed the number of deaths in
England by week of vaccination, month of death, and age group:
<a href=statistic.html#Clare_Craig_May_2024_UKHSA_FOI_response_for_deaths_in_vaccinated_people>statistic.html#Clare_Craig_May_2024_UKHSA_FOI_response_for_deaths_in_vaccinated_people</a>.</p>
<p>A similar early vaccinee effect is also visible in the Czech data.
The monthly number of first doses given peaked in May 2021, so people
who got the first vaccine dose during February to May 2021 subsequently
had the lowest excess mortality, but people who got vaccinated in June
2021 already had close to 0% excess mortality, and the excess mortality
gradually increased to over 100% in people who waited until 2022 to get
the first dose:</p>
<div>
<img src=i/czech-triangle.png width=800>
</div>
<pre>library(data.table)

b=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[,age:=pmin(age,95)]
d=merge(b[dose==1],b[dose&lt;=1,.(base=sum(dead)/sum(alive)),.(age,month)])[,base:=alive*base]
d=d[,.(dead=sum(dead),alive=sum(as.double(alive)),base=sum(base)),.(month,vaxmonth)]
d=rbind(d,d[,.(dead=sum(dead),alive=sum(alive),base=sum(base),month=&quot;Total&quot;),vaxmonth])
d=rbind(d,d[,.(dead=sum(dead),alive=sum(alive),base=sum(base),vaxmonth=&quot;Total&quot;),month])

mpop=xtabs(alive~vaxmonth+month,d)/365
disp=d[,tapply((dead/base-1)*100,list(vaxmonth,month),round)]
m=d[,tapply((dead-base)*100/ifelse(dead&gt;base,base,dead),list(vaxmonth,month),c)]

hide=mpop&lt;10;m[hide]=disp[hide]=NA
disp[lower.tri(disp)&amp;row(disp)!=nrow(disp)]=&quot;&quot;
exp=.8;m=abs(m)^exp*sign(m)
maxcolor=300^exp;m[is.infinite(m)]=-maxcolor

pheatmap::pheatmap(m,filename=&quot;mort.png&quot;,display_numbers=disp,
  gaps_col=ncol(m)-1,gaps_row=nrow(m)-1,
  cluster_rows=F,cluster_cols=F,legend=F,
  cellwidth=17,cellheight=17,fontsize=9,fontsize_number=8,border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(!is.na(m)&amp;abs(m)&gt;.5*maxcolor,&quot;white&quot;,&quot;black&quot;),
  breaks=seq(-maxcolor,maxcolor,,256),
  colorRampPalette(hsv(rep(c(7/12,0),4:5),c(.9,.75,.6,.3,0,.3,.6,.75,.9),c(.4,.65,1,1,1,1,1,.65,.4)))(256))

ua=\(x,y,...){u=unique(x);y(u,...)[match(x,u)]}

kimi=\(x){e=floor(log10(ifelse(x==0,1,abs(x))));e2=pmax(e,0)%/%3+1
  x[]=ifelse(abs(x)&lt;10,round(x),paste0(round(x/1e3^(e2-1),ifelse(e%%3==0,1,0)),c(&quot;&quot;,&quot;k&quot;,&quot;M&quot;,&quot;B&quot;,&quot;T&quot;)[e2]));x}

rec=fread(&quot;CR_records.csv&quot;)
vaxn=table(ua(rec$Datum_1,substr,1,7))
vaxn[&quot;Total&quot;]=sum(vaxn)
pop=as.matrix(vaxn[rownames(m)]);colnames(pop)=&quot;New doses&quot;
exp2=.6;maxcolor2=max(head(pop,-1))

pheatmap::pheatmap(pop^exp2,filename=&quot;pop.png&quot;,display_numbers=kimi(pop),
  gaps_row=nrow(m)-1,cluster_rows=F,cluster_cols=F,legend=F,
  cellwidth=21,cellheight=17,fontsize=9,fontsize_number=8,border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(pop^exp2&gt;maxcolor2^exp2*.4,&quot;white&quot;,&quot;black&quot;),
  breaks=seq(0,maxcolor2^exp2,,256),sapply(seq(1,0,,256),\(i)rgb(i,i,i)))

system(&quot;convert mort.png -crop -177 \\( -gravity northwest pop.png -shave 16x0 -splice 0x5 -gravity west \\) -gravity north +append 00.png;w=`identify -format %w 00.png`;pad=48;convert \\( -pointsize 46 -font Arial-Bold -size $[w-pad]x caption:&#39;Czech record-level data, dose 1: Excess mortality percent up to end of 2022&#39; -gravity north -splice x26 \\) 00.png -append 0.png&quot;)
system(&quot;convert 0.png -fill black -gravity southwest -size 900x700 -pointsize 40 -font Arial caption:&#39;The x-axis shows the month of death and the y-axis shows the month of vaccination. People are kept included under the first dose even after they have gotten a second dose. The baseline number of deaths for each cell was calculated so that the number of person-days for each combination of age and month was multiplied by the mortality rate among all people included in the record-level data for the same combination of age and month, and the results were added together to get the total expected deaths for each cell. So the baseline is adjusted for seasonal variation in mortality.&#39; -gravity southwest -geometry +60+330 -composite 1.png&quot;)</pre>
<h2>
<a href=#Excess_mortality_by_type_of_first_vaccine id=Excess_mortality_by_type_of_first_vaccine>Excess
mortality by type of first vaccine</a>
</h2>
<p>The plot below shows excess mortality by the type of the first
vaccine. People with two or more doses almost always got the second dose
from the same vaccine type as the first dose, except Janssen vaccines
only had a single dose so people who got a Janssen vaccine for the first
dose often got a different type of vaccine for the booster.</p>
<p>The plot below shows that even in late 2022, people got a Moderna
vaccine for the first dose had much higher excess mortality than people
who got a Pfizer vaccine for the first dose. If the difference in
mortality would be because of vaccine deaths like Kirsch says, you'd
expect the difference to be greatest in the first few weeks or months
after vaccination and get weaker over time. But because the difference
remains in place more than a year after vaccination, it rather seems to
be caused by some confounding factors which I didn't adjust for
here:</p>
<div>
<img src=i/czech-firstdosetype.png width=800>
</div>
<p>In the plot above Janssen vaccines get by far the highest excess
mortality percentage, but it's probably because the average date of
first vaccination is much later for Janssen vaccines than for the other
three vaccine types, so the <span class="quote">"late vaccinees"</span>
who got vaccinated in the second half of 2021 are overrepresented among
the people who got a Janssen vaccine.</p>
<p>In the next plot the x-axis shows the month of vaccination and not
the month of death, and the number in each cell is the excess mortality
up to the end of 2022 and not the excess mortality on the month that is
shown on the x-axis. The plot shows that people who got a Pfizer vaccine
in late 2021 subsequently also had much higher excess mortality than
people who got a Pfizer vaccine in the first half of 2021:</p>
<div>
<img src=i/czech-firstdosetype-2.png width=800>
</div>
<pre>library(data.table)

b=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1][dose==0,type:=&quot;Unvaccinated&quot;][,age:=pmin(age,95)]

# first plot
d=merge(b[month&gt;=&quot;2020-12&quot;&amp;type!=&quot;Other&quot;],b[,.(base=sum(dead)/sum(alive)),.(age,month)])[,base:=base*alive]
d=d[,.(dead=sum(dead),alive=sum(as.double(alive)),base=sum(base)),.(type,month)]
d=rbind(d,d[,.(dead=sum(dead),alive=sum(alive),base=sum(base),month=&quot;Total&quot;),type])
d=rbind(d,d[type!=&quot;Unvaccinated&quot;,.(dead=sum(dead),alive=sum(alive),base=sum(base),type=&quot;All vaccinated&quot;),month])
d[,type:=factor(type,unique(c(&quot;Unvaccinated&quot;,&quot;All vaccinated&quot;,d[,sum(alive),type][order(-V1)]$type)))]

# # second plot
# d=merge(b[type!=&quot;Other&quot;&amp;dose&gt;0],b[,.(base=sum(dead)/sum(alive)),.(age,month)])[,base:=base*alive]
# d=d[,.(dead=sum(dead),alive=sum(as.double(alive)),base=sum(base)),.(type,vaxmonth)]
# d=rbind(d,d[,.(dead=sum(dead),alive=sum(alive),base=sum(base),vaxmonth=&quot;Total&quot;),type])
# d=rbind(d,d[,.(dead=sum(dead),alive=sum(alive),base=sum(base),type=&quot;All vaccinated&quot;),vaxmonth])
# d[,type:=factor(type,unique(d[,sum(alive),type][order(-V1)]$type))]

mpop=xtabs(d$alive~d[[1]]+d[[2]])/365
m=with(d,tapply((dead-base)/ifelse(dead&gt;base,base,dead)*100,d[,1:2],c))
disp=tapply(100*(d$dead/d$base-1),d[,1:2],round)
m[mpop&lt;10]=disp[mpop&lt;10]=NA
exp=.8;m=abs(m)^exp*sign(m)
maxcolor=300^exp;m[is.infinite(m)]=-maxcolor

pheatmap::pheatmap(m,filename=&quot;i1.png&quot;,display_numbers=disp,
  gaps_col=ncol(m)-1,
  cluster_rows=F,cluster_cols=F,legend=F,cellwidth=19,cellheight=19,fontsize=9,fontsize_number=8,
  border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse((abs(m)&gt;.55*maxcolor)&amp;!is.na(m),&quot;white&quot;,&quot;black&quot;),
  breaks=seq(-maxcolor,maxcolor,,256),
  colorRampPalette(hsv(rep(c(7/12,0),5:4),c(1,.8,.6,.3,0,.3,.6,.8,1),c(.3,.65,rep(1,5),.65,.3)))(256))

kimi=\(x){e=floor(log10(ifelse(x==0,1,abs(x))));e2=pmax(e,0)%/%3+1;x[]=ifelse(abs(x)&lt;1e3,round(x),
  paste0(sprintf(paste0(&quot;%.&quot;,ifelse(e%%3==0,1,0),&quot;f&quot;),x/1e3^(e2-1)),c(&quot;&quot;,&quot;k&quot;,&quot;M&quot;,&quot;B&quot;,&quot;T&quot;)[e2]));x}

exp2=.6;maxcolor2=max(mpop[-nrow(m),-ncol(m)])

pheatmap::pheatmap(mpop^exp2,filename=&quot;i2.png&quot;,display_numbers=kimi(mpop),
  gaps_col=ncol(m)-1,
  cluster_rows=F,cluster_cols=F,legend=F,cellwidth=19,cellheight=19,fontsize=9,fontsize_number=8,
  border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(mpop^exp2&gt;maxcolor2^exp2*.45,&quot;white&quot;,&quot;black&quot;),
  breaks=seq(0,maxcolor2^exp2,,256),
  sapply(seq(1,0,,256),\(i)rgb(i,i,i)))</pre>
<p>The plot below is otherwise similar to the first plot except the
baseline is the mortality among only unvaccinated people instead of both
unvaccinated and vaccinated people. It shows that during the COVID wave
in December 2021, people with a first dose from a Moderna vaccine had
about 65% lower deaths than unvaccinated people matched by age (even
though Kirsch was making it seem like people with a Moderna vaccine were
dropping like flies):</p>
<div>
<img src=i/czech-firstdosetype-3.png width=800>
</div>
<h2>
<a href=#Deaths_by_weeks_after_first_dose id=Deaths_by_weeks_after_first_dose>Deaths
by weeks after first dose</a>
</h2>
<p>In 2023 Kirsch published a table of data from Medicare which showed
the number of deaths by days since the first COVID vaccine given in 2021
that was listed in the database, which was generally the first dose of
each person. The table seems to have a bump in deaths about 20-30 days
after vaccination, which I speculated might have been because of people
who died soon after the second dose, because the second dose was often
given about 3-4 weeks after the first dose:
[<a href=https://kirschsubstack.com/p/game-over-medicare-data-shows-the#%C2%A7the-medicare-data-that-i-received>https://kirschsubstack.com/p/game-over-medicare-data-shows-the#%C2%A7the-medicare-data-that-i-received</a>]</p>
<div>
<img src=i/czech-weekafter-2.jpg width=600>
</div>
<p>In the plot below the dark green points show the same data for deaths
in 2021 as the screenshot above. The spline that I fitted to the dark
green points seems to have a bump where it's temporarily elevated around
day 25 from vaccination, but the red line for deaths in the year 2022
has a more smooth curve with no clear increase around day 25. I though
it might have been because most of the doses given in 2022 were booster
doses, and people didn't get a second booster dose right after the first
booster, so in the scenario where the bump in the dark green line was
caused by people dying from the second dose, the bump could've been
missing from the red line because people didn't get the second booster
soon after the first booster:</p>
<div>
<img src=i/moar-medicare-15.png width=600>
</div>
<p>I noticed that the Czech data also seems to be a bump in deaths
around weeks 2-4 after vaccination (where week 0 consists of the day of
vaccination and the next 6 days):</p>
<div>
<img src=i/czech-weekafter.png width=700>
</div>
<p>However in the plot above my baseline was not adjusted for seasonal
variation in mortality, because I calculated the baseline based on the
total mortality rates for each age in 2021-2022. In the plot below the
dark gray baseline was calculated the same way as in the plot above. But
if you look at the light gray baseline which is adjusted for seasonal
variation in mortality and for the impact of COVID waves, there's a big
fall in the baseline during the first 10 weeks after vaccination,
because many people got vaccinated during a period of time from March to
May 2021 when COVID deaths fell from the highest point during the
pandemic to near zero:</p>
<div>
<img src=i/czech-weekafter-3.png width=500>
</div>
<p>In the plot above if you compare the black line for deaths against
the dark gray baseline that is not adjusted for seasonality, the period
after vaccination that has clearly reduced mortality seems to last only
about 2 weeks, which is surprisingly short compared to other datasets
like Barry Young's data from New Zealand. But the period with reduced
mortality is actually longer if you compare the black line against the
light gray line instead, as you can see from this plot which shows the
excess percentage of deaths relative to the baseline:</p>
<div>
<img src=i/czech-weekafter-4.png width=500>
</div>
<p>So I suspect the reason why the US Medicare data had a spike in
deaths around days 20-30 might similarly be because many people received
the first dose in January to February 2021 when there was a sharp spike
in excess mortality in the United States, but by March 2021 the excess
mortality had fallen down close to zero.</p>
<p>Here's code for making the two previous plots:</p>
<pre>buck=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1]
buck=buck[,.(dead=sum(dead),alive=sum(alive)),by=.(month,age,type,week)]

rate1=buck[,.(rate1=sum(dead)/sum(alive)),by=age]
rate2=buck[,.(rate2=sum(dead)/sum(alive)),by=.(month,age)]
me=merge(merge(buck,rate1),rate2,by=c(&quot;age&quot;,&quot;month&quot;))[type!=&quot;&quot;]
xy=me[,.(excess1=(sum(dead)/sum(rate1*alive)-1)*100,excess2=(sum(dead)/sum(rate2*alive)-1)*100),by=week]

xy=me[,.(dead=sum(dead),base1=sum(rate1*alive),base2=sum(rate2*alive)),by=week][order(week)]

png(&quot;1.png&quot;,1200,800,res=198)
par(mar=c(2.3,2.3,2.1,.8),mgp=c(0,.6,0))
tit=&quot;Czech record-level data: Deaths by weeks after first dose&quot;
leg=c(&quot;Deaths&quot;,&quot;Same baseline for each month&quot;,&quot;Different baseline for each month&quot;)
col=c(&quot;black&quot;,&quot;gray50&quot;,&quot;gray80&quot;)
plot(xy$week,xy$base2,type=&quot;l&quot;,col=col[3],main=tit,xlab=NA,ylab=NA,lwd=1.5)
lines(xy$week,xy$base1,type=&quot;l&quot;,col=col[2],lwd=1.5)
lines(xy$week,xy$dead,type=&quot;l&quot;,col=col[1],lwd=1.5)
legend(&quot;bottom&quot;,legend=leg,col=col,lty=1,lwd=1.5)
dev.off()</pre>
<p>And here's code for the plot before them:</p>
<pre>library(ggplot2);library(data.table)

ua=\(x,y,...){u=unique(x);y(u,...)[match(x,u)]}

bin=7;maxdate=as.Date(&quot;2022-12-31&quot;)

rec=fread(&quot;CR_records.csv&quot;,showProgress=F)

t=rec[,.(id=1:.N,death=DatumUmrti,date=Datum_1,type=OckovaciLatka_1,birth=Rok_narozeni)][!is.na(date)]
set.seed(0);t$birth=ua(ua(t$birth,paste0,&quot;-1-1&quot;),as.Date)+sample(0:364,nrow(t),T)

name1=c(&quot;Comirnaty&quot;,&quot;SPIKEVAX&quot;,&quot;VAXZEVRIA&quot;,&quot;COVID-19 Vaccine Janssen&quot;)
name2=c(&quot;Pfizer&quot;,&quot;Moderna&quot;,&quot;AstraZeneca&quot;,&quot;Janssen&quot;)
t=t[!is.na(date)&amp;type%in%name1][,type:=name2[match(type,name1)]]

age=as.numeric(t$date-t$birth)/365.25
dead=t[!is.na(t$death)]
deadbin=(as.numeric(dead$death)-as.numeric(dead$date))%/%bin
endbin=(as.numeric(maxdate)-as.numeric(t$date))%/%bin

cmr=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year%in%2021:2022,.(sum(dead)/sum(pop)*1e5),age][[2]]

bins=0:max(endbin)
pop=rev(cumsum(rev(table(factor(endbin,bins)))))*bin
baseline=sapply(bins,\(i)mean(cmr[pmin(100,floor(age[i&lt;=endbin]+i*bin/365))+1]))

xy=data.frame(bin=bins,baseline,pop)
xy$dead=as.numeric(table(factor(deadbin,xy$bin)))
xy$cmr=xy$dead/xy$pop*1e5*365
xy$age=sapply(bins,\(i)mean(age[i&lt;=endbin]))+xy$bin*bin/365
deadage=(as.numeric(dead$death)-as.numeric(dead$birth))/365.25
xy$deadage=tapply(deadage,factor(deadbin,xy$bin),mean)+xy$bin*bin/365
xy$deadbase=xy$baseline*xy$pop/1e5/365

xy$cmr[xy$pop&lt;3e4]=NA

lab=read.csv(row.names=1,text=&quot;name,title
cmr,\&quot;Mortality rate per 1,000 person-years\&quot;
baseline,Baseline for mortality rate
dead,Deaths
deadbase,Baseline for deaths
age,Average age of population
deadage,Average age at death
pop,Population in 100k people&quot;)
lab$color=c(hcl(255,120,40),hcl(255,60,70),&quot;black&quot;,&quot;gray50&quot;,hcl(60,90,60),hcl(60,110,40),hcl(135,80,50))

lab1=strsplit(&quot;cmr,baseline,age,deadage,pop&quot;,&quot;,&quot;)[[1]]
lab2=strsplit(&quot;dead,deadbase&quot;,&quot;,&quot;)[[1]]

lab$mult=1
lab[&quot;pop&quot;,]$mult=1/1e5/7
lab[&quot;baseline&quot;,]$mult=lab[&quot;cmr&quot;,]$mult=1/100

cand=c(sapply(c(1,2,5),\(x)x*10^c(-10:10)))
ymax=max(t(t(xy[,lab1])*lab[lab1,]$mult),na.rm=T)
ystep=cand[which.min(abs(cand-ymax/6))]
yend=ystep*ceiling(ymax/ystep)
xstep=cand[which.min(abs(cand-max(xy$bin)/9))]
xend=xstep*ceiling(max(xy$bin)/xstep)
xbreak=seq(0,xend,xstep);ybreak=seq(0,yend,ystep)
ymax2=max(t(t(xy[,lab2])*lab[lab2,]$mult),na.rm=T)
ystep2=cand[which.min(abs(cand-ymax2/6))]
yend2=ceiling(ymax2/ystep2)*ystep2
secmult=yend/yend2

legh=.38;legstep=15
legy1=rev(seq(0,,yend/legstep,length(lab1)))+(legh-length(lab1)/legstep/2)*yend
legy2=rev(seq(0,,yend/legstep,length(lab2)))+(legh-length(lab2)/legstep/2)*yend
leg1=data.frame(x=.02*xend,y=legy1,label=lab[lab1,]$title,color=lab[lab1,]$color)
leg2=data.frame(x=.98*xend,y=legy2,label=lab[lab2,]$title,color=lab[lab2,]$color)

lab$mult=lab$mult*ifelse(rownames(lab)%in%lab2,secmult,1)
xy2=as.data.frame(t(t(xy)*c(1,lab[names(xy)[-1],]$mult)))

kimi=\(x)ifelse(abs(x)&gt;=1e6,paste0(x/1e6,&quot;M&quot;),ifelse(abs(x)&gt;=1e3,paste0(x/1e3,&quot;k&quot;),x))

ggplot(xy2,aes(x=bin))+
geom_hline(yintercept=0,linewidth=.35,lineend=&quot;square&quot;)+
geom_vline(xintercept=c(0,xend),linewidth=.35,lineend=&quot;square&quot;)+
geom_line(aes(y=dead),linewidth=.4,color=lab[&quot;dead&quot;,]$color)+
geom_line(aes(y=deadbase),linewidth=.4,color=lab[&quot;deadbase&quot;,]$color)+
geom_line(aes(y=cmr),linewidth=.4,color=lab[&quot;cmr&quot;,]$color)+
geom_line(aes(y=baseline),linewidth=.4,color=lab[&quot;baseline&quot;,]$color)+
geom_line(aes(y=pop),linewidth=.4,color=lab[&quot;pop&quot;,]$color)+
geom_point(aes(y=age),size=.4,color=lab[&quot;age&quot;,]$color)+
geom_point(aes(y=deadage),size=.4,color=lab[&quot;deadage&quot;,]$color)+
geom_label(data=leg1,aes(x=x,y=y,label=label),fill=alpha(&quot;white&quot;,.8),label.r=unit(0,&quot;lines&quot;),label.padding=unit(.04,&quot;lines&quot;),label.size=0,size=3.2,hjust=0,vjust=.5,color=leg1$color)+
geom_label(data=leg2,aes(x=x,y=y,label=label),fill=alpha(&quot;white&quot;,.8),label.r=unit(0,&quot;lines&quot;),label.padding=unit(.04,&quot;lines&quot;),label.size=0,size=3.2,hjust=1,vjust=.5,color=leg2$color)+
labs(x=NULL,y=&quot;&quot;,title=&quot;Czech record-level data: Deaths by weeks after first vaccine dose&quot;,subtitle=&quot;People are kept under the first dose after they get a second dose. The baseline was calculated by multiplying a vector of Czech mortality rates for each age in 2021-2022 by a vector for the number of person-days for each age, so the baseline is not adjusted for seasonal variation in mortality.&quot;|&gt;stringr::str_wrap(90))+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
scale_x_continuous(limits=c(0,xend),breaks=xbreak)+
scale_y_continuous(limits=c(0,yend),breaks=ybreak,label=kimi,sec.axis=sec_axis(trans=~./secmult,breaks=seq(0,yend2,ystep2),label=kimi))+
theme(axis.text=element_text(size=8,color=&quot;black&quot;),
  axis.ticks=element_line(linewidth=.35,color=&quot;black&quot;),
  axis.ticks.length=unit(.2,&quot;lines&quot;),
  axis.title=element_blank(),
  axis.title.y.right=element_text(margin=margin(0,0,0,5)),
  legend.position=&quot;none&quot;,
  panel.background=element_rect(fill=&quot;white&quot;),
  panel.grid=element_blank(),
  plot.margin=margin(.3,.3,.3,.3,&quot;lines&quot;),
  plot.subtitle=element_text(size=7.8,margin=margin(0,0,.6,0,&quot;lines&quot;)),
  plot.title=element_text(size=9,margin=margin(.2,0,.4,0,&quot;lines&quot;)))
ggsave(&quot;1.png&quot;,width=5,height=3.4,dpi=400)</pre>
<h2>
<a href=#Projected_mortality_rates_by_age_group_based_on_a_2010_2019_trend id=Projected_mortality_rates_by_age_group_based_on_a_2010_2019_trend>Projected
mortality rates by age group based on a 2010-2019 trend</a>
</h2>
<p>The Czech Statistical Office has published weekly data for deaths by
5-year age groups:
<a href=https://vdb.czso.cz/vdbvo2/faces/en/index.jsf?page=vystup-objekt-parametry&pvo=DEMD007KR-R2024&sp=A&skupId=3629&katalog=30845&z=T.><a
href="https://vdb.czso.cz/vdbvo2/faces/en/index.jsf?page=vystup-objekt-parametry&amp;pvo=DEMD007KR-R2024&amp;sp=A&amp;skupId=3629&amp;katalog=30845&amp;z=T"
class="uri">https://vdb.czso.cz/vdbvo2/faces/en/index.jsf?page=vystup-objekt-parametry&amp;pvo=DEMD007KR-R2024&amp;sp=A&amp;skupId=3629&amp;katalog=30845&amp;z=T</a>.</a></p>
<p>The following code calculates daily mortality rates in 2010-2019 by
interpolating the weekly deaths to daily deaths, and it interpolates
Eurostat's yearly population sizes to daily population sizes. And then
it calculates a seasonality-adjusted linear trend of the mortality rate
in each 5-year age group and projects the trend to 2020-2022, and then
the expected number of deaths is derived by multiplying the population
size by the projected mortality rate:</p>
<pre>isoweek=\(year,week,weekday=1){d=as.Date(paste0(year,&quot;-1-4&quot;));d-(as.integer(format(d,&quot;%w&quot;))+6)%%7-1+7*(week-1)+weekday}

dates=seq(as.Date(&quot;2010-1-1&quot;),as.Date(&quot;2022-12-31&quot;),1)

t=read.csv(&quot;http://sars2.net/f/czweeklydead.csv&quot;)
dead=sapply(split(t,t$age),\(x)predict(smooth.spline(isoweek(x$year,x$week,4),x$dead/7),as.numeric(dates))$y)
pop=read.csv(&quot;http://sars2.net/f/czpopdead.csv&quot;)|&gt;subset(year&gt;=2009)
pop=sapply(split(pop,pop$age),\(x)predict(smooth.spline(an(as.Date(paste0(x$year,&quot;-1-1&quot;))),x$pop),as.numeric(dates))$y)
pop=t(rowsum(t(pop),pmin(0:100%/%5*5,90)))

seapre=\(x,y,x2=x,spar=.5){ # seasonal prediction
  x=as.Date(x,&quot;1970-1-1&quot;);x2=as.Date(x2,&quot;1970-1-1&quot;)
  d=data.frame(x,y);lm=lm(y~x,d)
  daily=tapply(y-predict(lm,list(x)),substr(x,6,10),mean)
  daily=daily[names(daily)!=&quot;02-29&quot;]
  daily[]=smooth.spline(rep(daily,3),spar=spar)$y[366:730]
  daily[&quot;02-29&quot;]=mean(daily[c(&quot;02-28&quot;,&quot;03-01&quot;)])
  data.frame(x=x2,y=predict(lm,list(x=x2))+daily[substr(x2,6,10)])
}

d=data.frame(date=dates,age=rep(seq(0,90,5),each=length(dates)),pop=c(pop),dead=c(dead))
d$projdead=c(apply(dead/pop,2,\(x)seapre(dates,x)$y))*d$pop

d$pop=sprintf(&quot;%.2f&quot;,d$pop)
d$dead=sprintf(&quot;%.5f&quot;,d$dead)
d$projdead=sprintf(&quot;%.5f&quot;,d$projdead)
write.csv(d,&quot;czdeadproj.csv&quot;,quote=F,row.names=F)</pre>
<p>The output looks like this:
[<a href=f/czdeadproj.csv>f/czdeadproj.csv</a>]</p>
<pre>$ curl -Ls sars2.net/f/czdeadproj.csv|sed 3q
date,age,pop,dead,projdead
2010-01-01,0,570301.15,1.15035,1.04195
2010-01-02,0,570360.14,1.15010,1.04254</pre>
<h2>
<a href=#Excess_mortality_by_weeks_after_vaccination_and_age_group id=Excess_mortality_by_weeks_after_vaccination_and_age_group>Excess
mortality by weeks after vaccination and age group</a>
</h2>
<p>Jeffrey Morris has coined the term <span class="quote">"temporal
healthy vaccinee effect"</span> to describe the phenomenon where
mortality rate is temporarily reduced for the first weeks or months
after vaccination. The plot below shows that the temporal HVE seems to
be the strongest around ages 50-79, but it's much weaker in ages 90+ and
in younger age groups:</p>
<div>
<img src=i/czech-ageweek.png width=700>
</div>
<p>In the plot above my baseline was the total mortality rate among both
vaccinated and unvaccinated people, which results in a bias where age
groups with a higher percentage of vaccinated people tend to have excess
mortality closer to zero. If for example there is one age group where
there's 90% vaccinated people, and vaccinated people have a mortality
rate of 123 and unvaccinated people have a mortality rate of 246, then
it would result in only about -9% excess mortality for vaccinated people
(from <code>123/(123*.90+246*.1)-1</code>). But if 60% of people are
vaccinated then vaccinated people would be about -29% excess mortality
with the same mortality rates.of 123 and 246.</p>
<p>However the bias doesn't probably explain why ages 90+ don't have as
low excess mortality during the first weeks of vaccination as younger
age groups, because the Czech data actually has a lower percentage of
vaccinated people in ages 90+ than in ages 50-79:</p>
<pre>&gt; rec=fread(&quot;CR_records.csv&quot;)
&gt; rec[!(!is.na(DatumUmrti)&amp;DatumUmrti&lt;&quot;2021-01-01&quot;),.(vaxpct=mean(!is.na(Datum_1))*100),.(age=pmax(0,pmin(90,(2021-Rok_narozeni)%/%10*10)))][order(age)]|&gt;round()|&gt;print(r=F)
 age vaxpct
   0      3
  10     47
  20     68
  30     65
  40     73
  50     76
  60     82
  70     86
  80     84
  90     70</pre>
<p>In order to avoid the bias, in the next plot I calculated the
baseline, based on the trend in mortality rates within five-year age
groups in 2010-2019. However now my excess mortality on weeks 0-4 was
about -61% for ages 50-59 but only about -37% for ages 90+, even though
later on the difference got smaller, which might indicate that the
temporal healthy vaccinee effect might in fact be less strong in the
oldest age groups:</p>
<div>
<img src=i/czech-ageweek-2.png width=700>
</div>
<pre>library(data.table)

weekbin=5;agebin=10;maxage=90

t=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1][,.(dead=sum(dead),alive=sum(alive)),.(month,age,type,week,dose)]

# first plot
t=merge(t[dose&gt;0],t[,.(rate=sum(dead)/sum(alive)),by=.(month,age)])

# # second plot
# proj=fread(&quot;http://sars2.net/f/czdeadproj.csv&quot;)[,.(dead=sum(dead),pop=sum(pop)),.(month=substr(date,1,7),age)]
# t=merge(t[type!=&quot;&quot;][,age:=pmin(90,age%/%5*5)],proj[,.(month,age,rate=dead/pop)])

t=t[,.(dead=sum(dead),alive=sum(alive),base=sum(rate*alive)),.(week%/%weekbin*weekbin,age=pmin(90,age%/%agebin*agebin))][order(week)]

t$age=`levels&lt;-`(factor(t$age),paste0(seq(0,maxage,agebin),c(paste0(&quot;-&quot;,seq(agebin-1,maxage,agebin)),&quot;+&quot;)))
t$week=`levels&lt;-`(factor(t$week),sapply(sort(unique(t$week)),\(i)paste0(i,&quot;-&quot;,i+weekbin-1)))
t=rbind(t,t[,.(dead=sum(dead),alive=sum(alive),base=sum(base),week=&quot;Total&quot;),by=age])

m=tapply(with(t,(dead-base)/ifelse(dead&gt;base,base,dead)*100),t[,2:1],c)
disp=round(tapply((t$dead/t$base-1)*100,t[,2:1],c))
disp[is.nan(disp)]=-100
mpop=xtabs(alive~age+week,t)

# m[mpop&lt;100]=disp[mpop&lt;100]=NA
exp=.8;m=abs(m)^exp*sign(m)
maxcolor=400^exp;m[is.infinite(m)]=-maxcolor;m[is.nan(m)]=-maxcolor

pal=hsv(rep(c(7/12,0),5:4),c(.9,.75,.6,.3,0,.3,.6,.75,.9),c(.4,.65,1,1,1,1,1,.65,.4))

pheatmap::pheatmap(m,filename=&quot;0.png&quot;,display_numbers=disp,
  gaps_col=ncol(m)-1,
  cluster_rows=F,cluster_cols=F,legend=F,
  cellwidth=18,cellheight=18,fontsize=9,fontsize_number=8,border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(!is.na(m)&amp;abs(m)&gt;.5*maxcolor,&quot;white&quot;,&quot;black&quot;),
  breaks=seq(-maxcolor,maxcolor,,256),colorRampPalette(pal)(256))</pre>
<h2>
<a href=#People_who_got_the_second_dose_from_a_different_vaccine_type_than_the_first_dose id=People_who_got_the_second_dose_from_a_different_vaccine_type_than_the_first_dose>People
who got the second dose from a different vaccine type than the first
dose</a>
</h2>
<p>Kirsch included these comments in the file
<code>Full analysis - All vaccines.xlsx</code>:</p>
<blockquote>
<p>This is the pivot table analysis for Study #1 which enrolled any who
got their first COVID shot anytime in 2021.</p>
<p>Note that if you didn't get a second shot, it's highly likely that it
is because you died.</p>
<p>However the mortality rate ratio (MRR) which is
MR(Moderna)/MR(Pfizer) is also high for those people when it should be 1
if both vaccines are safe.</p>
<p>See the Detail 1 tab which shows that the MRR ratio is &gt;1 for each
and every 5 year age group examined which eliminates the Simpson's
paradox.</p>
<h3 id="additional-note">Additional note</h3>
<p>Those who mixed vaccines between dose 1 vs. dose 2 had the highest
increase in ACM.</p>
<p>The high MR line items for the second vaccine being None is likely
because those people died before their second vaccine so this should not
be misinterpreted as you must get two vaccines or you'll die.</p>
<p>Note that if you Moderna then Pfizer vs. Pfizer and then Moderna, the
MRS were nearly identical around 2175) so the order of shots did not
matter!!!</p>
<p>However, the MR of a mixed dose did NOT give you an MR between the
two pure vaccines. It was higher than pure Pfizer or pure Moderna.</p>
<p>Note that MOST people did not mix brands between dose 1 and dose
2.</p>
</blockquote>
<p>In the code below I calculated ASMR during the first year from the
first dose using the same simple but inaccurate method as earlier, where
I treated the age of each person as their year of birth subtracted from
2021. However I actually got very low ASMR for people who got Pfizer for
the first dose and Moderna for the second dose (even though they
consisted of only 279 people so the confidence interval is huge):</p>
<pre>retype=\(x){name1=c(&quot;&quot;,&quot;Comirnaty&quot;,&quot;SPIKEVAX&quot;,&quot;VAXZEVRIA&quot;,&quot;COVID-19 Vaccine Janssen&quot;);name2=c(&quot;None&quot;,&quot;Pfizer&quot;,&quot;Moderna&quot;,&quot;AstraZeneca&quot;,&quot;Janssen&quot;);ifelse(x%in%name1,name2[match(x,name1)],&quot;Other&quot;)}

std=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2022,pop]
rec=fread(&quot;CR_records.csv&quot;)

t=rec[Datum_1&lt;as.Date(&quot;2022-1-1&quot;),.(dead=sum(!is.na(DatumUmrti)&amp;DatumUmrti&lt;Datum_1+365),pop=.N),.(age=pmin(100,2021-Rok_narozeni),type1=retype(OckovaciLatka_1),type2=retype(OckovaciLatka_2))]
t[,.(asmr=round(sum(dead/pop*std[age+1]/sum(std)*1e5)),dead=sum(dead),pop=sum(pop),meanage=round(weighted.mean(age,pop))),.(type1,type2)][order(-pop)]|&gt;print(r=F)</pre>
<!-- -->
<pre>       type1       type2  asmr  dead     pop meanage
      Pfizer      Pfizer   705 45595 5411522      49
     Moderna     Moderna   918  8778  509704      55
 AstraZeneca AstraZeneca   781 10639  439648      68
     Janssen        None  1325  4418  404824      46
      Pfizer        None 11599  5914   49445      43
     Moderna        None 11274  1200    6224      52
 AstraZeneca        None 17457  3091    5522      75
 AstraZeneca      Pfizer   938    46    1795      61
     Moderna      Pfizer  1507    13     569      48
       Other       Other     0     0     348      43
 AstraZeneca     Moderna   973    10     329      62
      Pfizer     Moderna   421     6     279      50
      Pfizer       Other     0     0     130      49
      Pfizer     Janssen   253     1     126      43
 AstraZeneca     Janssen  1653     7     109      64
 AstraZeneca       Other     0     0      34      72
     Moderna     Janssen   989     2      33      47
     Moderna       Other     0     0      25      62
      Pfizer AstraZeneca     0     0      24      51
       Other AstraZeneca     0     0      21      48
     Moderna AstraZeneca   630     1       7      59
       Other        None     0     0       1      47
       Other      Pfizer     0     0       1      80
       type1       type2  asmr  dead     pop meanage</pre>
<p>But actually ASMR is unreliable in cases like this where there's only
a small number of people and the people can be unevenly distributed
across age groups. In the following code I calculated the expected
number of deaths by multiplying the Czech mortality rate for each age in
2021-2022 with the number of people for each age. I looked at all 6
pairs of crossovers between Pfizer, Moderna, and AstraZeneca vaccines,
but the total excess mortality between them was only about -18%:</p>
<pre>retype=\(x){name1=c(&quot;&quot;,&quot;Comirnaty&quot;,&quot;SPIKEVAX&quot;,&quot;VAXZEVRIA&quot;,&quot;COVID-19 Vaccine Janssen&quot;);name2=c(&quot;None&quot;,&quot;Pfizer&quot;,&quot;Moderna&quot;,&quot;AstraZeneca&quot;,&quot;Janssen&quot;);ifelse(x%in%name1,name2[match(x,name1)],&quot;Other&quot;)}

base=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year%in%2021:2022,.(sum(dead)/sum(pop)),age][[2]]
rec=fread(&quot;CR_records.csv&quot;)

t=rec[Datum_1&lt;as.Date(&quot;2022-1-1&quot;),.(dead=sum(!is.na(DatumUmrti)&amp;DatumUmrti&lt;Datum_1+365),pop=.N),.(age=pmin(100,2021-Rok_narozeni),type1=retype(OckovaciLatka_1),type2=retype(OckovaciLatka_2))]
pick=c(&quot;Pfizer&quot;,&quot;Moderna&quot;,&quot;AstraZeneca&quot;)
t=t[type1%in%pick&amp;type2%in%pick&amp;type1!=type2]

t=rbind(t,t[,.(dead=sum(dead),pop=sum(pop),type1=&quot;Total&quot;),.(age,type2)])
t=rbind(t,t[,.(dead=sum(dead),pop=sum(pop),type2=&quot;Total&quot;),.(age,type1)])

t[,.(excesspct=round((sum(dead)/sum(pop*base[pmin(age,100)+1])-1)*100),dead=sum(dead),pop=sum(pop),meanage=round(weighted.mean(age,pop))),.(type1,type2)][order(type1,type2)]|&gt;print(r=F)</pre>
<!-- -->
<pre>       type1       type2 excesspct dead  pop meanage
 AstraZeneca     Moderna       -20   10  329      62
 AstraZeneca      Pfizer       -24   46 1795      61
 AstraZeneca       Total       -23   56 2124      62
     Moderna AstraZeneca       982    1    7      59
     Moderna      Pfizer         6   13  569      48
     Moderna       Total        13   14  576      48
      Pfizer AstraZeneca      -100    0   24      51
      Pfizer     Moderna       -11    6  279      50
      Pfizer       Total       -18    6  303      50
       Total AstraZeneca        51    1   31      53
       Total     Moderna       -17   16  608      56
       Total      Pfizer       -19   59 2364      58
       Total       Total       -18   76 3003      58</pre>
<p>In the output above Pfizer-Moderna has a similar excess mortality
percent as Moderna-Pfizer, even though in the block of output before it
Moderna-Pfizer got over 3 times higher ASMR than Pfizer-Moderna. However
that's because the Moderna-Pfizer group had one death in ages 10-19 and
one death in ages 40-49, which together added over 500 units to the
total ASMR value. With ASMR, the mortality rates of younger age groups
that make up a large percent of the standard population are given more
weight than the mortality rates of the oldest age groups that make up a
small percent of the standard population:</p>
<pre>std=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2022,pop]
t[type1==&quot;Moderna&quot;&amp;type2==&quot;Pfizer&quot;,.(asmr=sum(dead/pop*std[age+1]/sum(std)*1e5),dead=sum(dead),pop=sum(pop),stdpoppct=100*sum(std[age+1]/sum(std))),.(agegroup=age%/%10*10)][order(agegroup)]|&gt;transform(asmrperdead=asmr/dead)|&gt;mutate_if(is.double,round)|&gt;print(r=F)</pre>
<!-- -->
<pre> agegroup asmr dead pop stdpoppct asmrperdead
       10  282    1  33         8         282
       20    0    0 107        10         NaN
       30    0    0 105        13         NaN
       40  258    1  73        16         258
       50    0    0  67        13         NaN
       60    0    0  64        12         NaN
       70  671    4  72        10         168
       80  179    3  33         3          60
       90  117    4  15         0          29 # for ages 90-99 the contribution to ASMR per death was about one tenth of the contribution in ages 10-19</pre>
<h2>
<a href=#Plot_of_multiple_variables_from_OWID id=Plot_of_multiple_variables_from_OWID>Plot
of multiple variables from OWID</a>
</h2>
<p>In the Czech Republic spikes in excess mortality coincide with spikes
in PCR positivity like in other countries, except that after Omicron
there seems to be high PCR positivity coupled with low excess mortality,
which is also similiar to many other countries. In winter 2020-2021
there's a weird three-hump pattern where there's three different spikes
in excess deaths, but each of them also coincides with a spike in PCR
positivity. And around mid-2021 when the number of new vaccine doses
given peaked, there was low excess mortality.</p>
<div>
<img src=i/czech-owid.png width=700>
</div>
<p>At OWID weekly excess deaths peaked at about 104% in November 2020
and 58% in December 2021:</p>
<pre>$ wget covid.ourworldindata.org/data/owid-covid-data.csv
$ sed &#39;1n;/Czechia/!d&#39; owid-covid-data.csv|csvtk cut -flocation,date,excess_mortality|awk -F, &#39;$3&gt;50&#39;
location,date,excess_mortality
Czechia,2020-10-25,71.85
Czechia,2020-11-01,101.35
Czechia,2020-11-08,103.79
Czechia,2020-11-15,80.85
Czechia,2020-11-22,60.63
Czechia,2021-01-03,53.57
Czechia,2021-01-10,58.77
Czechia,2021-01-17,56.32
Czechia,2021-03-07,55.34
Czechia,2021-03-14,63.21
Czechia,2021-03-21,60.61
Czechia,2021-04-04,50.22
Czechia,2021-11-28,50.76
Czechia,2021-12-05,57.82
Czechia,2021-12-12,54.9</pre>
<p>After mid-2021 when new vaccine doses peaked, there were only two
relatively brief periods when the mortality was clearly elevated above
the baseline. The first was during the COVID spike around December 2021.
The second was around December 2022 when many European countries had a
spike in all-cause deaths but not COVID deaths, which was probably
caused by influenza A since it coincided with a peak in the number of
positive tests for influenza A:
[<a href=https://app.powerbi.com/view?r=eyJrIjoiYWU4YjUyN2YtMDBkOC00MGI1LTlhN2UtZGE5NThjY2E1ZThhIiwidCI6ImY2MTBjMGI3LWJkMjQtNGIzOS04MTBiLTNkYzI4MGFmYjU5MCIsImMiOjh9>https://app.powerbi.com/view?r=eyJrIjoiYWU4YjUyN2YtMDBkOC00MGI1LTlhN2UtZGE5NThjY2E1ZThhIiwidCI6ImY2MTBjMGI3LWJkMjQtNGIzOS04MTBiLTNkYzI4MGFmYjU5MCIsImMiOjh9</a>]</p>
<div>
<img src=i/czech-influenza.png width=1000>
</div>
<p>Germany also had a sharp spike in excess deaths in December 2022,
which coincided with a high incidence of influenza-like illness and
acute respiratory illness reported by the Robert Koch Institute's
GrippeWeb service, but at the same time there was a low number of COVID
deaths compared to the two previous winters:
[<a href=https://github.com/robert-koch-institut/GrippeWeb_Daten_des_Wochenberichts>https://github.com/robert-koch-institut/GrippeWeb_Daten_des_Wochenberichts</a>]</p>
<div>
<img src=i/czech-influenza-germany.png width=700>
</div>
<p>Kirsch seems to suggest that a large part of the Czech excess
mortality after vaccination can be attributed to the vaccines, and he
also says that the vaccines don't necessarily kill people soon after
vaccination but they result in a chronic increase in mortality, because
his plots show that the number of deaths by weeks since vaccination goes
up over time, and he has attributed the increase in his plots to deaths
caused by vaccines. But then from mid-2021 onwards after most people had
been vaccinated, why were the excess deaths concentrated into two
relatively sharp spikes around December 2021 and December 2022? And if
vaccines killed a particularly high number of people in December 2021,
then why was the ratio of unvaccinated to vaccinated ASMR elevated in
December 2021?</p>
<h2>
<a href=#Representation_of_age_groups_compared_to_2021_census_and_Eurostat id=Representation_of_age_groups_compared_to_2021_census_and_Eurostat>Representation
of age groups compared to 2021 census and Eurostat</a>
</h2>
<p>The resident population estimates at Eurostat are for January 1st of
each year. In the record-level data you can get the age on each person
on December 31st 2020 if you subtract the year of birth from 2020, so
it's only one day off from the date of the population estimates at
Eurostat.</p>
<p>The resident population estimates in the 2021 Czech census are for
March 26th 2021:
<a href=https://scitani.gov.cz/age-structure#skupina-282345.><a
href="https://scitani.gov.cz/age-structure#skupina-282345"
class="uri">https://scitani.gov.cz/age-structure#skupina-282345</a>.</a></p>
<p>In most 10-year age groups the record-level data contains about
98-104% of the people in the 2021 census, but in ages 90-99 it's about
107% and in ages 100+ it's about 209%:</p>
<pre>rec=fread(&quot;CR_records.csv&quot;)
t=rec[Rok_narozeni&lt;2021&amp;!(!is.na(DatumUmrti)&amp;DatumUmrti&lt;&quot;2021-01-01&quot;),list(recordlevel=.N),.(age=pmin(2020-Rok_narozeni,100)%/%10*10)][order(age)]
t=merge(t,fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,.(census2021=sum(pop)),.(age=age%/%10*10)])
t=merge(t,fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2021,.(eurostat=sum(pop)),.(age=age%/%10*10)])

t=rbind(t,t[,lapply(.SD,sum)][,age:=&quot;Total&quot;])

t[,censuspct:=recordlevel/census2021*100]
t[,eurostatpct:=recordlevel/eurostat*100]
print(mutate_if(t,is.double,round,1),row.names=F)</pre>
<!-- -->
<pre>   age recordlevel census2021 eurostat censuspct eurostatpct
     0     1122110    1110656  1106350     101.0       101.4
    10     1083970    1070940  1064611     101.2       101.8
    20     1091962    1078231  1074387     101.3       101.6
    30     1465653    1409650  1398642     104.0       104.8
    40     1773632    1735533  1731067     102.2       102.5
    50     1361789    1354501  1345943     100.5       101.2
    60     1298397    1284689  1293120     101.1       100.4
    70     1038356    1037997  1035782     100.0       100.2
    80      382614     378684   380997     101.0       100.4
    90       65762      62639    63318     105.0       103.9
   100         957        647      619     147.9       154.6
 Total    10685202   10524167 10494836     101.5       101.8</pre>
<p>In the code above I excluded people who were born in 2021 or later or
who had died before 2021. But the total population size in the
record-level data was still about 1-2% higher than the resident
population estimates in the 2021 census and Eurostat. But both of them
only included the resident population, so I don't know if the
record-level data also includes non-residents.</p>
<p>The Czech Statistical Office has published a dataset for resident
population estimates on December 31st 2022 by age group, region, and
sex:
<a href=https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e.><a
href="https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e"
class="uri">https://data.gov.cz/datová-sada?iri=https%3A%2F%2Fdata.gov.cz%2Fzdroj%2Fdatové-sady%2F00025593%2Fa129a5408e8e5fd99497e9a22c39775e</a>.</a>
However the total population size in the file is identical to Eurostat's
population estimate for January 1st 2023:</p>
<pre>&gt; fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)[year==2023,sum(pop)]
[1] 10827529
&gt; system(&quot;wget csu.gov.cz/docs/107508/a53bbc83-5e04-5a74-36f9-549a090a806e/130142-24data051724.zip ;unzip 130142-24data051724.zip&quot;)
&gt; pop=fread(&quot;130181-23data2022.csv&quot;)
&gt; pop[uzemi_typ==&quot;stát&quot;&amp;is.na(vek_txt)&amp;pohlavi_txt==&quot;&quot;,hodnota]
[1] 10827529 # region type is whole country, age is blank (all ages), and sex is blank (both males and females)
&gt; pop[uzemi_typ==&quot;stát&quot;&amp;!is.na(vek_txt)&amp;pohlavi_txt!=&quot;&quot;,sum(hodnota)]
[1] 10827529 # individual age groups add up to the total for all age groups, and males and females add up to the total for both males and females
&gt; pop[uzemi_typ==&quot;kraj&quot;&amp;is.na(vek_txt)&amp;pohlavi_txt==&quot;&quot;,sum(hodnota)]
[1] 10827529 # individual kraj-level regions add up the total for the whole nation</pre>
<h2>
<a href=#Monthly_ratio_of_unvaccinated_ASMR_to_vaccinated_ASMR_and_comparison_to_Maldives_data id=Monthly_ratio_of_unvaccinated_ASMR_to_vaccinated_ASMR_and_comparison_to_Maldives_data>Monthly
ratio of unvaccinated ASMR to vaccinated ASMR and comparison to Maldives
data</a>
</h2>
<p>In October 2021 unvaccinated people had about 2.1 times higher ASMR
than vaccinated people, but over the next two months when there was a
spike in excess deaths caused by COVID, the ratio increased first to
about 2.8 in November and then about 3.1 in December. But by May 2022
when COVID deaths had fallen close to zero, the ratio had fallen back
down to about 1.8:</p>
<pre>&gt; std=fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,sum(pop),pmin(age,95)][,V1/sum(V1)]
&gt; b=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)
&gt; d=b[month&gt;=&quot;2020-12&quot;&amp;dose&lt;=1]
&gt; d=d[,.(dead=sum(dead),alive=sum(alive)),.(month,vax=dose==1,age=pmin(age,95))]
&gt; d=d[,.(asmr=sum(dead/alive*std[age+1])),.(month,vax)]
&gt; d[,.(ratio=round(asmr[!vax]/asmr[vax],1)),month]|&gt;print(r=F)
   month ratio
 2020-12   Inf
 2021-01   1.2
 2021-02   1.1
 2021-03   2.8
 2021-04   3.2
 2021-05   3.4
 2021-06   3.0
 2021-07   2.6
 2021-08   2.3
 2021-09   2.2
 2021-10   2.1
 2021-11   2.8
 2021-12   3.1
 2022-01   2.6
 2022-02   2.5
 2022-03   2.3
 2022-04   1.8
 2022-05   1.8
 2022-06   1.7
 2022-07   1.7
 2022-08   1.6
 2022-09   1.7
 2022-10   1.7
 2022-11   1.6
 2022-12   1.6
   month ratio</pre>
<p>In December 2023 Kirsch published record-level data from the Maldives
which included a complete or nearly complete table of people who died in
the Maldives in 2021-2022 along with their dates of vaccination.
[<a href=moar.html#Data_for_deaths_in_2020_2023_in_Maldives>moar.html#Data_for_deaths_in_2020_2023_in_Maldives</a>]
I used the data to calculate a rough ratio of unvaccinated CMR to
vaccinated CMR so that during for example in May 2021 when about 41.922%
of people were unvaccinated and there were 122 deaths in unvaccinated
people and 81 deaths in vaccinated people, I calculated the ratio as
<code>(122/41.922)/(81/(100-41.922))</code>, which is about 2.1. In May
and June 2021 when Maldives had the most COVID deaths, the ratio of
unvaccinated to vaccinated CMR was about 2.1, but the ratio was much
lower in the surrounding months, which seems to indicate that
unvaccinated people were more likely to die of COVID:</p>
<div>
<img src=i/moar-maldives-1.png width=900>
</div>
<p>The method I used to calculate the mortality ratios in the Maldives
didn't even take into account that vaccinated people were older on
average than unvaccinated people, so I would've probably gotten higher
ratios if I would've been able to calculate mortality ratios normalized
by age.</p>
<p>However now with the Czech data I was able to use a more
sophisticated method to calculate a ratio between unvaccinated and
vaccinated mortality so that it was adjusted for age, but I still got
similar results where the ratio was temporarily elevated during a period
of months that had a high number of COVID deaths.</p>
<h2>
<a href=#Ratio_between_monthly_ASMR_for_Moderna_and_Pfizer_vaccines id=Ratio_between_monthly_ASMR_for_Moderna_and_Pfizer_vaccines>Ratio
between monthly ASMR for Moderna and Pfizer vaccines</a>
</h2>
<p>The ratio column below shows the ASMR in people whose first dose was
Moderna divided by the ASMR in people whose first dose was Pfizer. The
ratio is actually lower than usual during the COVID wave in November to
December 2021. It might possibly indicate that Moderna vaccines were
more effective in preventing COVID deaths than Pfizer vaccines, even
though it might also indicate that there's some confounding factors
which caused people who got a Moderna vaccine to be less likely to die
from COVID:</p>
<pre>&gt; b=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[month&gt;=&quot;2020-12&quot;&amp;dose&lt;=1][dose==0,type:=&quot;Unvaccinated&quot;]
&gt; std=fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,sum(pop),pmin(age,95)%/%5][,V1/sum(V1)]
&gt; d=b[,.(dead=sum(dead),alive=sum(alive)),.(month,type,age=pmin(age,95)%/%5)]
&gt; d=d[,.(asmr=sum(dead/alive*std[age/5+1]*365e5)),.(month,type)]
&gt; o=dcast(d,month~type,value.var=&quot;asmr&quot;)[,ratio:=Moderna/Pfizer]
&gt; o=o[,.(month,ratio=round(ratio,2),Pfizer,Moderna,Unvaccinated)]
&gt; o[,3:5]=lapply(o[,3:5],round)
&gt; print(o,r=F)
   month ratio Pfizer Moderna Unvaccinated
 2020-12    NA      0      NA         6041
 2021-01  1.29   4449    5740         5809
 2021-02  0.98   4423    4345         5695
 2021-03  1.61   3031    4873         7081
 2021-04  1.29   2671    3453         5888
 2021-05  1.04   2920    3051         5135
 2021-06  1.22   3107    3787         4941
 2021-07  1.25   3096    3865         4817
 2021-08  1.24   2960    3661         4536
 2021-09  1.28   3381    4336         4680
 2021-10  1.26   3720    4690         5106
 2021-11  0.94   4535    4242         8093
 2021-12  1.10   4516    4979         9136
 2022-01  1.22   3737    4575         5833
 2022-02  1.02   4388    4477         6698
 2022-03  1.29   4089    5265         6001
 2022-04  1.31   4216    5527         4848
 2022-05  1.40   3367    4726         4163
 2022-06  1.03   3508    3620         3998
 2022-07  1.24   3608    4483         4032
 2022-08  1.31   3652    4782         4158
 2022-09  1.12   3686    4138         4786
 2022-10  1.16   4155    4836         4999
 2022-11  1.12   4043    4518         4337
 2022-12  1.36   4844    6574         5710
   month ratio Pfizer Moderna Unvaccinated</pre>
<p>However when I used a seasonality-adjusted 2010-2019 linear
projection as the baseline, the oldest age groups had a relatively low
percentage of excess deaths in November to December 2021 compared to
ages 55-79:</p>
<pre>&gt; proj=fread(&quot;http://sars2.net/f/czdeadproj.csv&quot;)
&gt; proj[grepl(&quot;2021-1[12]&quot;,date),.(excess=round(100*(sum(dead)/sum(projdead)-1))),age][,setNames(excess,age)]
  0   5  10  15  20  25  30  35  40  45  50  55  60  65  70  75  80  85  90
 -6   6   8   2  25 -10   8  10  19  11  22  23  27  27  24  25  20  15  16</pre>
<p>And Moderna had a higher percentage of people in the oldest age
groups than Pfizer:</p>
<pre>&gt; t=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1]
&gt; type=factor(t$type,names(sort(tapply(t$alive,t$type,sum),T)))
&gt; age=pmin(t$age%/%10*10,90)
&gt; m=xtabs(t$alive~age+type)
&gt; round(t(m)/colSums(m)*100,1)
             age
type             0   10   20   30   40   50   60   70   80   90
              15.8 12.3 10.3 14.1 15.6 11.4 10.1  7.3  2.6  0.5
  Pfizer       0.3  7.2  9.9 13.5 19.5 16.4 15.4 12.1  4.9  0.8
  Moderna      0.0  2.1  8.4 11.5 16.4 14.9 16.0 21.8  7.6  1.4
  AstraZeneca  0.0  0.1  1.4  2.9  6.7  9.7 20.8 42.3 14.4  1.9
  Janssen      0.0  2.0 16.4 17.8 20.5 16.6 14.8  9.1  2.3  0.4
  Novavax      0.0  4.2 20.1 26.3 21.0 14.4  8.9  4.3  0.7  0.1
  Other        0.4  1.2 19.6 27.7 17.8  9.6 13.8  7.3  2.6  0.0</pre>
<h2>
<a href=#Monthly_excess_mortality_in_both_vaccinated_and_unvaccinated_people_relative_to_a_2010_2019_trend id=Monthly_excess_mortality_in_both_vaccinated_and_unvaccinated_people_relative_to_a_2010_2019_trend>Monthly
excess mortality in both vaccinated and unvaccinated people relative to
a 2010-2019 trend</a>
</h2>
<p>Here during the period from October 2020 to April 2021 which had high
excess mortality because of COVID, the excess mortality seems to have
fallen back down earlier in older age groups, so it first fell close to
zero in January in ages 90+, in April in ages 80-89, in May in ages
70-79, and in June in ages 60-69. It might be because older age groups
got vaccinated earlier than younger age groups:</p>
<div>
<img src=i/czech-allpop.png width=1100>
</div>
<p>This shows that the percentage of vaccinated person-days out of all
person-days first reached above 50% in March in ages 90+ and 80-89, in
April in ages 70-79, in May in ages 60-69, and in June in ages
50-59:</p>
<pre>&gt; b=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1]
&gt; b[,.(vaxpct=sum(alive[dose==1])/sum(alive)*100),.(month,age=pmin(age%/%10*10,90))][,round(xtabs(vaxpct~month+age))[12:24,]]
         age
month      0 10 20 30 40 50 60 70 80 90
  2020-12  0  0  0  0  0  0  0  0  0  0
  2021-01  0  0  1  1  1  2  1  1  6  8
  2021-02  0  0  2  2  3  3  2  2 27 32
  2021-03  0  0  3  4  6  7  6 22 58 51
  2021-04  0  0  5  6 10 13 18 56 71 60
  2021-05  0  1  8 11 24 41 59 75 77 65
  2021-06  0  4 21 33 52 61 72 80 81 68
  2021-07  0 15 40 45 59 65 75 82 82 69
  2021-08  0 27 49 50 63 68 78 84 83 70
  2021-09  0 31 52 52 64 70 79 85 84 71
  2021-10  0 33 54 54 65 71 79 85 84 71
  2021-11  0 37 60 58 69 74 81 86 85 72
  2021-12  0 41 65 62 71 76 82 88 86 74</pre>
<p>In the plot above I thought that maybe the reason why the excess
mortality fell close to 0% earlier in older age groups might have been
some kind of an artifact of the method I used to calculate the baseline,
because in the dataset for weekly deaths by age group I used to
calculate the baseline, ages 90 and above were aggregated together and
younger ages were split into 5-year age groups, so it might result in
the excess mortality of the oldest age groups in being understated if
the upper ends of the age groups were overrepresented in the
record-level data relative to the lower ends. And I also projected the
baseline for each age group into the future by doing a linear regression
of the mortality rate in 2010-2019, which might not be accurate for all
age groups.</p>
<p>So therefore I made the plot below where I used a different baseline,
where I first calculated the total mortality rates in the record-level
data for each single year of age in 2020-2022, except I aggregated
together ages 100 and above. And then in order to derive the expected
number of deaths for each cell of the heatmap, I multiplied a vector of
person-days for each age in the cell by a vector of the total mortality
rates for each age in 2020-2022. However it also gave me a similar
result, where during the period with high excess deaths that lasted for
late 2020 until early 2021, the excess deaths fell back down first in
ages 90+, next in ages 80-89, and later in the younger age groups:</p>
<div>
<img src=i/czech-allpop-2.png width=1100>
</div>
<pre>t=data.table::fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1]

# first plot
t=t[,.(dead=sum(dead),alive=sum(alive)),.(month,age=pmin(90,age%/%5*5))]
proj=fread(&quot;http://sars2.net/f/czdeadproj.csv&quot;)[,.(projdead=sum(projdead),pop=sum(pop)),.(month=substr(date,1,7),age)]
t=merge(t,proj[,.(month,age,rate=projdead/pop)])

# # second plot
# t=t[,.(dead=sum(dead),alive=sum(alive)),.(month,age=pmin(age,100))]
# t=merge(t,t[,.(rate=sum(dead)/sum(alive)),age])

t=t[,.(dead=sum(dead),alive=as.numeric(sum(alive)),base=sum(rate*alive)),.(month,age=pmin(90,age%/%10*10))]

t[,age:=`levels&lt;-`(factor(age),paste0(0:9*10,c(paste0(&quot;-&quot;,1:9*10-1),&quot;+&quot;)))]
t=rbind(t,t[,.(dead=sum(dead),alive=sum(alive),base=sum(base),month=&quot;Total&quot;),age])
t=rbind(t,t[,.(dead=sum(dead),alive=sum(alive),base=sum(base),age=&quot;Total&quot;),month])

m=tapply(with(t,(dead-base)/ifelse(dead&gt;base,base,dead)*100),t[,2:1],c)
disp=tapply((t$dead/t$base-1)*100,t[,2:1],round)
disp[is.nan(disp)]=-100
mpop=xtabs(alive~age+month,t)
exp=.8;m=abs(m)^exp*sign(m)
maxcolor=300^exp;m[is.infinite(m)]=-maxcolor;m[is.nan(m)]=-maxcolor

pheatmap::pheatmap(m,filename=&quot;0.png&quot;,display_numbers=disp,legend=F,cluster_rows=F,cluster_cols=F,
  gaps_row=nrow(m)-1,gaps_col=ncol(m)-1,
  cellwidth=18,cellheight=18,fontsize=9,fontsize_number=8,border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(!is.na(m)&amp;abs(m)&gt;.5*maxcolor,&quot;white&quot;,&quot;black&quot;),breaks=seq(-maxcolor,maxcolor,,256),
  colorRampPalette(hsv(rep(c(7/12,0),5:4),c(.9,.75,.6,.3,0,.3,.6,.75,.9),c(.4,.65,1,1,1,1,1,.65,.4)))(256))</pre>
<h2>
<a href=#Moderna_Pfizer_ratio_by_age_group_and_month_of_vaccination id=Moderna_Pfizer_ratio_by_age_group_and_month_of_vaccination>Moderna-Pfizer
ratio by age group and month of vaccination</a>
</h2>
<p>The README file in Kirsch's GitHub repository includes this
table:</p>
<div>
<img src=i/czech-mrr.png width=500>
</div>
<p>I thought the difference might partially be if people who got
vaccinated later had a higher Moderna-Pfizer ratio and younger people
got vaccinated later than older people, so I made the heatmap below. I
didn't calculate CMR for each age group like Kirsch, but I calculated
the ASMR for each single year of age within an age group and then I
added together the results to get the total ASMR for the ten-year age
groups (where the ASMR for a single age is the CMR of the age multiplied
by the fraction of the age in the standard population).</p>
<p>But anyway my heatmap below shows that the Moderna-Pfizer ratio was
actually the highest in ages 90+, even though it was fairly low in ages
70-79 and 80-89.</p>
<p>For some reason people who got vaccinated in April 2021 subsequently
had a low Moderna-Pfizer ratio of only about 1.1. But ages 70-79
received a large number of first doses in April 2021, which might
partially explain their low ratio.</p>
<p>The Moderna-Pfizer ratio seems to have gotten lower starting from
around October 2021. Among people who received the first vaccine dose in
October 2021, November 2021, or February 2022, Pfizer had higher total
ASMR than Moderna, so the Moderna-Pfizer ratio was below 1. So there
seem to be some confounding factors which cause the ratio to shift
dramatically over time:</p>
<div>
<img src=i/czech-mrr-2.png width=800>
</div>
<pre>library(data.table)

agecut=\(x,y)cut(x,c(y,Inf),paste0(y,c(paste0(&quot;-&quot;,y[-1]-1),&quot;+&quot;)),T,F)

std=fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,sum(pop),pmin(age,95)%/%5][,V1/sum(V1)]

t=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose==1]
t=t[,.(dead=sum(dead),alive=sum(as.double(alive))),.(type,vaxmonth,age=pmin(age,95)%/%5*5)]
t=t[,.(dead=sum(dead),alive=sum(alive)),.(type,age,age2=agecut(age,0:9*10),vaxmonth)]
t=rbind(t,t[,.(dead=sum(dead),alive=sum(alive),vaxmonth=&quot;Total&quot;),.(age,type,age2)])
t=rbind(t,t[,.(dead=sum(dead),alive=sum(alive),age2=&quot;Total&quot;),.(age,vaxmonth,type)])
t=t[,.(alive=sum(alive),asmr=sum(dead/alive*std[age/5+1])*365e5),.(type,age2,vaxmonth)]

a=tapply(t$asmr,t[,1:3],sum,na.rm=T)
m1=a[&quot;Moderna&quot;,,];m2=a[&quot;Pfizer&quot;,,]
m=(m1-m2)/ifelse(m1&gt;m2,m2,m1)

pop=t[type%in%c(&quot;Moderna&quot;,&quot;Pfizer&quot;),xtabs(alive~age2+vaxmonth)]/365
disp=matrix(sprintf(ifelse(m1/m2&gt;10,&quot;%.1f&quot;,&quot;%.2f&quot;),m1/m2),nrow(m))
hide=pmin(m1,m2)==0;m[hide]=NA;disp[is.na(m)]=&quot;&quot;
exp=.7;m=abs(m)^exp*sign(m);maxcolor=10^exp

pheatmap::pheatmap(m,filename=&quot;i1.png&quot;,display_numbers=disp,
  gaps_row=nrow(m)-1,gaps_col=ncol(m)-1,
  cluster_rows=F,cluster_cols=F,legend=F,cellwidth=19,cellheight=19,fontsize=9,fontsize_number=8,
  border_color=NA,na_col=&quot;gray90&quot;,
  number_color=ifelse((abs(m)&gt;.55*maxcolor)&amp;!is.na(m),&quot;white&quot;,&quot;black&quot;),
  breaks=seq(-maxcolor,maxcolor,,256),
  colorRampPalette(hsv(rep(c(7/12,0),5:4),c(.9,.75,.6,.3,0,.3,.6,.75,.9),c(.4,.65,1,1,1,1,1,.65,.4)))(256))

kimi=\(x){e=floor(log10(ifelse(x==0,1,abs(x))));e2=pmax(e,0)%/%3+1;p=!is.na(x)
  x[p]=paste0(sprintf(paste0(&quot;%.&quot;,ifelse(e[p]%%3==0,1,0),&quot;f&quot;),x[p]/1e3^(e2[p]-1)),c(&quot;&quot;,&quot;k&quot;,&quot;M&quot;,&quot;B&quot;,&quot;T&quot;)[e2[p]]);x}

exp2=.6;maxcolor2=max(pop[-nrow(pop),-ncol(pop)])

pheatmap::pheatmap(pop^exp2,filename=&quot;i2.png&quot;,display_numbers=kimi(ifelse(pop==0,0,pop)),
  gaps_row=nrow(m)-1,gaps_col=ncol(m)-1,
  cluster_rows=F,cluster_cols=F,legend=F,cellwidth=19,cellheight=19,fontsize=9,fontsize_number=8,
  border_color=NA,na_col=&quot;white&quot;,
  number_color=ifelse(pop^exp2&gt;maxcolor2^exp2*.45,&quot;white&quot;,&quot;black&quot;),
  breaks=seq(0,maxcolor2^exp2,,256),
  sapply(seq(1,0,,256),\(i)rgb(i,i,i)))

cap=&quot;Czech record-level data: Moderna ASMR divided by Pfizer ASMR, grouped by month of vaccination and age group. For example 1.5 means that people who received a Pfizer vaccine for their first dose had 1.5 times higher ASMR than people who received a Moderna vaccine for their first dose. The ASMR is calculated from the day of vaccination up to the end of 2022. The ratio is not displayed in cells where there are zero deaths for either Pfizer or Moderna vaccines. The standard population is the 2021 census population by single year of age.&quot;
system(paste0(&quot;w=`identify -format %w i1.png`;pad=44;convert -gravity northwest -pointsize 42 -font Arial \\( -splice x24 -size $[w-pad]x caption:&#39;&quot;,cap,&quot;&#39; -extent $[w-pad]x -gravity center \\) i1.png -gravity northwest \\( -size $[w-40]x caption:&#39;Person-years until end of 2022 for people who received a Pfizer or Moderna vaccine for their first dose.&#39; -extent $[w-pad]x -gravity center \\) i2.png -append 1.png&quot;))</pre>
<p>The total Moderna-Pfizer ratio was about 1.00 for people who got the
first dose in October 2021 or later:</p>
<pre>&gt; t=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose==1]
&gt; t=t[vaxmonth&gt;=&quot;2021-10&quot;,.(dead=sum(dead),alive=sum(as.double(alive))),.(type,age=pmin(age,95)%/%5*5)]
&gt; t=t[,.(dead=sum(dead),alive=sum(alive)),.(type,age,age2=age%/%10*10)]
&gt; t=rbind(t,t[,.(dead=sum(dead),alive=sum(alive),age2=&quot;Total&quot;),.(type,age)])
&gt; t=t[,.(alive=sum(alive),asmr=sum(dead/alive*std[age/5+1])*365e5),.(type,age2)]
&gt; t[,.(ratio=asmr[type==&quot;Moderna&quot;]/asmr[type==&quot;Pfizer&quot;]),.(age=age2)][order(age)]|&gt;print(r=F)
   age     ratio
     0 0.0000000
    10 2.4172339
    20 1.2744856
    30 1.0276323
    40 0.7548193
    50 0.8654081
    60 0.9301195
    70 1.0902050
    80 1.0001228
    90 0.9487740
 Total 1.0002985</pre>
<p>I also tried calculating a weighted average of ASMR for each vaccine
type by month of vaccination, where the weight was the number of vaccine
doses of any type that were given that month, but Moderna still got a
much higher ASMR than Pfizer:</p>
<pre>&gt; buck=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)
&gt; std=fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,sum(pop),pmin(age,95)%/%5][,V1/sum(V1)]
&gt; t=buck[vaxmonth&lt;=&quot;2022-08&quot;&amp;dose==1,.(dead=sum(dead),alive=sum(alive)),.(type,age=pmin(age,95)%/%5*5,vaxmonth)]
&gt; t=t[,.(alive=as.double(sum(alive)),asmr=sum(dead/alive*std[age/5+1]*365e5)),.(type,vaxmonth)]
&gt; t[,.(weightedasmr=weighted.mean(asmr,tapply(alive,vaxmonth,sum)[vaxmonth])),type][order(weightedasmr)]|&gt;print(r=F)
        type weightedasmr
       Other        0.000
     Novavax     1011.801
      Pfizer     1054.668
 AstraZeneca     1117.712
     Moderna     1299.177
     Janssen     1407.315</pre>
<p>(In the code above I only included vaccines given up to August 2022,
because after that many people started getting Pfizer's Omicron vaccines
which are listed under the <span class="quote">"Other"</span> type in my
buckets file.)</p>
<h2>
<a href=#Daily_deaths_and_vaccine_doses_by_age_group id=Daily_deaths_and_vaccine_doses_by_age_group>Daily
deaths and vaccine doses by age group</a>
</h2>
<p>Czech Republic had a period of high excess deaths that lasted from
roughly the fourth quarter of 2020 until the second quarter of 2021,
which had an unusual pattern where there were three distinct humps in
the deaths. In ages 40-59 and 60-79 the first hump was the lowest and
the third hump was the highest. But in ages 80+ the first jump was the
highest and the third hump was the lowest, which might be because ages
80+ got vaccinated the earliest so many people in ages 80+ had already
been vaccinated by the time of the third hump, and some people had even
been vaccinated by the time of the second hump:</p>
<div>
<img src=i/czech-facet.png width=600>
</div>
<p>The plot above shows that there was a spike in deaths around December
2021, which a lot of people will probably blame on deaths caused by the
first booster which was rolled out around the same time. In the plot
above the spike in December 2021 is difficult to see or nonexistent in
ages 0-19 and 20-39. However in the case of ages 40-59, 60-79, and 80+,
the peak in deaths occurs in December in each of the age groups, even
though the peak in new vaccine doses occurs earlier in older age groups
and later in younger age groups, so that vaccine doses peak in November
in ages 80+, in December in ages 60-79, and in January in ages
40-59.</p>
<p>In Denis Rancourt's paper about southern-hemisphere and equatorial
countries, he included the plots for Peru that are shown in the GIF file
below, and he argued that the spike of deaths in early 2021 was caused
by the vaccines because the spike roughly coincided with the rollout of
the first two doses in the oldest age groups.
[<a href=https://correlation-canada.org/covid-19-vaccine-associated-mortality-in-the-southern-hemisphere/>https://correlation-canada.org/covid-19-vaccine-associated-mortality-in-the-southern-hemisphere/</a>]
However a major weakness of his argument is that the spike in deaths
also occurred around the same time in younger age groups even though
younger age groups got vaccinated much later than older age groups:</p>
<div>
<img src=i/nopandemic-rancourt-peru-age-groups.gif width=600>
</div>
<p>From the next plot which shows ASMR instead of the raw number of
deaths, you can see that the third hump is higher than the first hump in
unvaccinated people in ages 80+. But in ages 80+ about half of people
had already been vaccinated by the time of the third hump, so the total
height of the third hump among both vaccinated and unvaccinated people
is relatively low. But in ages 40-59 less than 10% of people had been
vaccinated by the time of the third hump, so the height of the hump is
similar among all people and unvaccinated people:</p>
<div>
<img src=i/czech-facet-asmr.png width=560>
</div>
<p>The Czech Ministry of Health has published CSV files for COVID deaths
and hospitalizations by age:
<a href=https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19.><a
href="https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19"
class="uri">https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19</a>.</a>
Both COVID deaths and hospitalizations also have similar three-hump
pattern as all-cause deaths, and in ages 80+ the first hump is the
highest and the third hump is the lowest, but in ages 60-79 and 40-59
the third hump is higher than the first hump:</p>
<div>
<img src=i/czech-facet-hosp.png width=600>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>download.file(&quot;https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/nakazeni-hospitalizace-testy.csv&quot;,&quot;nakazeni-hospitalizace-testy.csv&quot;)
download.file(&quot;http://sars2.net/f/czbucketsdaily.csv.gz&quot;,&quot;czbucketsdaily.csv.gz&quot;)
download.file(&quot;https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/umrti.csv&quot;,&quot;umrti.csv&quot;)

library(data.table);library(ggplot2)

ma=\(x,b=1,f=b)setNames(rowMeans(embed(c(rep(NA,b),x,rep(NA,f)),f+b+1),na.rm=T),names(x))
ua=\(x,y,...){u=unique(x);y(u,...)[match(x,u)]}
age=\(x,y){x=as.numeric(x);y=as.numeric(y);(y-x-(y-789)%/%1461+(x-789)%/%1461)%/%365}

agecut=\(x,ages=seq(0,90,10))cut(pmax(x,0),c(ages,Inf),paste0(ages,c(paste0(&quot;-&quot;,ages[-1]-1),&quot;+&quot;)),T,F)
ages=c(0,40,60,80)
agelev=agecut(0:120,ages)

xstart=as.Date(&quot;2020-01-01&quot;);xend=as.Date(&quot;2023-1-1&quot;)

rec=fread(&quot;Czech/data/CR_records.csv&quot;,showProgress=F)
set.seed(0);rec$birth=ua(paste0(rec$Rok_narozeni,&quot;-1-1&quot;),as.Date)+sample(0:364,nrow(rec),T)
p=rec[!is.na(DatumUmrti),.(y=.N,z=&quot;dead&quot;),.(x=DatumUmrti,age=agelev[pmax(0,age(birth,DatumUmrti))+1])]
dt=rec[,.(x=as.IDate(unlist(.SD,,F)),birth),.SDcols=patterns(&quot;Datum_&quot;)][!is.na(x)]
p=rbind(p,dt[,.(y=.N,z=&quot;vax&quot;),.(x,age=agelev[pmax(0,age(birth,x))+1])])

agegroups=c(0,1,20,30,seq(40,95,5))
b=fread(&quot;http://sars2.net/f/czbucketsdaily.csv.gz&quot;)
b=b[,.(dead=sum(dead),alive=sum(alive)),.(age=agecut(age,agegroups),age2=agecut(age,ages),date,dose=pmin(dose,1)+1)]
b=rbind(b,cbind(expand.grid(lapply(b[,1:4],unique)),alive=0,dead=0))|&gt;unique(by=1:4)
b=rbind(b,b[,.(dead=sum(dead),alive=sum(alive),dose=0),.(age,age2,date)])
b=merge(fread(&quot;http://sars2.net/f/czcensus2021pop.csv&quot;)[,.(std=sum(pop)),.(age=agecut(age,agegroups))][,std:=std/sum(std)],b)
b=b[,.(pop=sum(alive),y=sum(dead/alive*std*365e5,na.rm=T)),.(x=date,z=paste0(&quot;asmr&quot;,dose),age=age2)]
p=rbind(p,b[,pop:=NULL])

b=fread(&quot;http://sars2.net/f/czbucketsdaily.csv.gz&quot;)
b=b[,.(pop=sum(as.double(alive))),.(age=agecut(age,ages),dose=pmin(dose,1),date)]
p=rbind(p,merge(b[dose==1],b[,.(total=sum(pop)),.(age,date)])[,.(y=pop/total,age,x=date,z=&quot;vaxpct&quot;)])

testy=fread(&quot;nakazeni-hospitalizace-testy.csv&quot;,na.strings=&quot;-&quot;)
testy=testy[,.(tests=sum(provedene_testy,na.rm=T),cases=sum(potvrzene_pripady,na.rm=T),hosp=sum(nove_hospitalizace,na.rm=T)),.(date=datum,age=agelev[as.numeric(sub(&quot;[-+].*&quot;,&quot;&quot;,vekova_kategorie))+1])][!is.na(age)]
p=rbind(p,testy[,.(x=date,age,y=hosp,z=&quot;hosp&quot;)])

p=rbind(p,fread(&quot;umrti.csv&quot;)[,.(y=.N,z=&quot;coviddead&quot;),.(x=datum,age=agecut(vek,ages))])

p=p[x%in%xstart:(xend-1)]
p=p[!is.na(age)]

xbreak=seq(xstart,xend,&quot;6 month&quot;);xlab=c(rbind(&quot;&quot;,2020:2022),&quot;&quot;)

var=read.csv(row.names=1,text=&quot;name,group,linetype
dead,All-cause deaths,1,solid
vax,Vaccines,2,solid
asmr0,Total ASMR,3,solid
asmr1,Unvaccinated ASMR,3,solid
asmr2,Vaccinated ASMR,3,solid
hosp,Hospitalizations,4,solid
pcr,PCR positivity,5,solid
coviddead,COVID deaths,6,solid
vaxpct,Vaccinated percent,7,42&quot;)
var$color=c(&quot;black&quot;,&quot;#cc00cc&quot;,&quot;black&quot;,hsv(7/12,1,.8),hsv(0,1,.8),hsv(0,.8,.8),hsv(1/3,1,.7),&quot;gray50&quot;,hsv(10/12,.8,.8))

p=unique(rbind(p,cbind(expand.grid(lapply(p[,-3],unique)),y=0)),by=c(&quot;x&quot;,&quot;age&quot;,&quot;z&quot;))[order(z,age,x)]

keep=c(&quot;dead&quot;,&quot;coviddead&quot;,&quot;hosp&quot;,&quot;vaxpct&quot;)

p=p[z%in%keep][,z:=factor(z,keep)]
color=var[keep,]$color
linetype=var[keep,]$linetype
p=p[order(x)]
p[,mav:=ztrim(ma(y,10)),.(age,z)]
p[,group:=var[levels(z)[z],]$group]
p=merge(p,p[,.(max=max(mav,na.rm=T)),.(group,age)])
p[z==&quot;vaxpct&quot;,max:=1]
levels(p$z)=var[levels(p$z),]$name

ggplot(p,aes(x))+
facet_wrap(~age,ncol=1,strip.position=&quot;top&quot;)+
geom_vline(xintercept=seq(xstart,xend,&quot;3 month&quot;),linewidth=.25,color=&quot;gray85&quot;)+
geom_vline(xintercept=seq(xstart,xend,&quot;year&quot;),linewidth=.25,lineend=&quot;square&quot;)+
geom_hline(yintercept=0:1,linewidth=.25,lineend=&quot;square&quot;)+
geom_line(aes(y=mav/max,color=z,linetype=z),linewidth=.35)+
geom_label(data=data.frame(age=levels(p$age)),aes(label=paste0(&quot;\n   &quot;,age,&quot;   \n&quot;)),x=xstart,y=1,lineheight=.5,hjust=0,vjust=1,size=2.3,fill=alpha(&quot;white&quot;,1),label.r=unit(0,&quot;lines&quot;),label.padding=unit(0,&quot;lines&quot;),label.size=.25)+
labs(x=NULL,y=NULL,title=&quot;Czech Republic: Daily moving averages by age group&quot;,subtitle=&quot;Displayed as percentage of maximum value, ±10-day moving averages&quot;|&gt;stringr::str_wrap(70))+
scale_x_date(limits=c(xstart,xend),breaks=xbreak,labels=xlab)+
scale_y_continuous(limits=0:1,breaks=seq(.2,.8,.2),labels=\(x)paste0(x*100,&quot;%&quot;),position=&quot;right&quot;)+
scale_color_manual(values=color)+
scale_linetype_manual(values=linetype)+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
guides(color=guide_legend(nrow=1,byrow=F))+
theme(axis.text=element_text(size=7,color=&quot;black&quot;),
  axis.ticks=element_line(color=&quot;black&quot;,linewidth=.25),
  axis.ticks.length.x=unit(0,&quot;pt&quot;),
  axis.ticks.length.y=unit(3,&quot;pt&quot;),
  legend.background=element_blank(),
  legend.box.spacing=unit(0,&quot;pt&quot;),
  legend.direction=&quot;horizontal&quot;,
  legend.justification=c(.5,.5),
  legend.key.height=unit(8,&quot;pt&quot;),
  legend.key.width=unit(15,&quot;pt&quot;),
  legend.key=element_blank(),
  legend.margin=margin(2),
  legend.position=&quot;bottom&quot;,
  legend.spacing.x=unit(1,&quot;pt&quot;),
  legend.text=element_text(size=7,vjust=.5),
  legend.title=element_blank(),
  panel.background=element_blank(),
  panel.grid=element_blank(),
  panel.spacing=unit(0,&quot;pt&quot;),
  plot.margin=margin(4,4,4,4),
  plot.subtitle=element_text(size=7,margin=margin(,,3)),
  plot.title=element_text(size=7.5,face=&quot;bold&quot;,margin=margin(1,,3)),
  strip.background=element_blank(),
  strip.text=element_blank())
ggsave(&quot;1.png&quot;,width=3.2,height=3.6,dpi=380*4)
system(&quot;magick 1.png -resize 25% PNG8:1.png&quot;)</pre>
</div>
<p>In Sweden people who lived in care homes had a very low number of
COVID deaths around March 2021 which corresponds to the third hump in
the Czech Republic:
[<a href=https://x.com/dobssi/status/1863790895662878745>https://x.com/dobssi/status/1863790895662878745</a>]</p>
<div>
<img src=i/czech-swedencarehome.png width=600>
</div>
<p>This plot also shows that care homes had a low number of cases around
week 14 of 2021 when there was a peak in cases among the whole Swedish
population:
[<a href=https://x.com/dobssi/status/1863866821163508132>https://x.com/dobssi/status/1863866821163508132</a>]</p>
<div>
<img src=i/czech-swedencarehome-2.jpg width=800>
</div>
<h2>
<a href=#Paper_about_two_subsets_of_Czech_record_level_data_from_insurance_companies id=Paper_about_two_subsets_of_Czech_record_level_data_from_insurance_companies>Paper
about two subsets of Czech record-level data from insurance
companies</a>
</h2>
<p>The CSV file for the record-level data was committed to GitHub by
Tadeáš Fryčák, but he was also one of the authors of a paper published
in May 2024 titled <span class="quote">"Does the healthy vaccinee bias
rule them all? Association of COVID-19 vaccination status and all-cause
mortality from an analysis of data from 2.2 million individual health
records"</span>:
<a href=https://www.sciencedirect.com/science/article/pii/S1201971224000468.><a
href="https://www.sciencedirect.com/science/article/pii/S1201971224000468"
class="uri">https://www.sciencedirect.com/science/article/pii/S1201971224000468</a>.</a>
The authors of the paper described two sets of record-level data which
only included about 2 million people in total, and not over 11 million
people like the new dataset:</p>
<blockquote>
<p>Using a Freedom of Information request, we obtained data from two
health insurance houses (in the Czech Republic, health insurance is
compulsory and multiple health insurance houses provide the service).
Each line in the dataset corresponded to a unique individual and
included their sex, age, dates and types of all COVID vaccines, and (if
applicable), the date of death. When trying to find out whether there is
a difference between the baseline frailty of the groups, ACM is the most
telling parameter as it is not burdened with any possible
misclassification on the cause of death. For this reason, only ACM will
be considered in this study.</p>
<p>Each cooperating insurance company decided to blur the data slightly
to exclude the possibility of identification of any individual. The
first dataset provided by the Czech Business Insurance Company (CPZP)
comprises 1,362,924 individuals, i.e., approx. 13% of the Czech
population. It is by no means a fully representative sample of the Czech
population because the clients of CPZP tend to be younger than average.
However, the size of the cohort allows interesting analyses. The time
data were blurred to week and year. The other dataset provided by the
Professional Insurance Company (OZP) comprises 827,475 individuals,
representing another 8% of the Czech population, the time data were
blurred to month and year of events. The OZP dataset will serve for
validation of the results obtained from the larger CPZP dataset. In all,
we have complete data on mortality and vaccination of more than 2
million individuals over the entire period of 2021 and 2022. Both the
datasets are available at
<a href=https://github.com/PalackyUniversity/hve.><a
href="https://github.com/PalackyUniversity/hve"
class="uri">https://github.com/PalackyUniversity/hve</a>.</a></p>
</blockquote>
<p>The authors observed the phenomenon where the mortality rate of
people with 2 doses shot up when the third dose was rolled out, but they
attributed it to the healthy vaccinee effect. Martin Neil and Norman
Fenton have hypothesized that the same phenomenon might be explained by
a classification delay which they call the <span class="quote">"cheap
trick"</span>, where deaths that occured within a certain number of
weeks after the third dose would've been classified under the second
dose. But because the authors of the Czech paper had access to the
record-level data which showed the dates of vaccination and death of
individual people, the authors could know for sure that the cheap trick
was not being used in the data. They included the following comments
about the plot shown below:</p>
<blockquote>
<div>
<img src=i/czech-insurance-1.jpg width=700>
</div>
<p>[...]</p>
<p>Now, let us focus on the red panels, covering the <span
class="quote">"high-COVID"</span> period of October 2021-May 2022. In
that period, the Czech Republic recorded almost 10,000 COVID-related
deaths, which translates into an average of 40 deaths with/from COVID-19
per day. The vaccine effectiveness in preventing COVID-related deaths
should lead to an increase in the ratio of unvaccinated:vaccinated ACM.
However, the exact opposite happened. In all age groups, the ACM in the
cohort with completed primary course (yellow bars) more than doubled
compared to the low-COVID period, while the ACM of the unvaccinated
cohort rose only by a third. A sanity check with the same analysis
performed for the other dataset (OZP insurance company) yielded
consistent results (see Supplement S6). This paradoxical observation can
be caused by the fact that in the high-COVID period, vaccination by the
third dose was underway, which, again, led to a subselection of the
healthier group for booster dose vaccination, while infirm individuals
concentrated in the group <span class="quote">"primary course for more
than 2 months."</span></p>
</blockquote>
<h2>
<a href=#Table_for_percentage_of_different_vaccine_types_given_each_month id=Table_for_percentage_of_different_vaccine_types_given_each_month>Table
for percentage of different vaccine types given each month</a>
</h2>
<p>More than two thirds of all vaccines had the type <span
class="quote">"Comirnaty"</span> (Pfizer) each month until September
2022, when many people started getting Pfizer's Omicron vaccines (<span
class="quote">"Comirnaty Original/Omicron BA.1"</span> and <span
class="quote">"Comirnaty Original/Omicron BA.4/BA.5"</span>). In the
table below only vaccines with the type <span
class="quote">"Comirnaty"</span> are included under Pfizer.</p>
<p>Most Janssen vaccines were given between August 2021 and November
2021. Most AstraZeneca vaccines were given between February 2021 and
July 2021, and there were almost no AstraZeneca vaccines given after
November 2021.</p>
<pre>&gt; ua=\(x,y,...){u=unique(x);y(u,...)[match(x,u)]}
&gt; rec=fread(&quot;CR_records.csv&quot;)
&gt; date=rec[,`class&lt;-`(unlist(.SD,,F),&quot;Date&quot;),.SDcols=paste0(&quot;Datum_&quot;,1:7)]|&gt;ua(substr,1,7)
&gt; type=rec[,unlist(.SD,,F),.SDcols=paste0(&quot;OckovaciLatka_&quot;,1:7)]
&gt; name1=c(&quot;Comirnaty&quot;,&quot;SPIKEVAX&quot;,&quot;VAXZEVRIA&quot;,&quot;COVID-19 Vaccine Janssen&quot;,&quot;&quot;)
&gt; name2=c(&quot;Pfizer&quot;,&quot;Moderna&quot;,&quot;AstraZeneca&quot;,&quot;Janssen&quot;,&quot;&quot;)
&gt; type=ifelse(type%in%name1,name2[match(type,name1)],&quot;Other&quot;)
&gt; m=data.table(date,type)[type!=&quot;&quot;,.N,.(date,type)][,xtabs(N~date+type)]
&gt; round(m/rowSums(m)*100,1)
         type
date      AstraZeneca Janssen Moderna Other Pfizer
  2020-12         0.0     0.0     0.0   0.0  100.0
  2021-01         0.0     0.0     2.8   0.0   97.2
  2021-02         6.7     0.0     8.0   0.0   85.3
  2021-03        19.2     0.0    12.2   0.0   68.5
  2021-04        10.5     0.4    11.3   0.0   77.8
  2021-05         7.3     1.6     7.8   0.0   83.4
  2021-06         7.0     1.8     7.4   0.0   83.8
  2021-07         5.2     2.4     6.8   0.0   85.5
  2021-08         2.2     5.4     3.5   0.0   88.9
  2021-09         0.5    10.4     7.0   0.0   82.1
  2021-10         0.2    10.1     7.1   0.0   82.6
  2021-11         0.0     8.6    10.3   0.0   81.1
  2021-12         0.0     0.8    12.9   0.0   86.3
  2022-01         0.0     0.3    12.9   0.0   86.8
  2022-02         0.0     0.3    10.9   0.0   88.8
  2022-03         0.0     0.4    11.3   3.3   85.0
  2022-04         0.0     0.4     9.5   4.2   86.0
  2022-05         0.0     0.5     9.0   2.3   88.2
  2022-06         0.0     0.5     8.5   2.0   88.9
  2022-07         0.0     0.3     8.3   0.8   90.6
  2022-08         0.0     0.2     8.9   0.5   90.5
  2022-09         0.0     0.1     4.3  46.8   48.7
  2022-10         0.0     0.0     0.7  85.9   13.3
  2022-11         0.0     0.1     0.5  88.6   10.8
  2022-12         0.0     0.2     0.4  87.6   11.9
  2023-01         0.0     1.0     1.4  84.6   13.1
  2023-02         0.0     1.6     1.7  79.5   17.2
  2023-03         0.0     2.2     1.0  75.5   21.4
  2023-04         0.0     4.6     1.3  73.9   20.3
  2023-05         0.0     2.5     0.7  72.5   24.2
  2023-06         0.0     1.5     0.8  69.5   28.2
  2023-07         0.0     1.7     1.1  86.9   10.3
  2023-08         0.0     1.1     0.0  85.6   13.3
  2023-09         0.0     0.0     0.1  93.0    7.0
  2023-10         0.0     0.0     0.1  94.7    5.3
  2023-11         0.0     0.0     0.1  95.6    4.3
  2023-12         0.0     0.0     0.0  96.5    3.5
  2024-01         0.0     0.0     0.0  97.5    2.5
  2024-02         0.0     0.0     0.0  96.6    3.4
  2024-03         0.0     0.0     0.0  98.9    1.1</pre>
<h2>
<a href=#Kirschs_calculation_for_increase_in_all_cause_mortality id=Kirschs_calculation_for_increase_in_all_cause_mortality>Kirsch's
calculation for increase in all-cause mortality</a>
</h2>
<p>Kirsch included this comment in the file
<code>Full analysis - All vaccines.xlsx</code>:</p>
<blockquote>
<pre>&gt;&gt;&gt; def dp(r, mrr):
...     return (r-1)/(r-mrr)
...
&gt;&gt;&gt; dp(3, 1.5)
1.3333333333333333
&gt;</pre>
<p>I think that's probably the most conservative estimate: that Moderna
has an excess mortality ratio (EMR, which is R in the function above) of
3, and an absolute MRR of 1.5 per the Czech data.</p>
<p>This would mean that Pfizer has an MR vs a saline shot of 1.33, or a
33% increase in all cause mortality.</p>
<p>So if MRP = 1.3, then MRm=1.3*1.5=1.95</p>
<p>And if half the public got Pfizer and half got Moderna, we have an
excess ACM of 62%.</p>
<p>If Moderna is 1/4 of the doses given and has a 3X EMR, then Moderna
death numbers = Pfizer death numbers.</p>
<p>But only 75% of people are vaccinated so that there would be an
overall 46% increase in ACM in the group affected the most.</p>
<p>This corresponds of what the insurance data says.</p>
</blockquote>
<p>In the code below I calculated a linear trend in mortality rate in
2013-2019 for each single year of age, I projected the trend to
2021-2022, and I multiplied the projected mortality rates by the
population estimates for each age in 2021 and 2022 to get the expected
number of deaths. But it gave me a total excess mortality of only about
17% in 2021-2022, which is less than half of Kirsch's 46% increase:</p>
<pre>&gt; t=fread(&quot;http://sars2.net/f/czpopdead.csv&quot;)
&gt; t$base=t$pop*c(t(sapply(split(t,t$age),\(x)predict(lm(dead/pop~year,x[year%in%2013:2019]),x))))
&gt; t=t[year%in%2021:2022,.(dead=sum(dead),base=sum(base)),.(year,age=pmin(80,age%/%20*20))]
&gt; t=rbind(t,t[,.(dead=sum(dead),base=sum(base),age=&quot;Total&quot;),year])
&gt; t=rbind(t,t[,.(dead=sum(dead),base=sum(base),year=&quot;Total&quot;),age])
&gt; xtabs(round((dead/base-1)*100)~year+age,t)
       age
year      0  20  40  60  80 Total
  2021  -11  17  30  30  20    25
  2022   -9  13  10   6  11     8
  Total -10  15  20  18  16    17</pre>
<p>Kirsch said that 75% of people were vaccinated, but I don't know if
his figure is supposed to have included all ages or if it didn't include
children in the ages that generally didn't get vaccinated. Because if
you include all ages, then the total percentage of vaccinated people in
the record-level data is only about 64-65% in 2022 (which is similar to
OWID's figure of about 66% vaccinated people in 2022):</p>
<pre>&gt; t=fread(&quot;http://sars2.net/f/czbucketskeep.csv.gz&quot;)[dose&lt;=1&amp;month&gt;=&quot;2020-12&quot;]
&gt; t=t[,.(alive=sum(as.double(alive)),dead=sum(dead)),.(dose,month,age=factor(pmin(100,age%/%10*10)))]
&gt; t=rbind(t,t[,.(alive=sum(alive),dead=sum(dead),month=&quot;Total&quot;),.(age,dose)])
&gt; t=rbind(t,t[,.(alive=sum(alive),dead=sum(dead),age=&quot;Total&quot;),.(month,dose)])
&gt; t[,.(vaxpct=sum(alive[dose==1])/sum(alive)*100),.(month,age)][,round(xtabs(vaxpct~month+age))]
         age
month      0 10 20 30 40 50 60 70 80 90 100 Total
  2020-12  0  0  0  0  0  0  0  0  0  0   0     0
  2021-01  0  0  1  1  1  2  1  1  6  8   7     1
  2021-02  0  0  2  2  3  3  2  2 27 32  19     3
  2021-03  0  0  3  4  6  7  6 22 58 51  28     8
  2021-04  0  0  5  6 10 13 18 56 71 60  32    15
  2021-05  0  1  8 11 24 41 59 75 77 65  34    29
  2021-06  0  4 21 33 52 61 72 80 81 68  35    43
  2021-07  0 15 40 45 59 65 75 82 82 69  35    50
  2021-08  0 27 49 50 63 68 78 84 83 70  35    55
  2021-09  0 31 52 52 64 70 79 85 84 71  35    56
  2021-10  0 33 54 54 65 71 79 85 84 72  35    57
  2021-11  0 37 60 58 69 74 81 86 85 73  35    60
  2021-12  0 41 65 62 71 76 82 88 86 75  36    63
  2022-01  2 44 67 64 72 76 83 88 87 76  36    64
  2022-02  3 45 68 64 72 77 83 88 87 76  37    65
  2022-03  3 45 68 64 72 77 83 88 88 76  37    65
  2022-04  3 44 68 64 72 77 83 88 88 77  37    65
  2022-05  3 44 69 64 72 77 83 88 88 77  37    65
  2022-06  2 43 69 64 72 77 83 88 88 77  37    65
  2022-07  2 43 69 64 72 77 83 88 88 77  37    64
  2022-08  2 43 69 64 72 77 83 88 88 78  37    64
  2022-09  2 42 69 64 72 77 83 88 88 78  37    64
  2022-10  2 42 69 64 72 77 83 88 88 78  36    64
  2022-11  2 41 69 64 72 77 83 88 88 78  36    64
  2022-12  2 41 69 64 72 77 83 88 88 78  36    64
  Total    1 28 47 46 54 59 65 73 75 66  33    49</pre>
<script>
document.querySelectorAll('pre').forEach(e=>e.innerHTML=e.innerHTML.replace(/((^| )# [^\n]*|^#$)/mg,"<span class=comment>$1</span>"))

const walker=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,false)
const nodes=[]
while(walker.nextNode())nodes.push(walker.currentNode)
nodes.forEach(node=>{
  const text=node.textContent
  if(text.split(/\s+/).some(piece=>piece.length>=20)||/\w{60}/.test(text)){
    const frag=document.createDocumentFragment()
    text.split(/([A-Za-z0-9]{60}|[\041-\057\072-\100\133-\140\173-\176])/g).forEach(part=>{
      if(part){
        frag.appendChild(document.createTextNode(part))
        if(/^[A-Za-z0-9]{60}$/.test(part)||/^[\041-\057\072-\100\133-\140\173-\176]$/.test(part))
          frag.appendChild(document.createElement('wbr'))
      }
    })
    node.parentNode.replaceChild(frag,node)
  }
})

document.querySelectorAll('.spoiler button').forEach(x=>{x.addEventListener('click',function(){
  let block=this.nextElementSibling
  if(window.getComputedStyle(block).display=='none'){block.style.display='block';this.textContent='Hide code'}
  else{block.style.display='none';this.textContent='Show code'}
})})
</script>
