<!doctype html>
<meta charset=utf-8>
<meta name=viewport content=width=device-width,initial-scale=1.0>
<style>
body{background:#2f2f2f;color:white}
body,td,th{font:14.5px/1.33 Arial,Helvetica,'Liberation Sans',sans-serif}
p{max-width:530px;margin:1em auto}
dl,pre{margin:1em auto;width:fit-content;max-width:min(100%, 1100px)}
hr{border:none;border-top: 2px solid #bbb;margin:1em auto;max-width:1100px}
ul,ol{width:min(100%, 530px);margin:1em auto;box-sizing:border-box}
ul ul,ul ol,ol ol,ol ul{margin-top:0;margin-bottom:0}
div:has(img){width:fit-content;margin:0 auto}
h1,h2,h3,h2 a,h3 a,h2 a:visited,h3 a:visited{color:white;font-weight:normal}
h1{font-size:2.1em;margin-top:.7em;text-align:center}
h2{font-size:1.7em;text-align:center}
h3{font-size:1.3em;text-align:center}
blockquote h2,blockquote h3{margin:.5em 0}
blockquote ul,blockquote ol{margin:.4em 0}
a,a .quote{color:hsl(220,100%,75%)}
a:visited,a .quote{color:hsl(270,100%,75%)}
pre,code{white-space:pre-wrap;word-wrap:break-word;font:13.7px Menlo,'DejaVu Sans Mono','Liberation Mono',Consolas,monospace;background:#4a4a4a;color:white}
pre{padding:4px}
code{padding:1px}
table{border-collapse:collapse;margin:0 auto}
td,th{border:1px solid #555;padding:1px 3px}
th{background:#444;text-align:left;font-weight:bold}
img{max-width:100%;margin:0;display:block}
dt{font-size:1.3em;margin:.4em 0}
body>blockquote{margin:1em auto;width:500px}
blockquote{width:calc(100% - 40px);padding-left:40px;box-sizing:border-box}
blockquote>:first-child{margin-top:0}
blockquote>:last-child{margin-bottom:0}
blockquote,.quote,blockquote,blockquote{color:hsl(50,100%,85%)}
blockquote .quote,blockquote blockquote,.quote .quote{color:hsl(45,55%,65%)}
blockquote blockquote blockquote,blockquote blockquote .quote,blockquote .quote .quote,.quote .quote .quote{color:hsl(40,40%,50%)}
blockquote h3{color:inherit}
.spoiler{max-width:1100px;margin:0 auto;text-align:center}
.spoiler button{width:90px;border:0;font-family:inherit;font-size:inherit;color:inherit;background:#4a4a4a;padding:4px 0px;outline:none;cursor:pointer;margin:0 0 -.3em 0}
.spoiler pre{display:none;margin-top:0;text-align:left}
.red,.red .quote{color:hsl(0,100%,77%)!important}
.comment{color:hsl(0,100%,80%)!important}
.toc{width:calc(50% + 265px);margin:1em 0 1em max(0px, 50% - 265px)}
.toc ul{width:min(100%, 50% + 265px - 40px);margin:0}
@media print{
  body{background:white;color:black;margin:0px;zoom:1;print-color-adjust:exact;-webkit-print-color-adjust:exact}
  a{color:#0000EE}a:visited{color:#551A8B}
  h1,h2,h2 a,h3 a,h2 a:visited,h3 a:visited{color:black}
  pre,code{background:#ccc;color:black;font-size:13px}
  th{background:#ddd}
  blockquote,.quote{color:hsl(30,65%,30%)}
  blockquote .quote,blockquote blockquote,.quote .quote{color:hsl(30,45%,50%)}
  blockquote blockquote blockquote,blockquote .quote .quote,.quote .quote .quote{color:hsl(30,70%,60%)}
  .spoiler{display:none}
  .red,.red .quote{color:hsl(0,50%,60%)!important}
}
</style>
<title>Comments to Ethical Skeptic (part 4)</title>
<h1>Comments to Ethical Skeptic (part 4) - <a href=index.html>sars2.net</a></h1>
<p>Other parts: <a href=ethical.html>ethical.html</a>,
<a href=ethical2.html>ethical2.html</a>,
<a href=ethical3.html>ethical3.html</a> (deaths in ages 0-4).</p>
<h2 id=Contents><a href=#Contents>Contents</a></h2>
<ul class=toc>
<li><a href="#Cancer_diagnoses_in_England_per_population_aged_65_and_above">Cancer diagnoses in England per population aged 65 and above</a></li>
</ul>


<h2>
<a href=#Cancer_diagnoses_in_England_per_population_aged_65_and_above id=Cancer_diagnoses_in_England_per_population_aged_65_and_above>Cancer
diagnoses in England per population aged 65 and above</a>
</h2>
<p>Ethical Skeptic posted this plot of cancer incidence in England:
[<a href=https://x.com/EthicalSkeptic/status/1966911244859842912>https://x.com/EthicalSkeptic/status/1966911244859842912</a>]</p>
<div>
<img src=i/ethical-englandincidence-1.png width=800>
</div>
<p>The plot by ES has a massive drop in incidence between 2018 and 2019,
but in the plot below the age-standardized cancer incidence remained
roughly flat between 2018 and 2019:
[<a href=https://researchbriefings.files.parliament.uk/documents/SN06887/SN06887.pdf>https://researchbriefings.files.parliament.uk/documents/SN06887/SN06887.pdf</a>]</p>
<div>
<img src=i/ethical-englandincidence-2.png width=500>
</div>
<p>I used WebPlotDigitizer to digitize the data in Ethical Skeptic's
plot. The points in his plot have irregular horizontal spacing, so I had
to click on each point manually to extract the data correctly:
[<a href=https://automeris.io/wpd/>https://automeris.io/wpd/</a>]</p>
<div>
<img src=i/ethical-englandincidence-11.png width=700>
</div>
<p>I took yearly population estimates from the Statista page titled
<span class="quote">"Population of England from 1971 to 2023"</span>,
where I used 2023 estimates for 2024 and 2025:
<a href=https://www.statista.com/statistics/975956/population-of-england/.><a
href="https://www.statista.com/statistics/975956/population-of-england/"
class="uri">https://www.statista.com/statistics/975956/population-of-england/</a>.</a>
However I'm not sure if ES calculated the population size for 2024 by
doing something like a linear projection of data for 2022 and 2023. I
multiplied the population estimates by the proportion of people aged 65
and above in England from here, where I used the 2024 percentage for
2025:
<a href=https://www.ons.gov.uk/explore-local-statistics/indicators/percentage-of-the-population-aged-65-plus>https://www.ons.gov.uk/explore-local-statistics/indicators/percentage-of-the-population-aged-65-plus</a>
(<span class="quote">"Line chart &gt; Change areas &gt; Other areas &gt;
All countries &gt; England &gt; Download line chart data
(CSV)"</span>).</p>
<p>I tried to replicate Ethical Skeptic's methodology, so I used his
convoluted method of calculating the number of people aged 65 and above.
But the results it gave me were close to identical to the yearly
population estimate of ages 65+ returned by Nomis, apart from the years
2023 and 2024:
[<a href=https://www.nomisweb.co.uk/datasets/pestsyoala>https://www.nomisweb.co.uk/datasets/pestsyoala</a>]</p>
<div>
<img src=i/ethical-englandincidence-5.png width=550>
</div>
<p>I then calculated the yellow line in the next plot by multiplying the
rates in Ethical Skeptic's plot by the yearly number of people aged 65
and above, and I divided the result by 100,000.</p>
<p>I downloaded the rapid cancer registration data from here:
<a href=https://nhsd-ndrs.shinyapps.io/rcrd/.><a
href="https://nhsd-ndrs.shinyapps.io/rcrd/"
class="uri">https://nhsd-ndrs.shinyapps.io/rcrd/</a>.</a> I used the
version of the data adjusted for the number of working days per month,
because the unadjusted version gave me a much poorer fit to Ethical
Skeptic's plot, so he probably used the adjusted data. Then I took a
backwards moving average of the data where the window extended up to 5
months backwards, but for example the window extended only 1 month
backwards in February 2018.</p>
<p>I was able to replicate Ethical Skeptic's data closely in 2018. But
he seems to have manually altered the data so that he shifted it
downwards in 2019 to 2022, and he shifted it upwards in 2024 and 2025.
There's a particularly large downwards shift in 2019, so that the yearly
average number of cases drops by about 13% between 2018 and 2019, even
though in the real data it increases by about 1%:</p>
<div>
<img src=i/ethical-englandincidence-12.png width=570>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>ma=\(x,b=1,f=b){x[]=rowMeans(embed(c(rep(NA,b),x,rep(NA,f)),f+b+1),na.rm=T);x}

rapid=CJ(year=2018:2025,month=1:12)[!(year==2025&amp;month&gt;5)]
diagnoses=c(24265,23485,24346,25994,27661,26373,25833,25212,24953,24540,24564,25231,25169,24844,24873,26294,26401,25994,25037,25043,24770,25236,24966,25444,25128,25621,24809,16910,17246,18362,19806,21826,23169,23614,24274,24592,23870,23534,24370,26499,27741,25785,25686,25425,25493,25801,25927,25658,25752,26316,25826,27370,28176,27371,26549,26517,26984,26615,27285,26179,26944,26909,26700,28151,29276,27220,26845,26652,26579,26473,28109,27843,27733,27699,28826,28654,29560,28914,28213,27783,27948,27807,27565,28289,27863,28261,27960,28428,27754) # adjusted for number of working days
p1=rapid[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=diagnoses)]
p1[,y:=ma(y,5,0)]
p1$z=&quot;Real data (6-month backward moving average)&quot;

es=CJ(year=2018:2025,month=1:12)[1:87]
es$rate=c(239.6,235.7,237.5,242.7,248.6,250.4,253.2,255.5,256.8,254.2,249.6,247.5,239.3,230.8,222.3,218.2,212.1,206.9,206.1,206.4,206.4,204.6,203.1,202.3,206.1,210.5,215.1,206.4,198.9,191.5,184.5,178.6,176.3,185.1,196.1,204.9,212.1,214.6,216.2,220.8,226.2,227.0,230.3,233.1,234.4,233.7,231.3,230.6,230.6,232.1,232.6,236.0,238.5,241.1,242.4,242.4,244.5,243.4,242.1,240.3,242.1,243.9,244.5,248.1,252.4,255.3,254.5,255.0,254.2,251.7,250.1,250.9,253.5,255.5,260.7,266.1,269.4,272.7,273.5,273.5,271.7,269.1,267.3,266.8,268.4,270.9,272.2)

# nomispop=c(10082761,10243221,10332210,10469044,10630852,10787479,10981092) # exact population estimate of ages 65+
espop=c(55924500,56230100,56326000,56554900,57112500,57690300,57690300,57690300) # from Statista
espop=espop*c(.1803,.1822,.1834,.1851,.186,.1862,.1873,.1873) # proportion aged 65 and above from ONS website

p3=es[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=rate*espop[factor(year)]/1e5)]
p3$z=&quot;Ethical Skeptic&#39;s rate converted to number of diagnoses&quot;

p=rbind(p1,p3)[,z:=factor(z,unique(z))]

xstart=as.Date(&quot;2018-1-1&quot;);xend=as.Date(&quot;2025-7-1&quot;);xbreak=seq(xstart+182,as.Date(&quot;2025-1-1&quot;),&quot;year&quot;)
ybreak=pretty(c(0,p$y));ystart=0;yend=max(p$y*1.03)

yearly=p[,.(y=mean(y)),.(year=year(x),z)][year%in%c(2018,2019,2021,2024)]
yearly[,x:=as.Date(paste0(year,&quot;-1-1&quot;))]

color=c(hsv(22/36,1,.6),&quot;#aaaa00&quot;)

anno1=&quot;ES altered his data to get a 13% decrease between 2018 and 2019, even though the real data has a 1% increase&quot;
anno2=&quot;ES altered his data to get a 22% increase between 2021 and 2024, even though the real data only has a 12% increase&quot;
anno=data.table(x=c(xstart+50,xend-50),y=14000,label=c(str_wrap(anno1,25),str_wrap(anno2,34)))

ggplot(p)+
geom_vline(xintercept=seq(xstart,xend,&quot;year&quot;),color=&quot;gray90&quot;,linewidth=.4)+
annotate(&quot;rect&quot;,xmin=xstart,xmax=xend,ymin=ystart,ymax=yend,linewidth=.4,lineend=&quot;square&quot;,linejoin=&quot;mitre&quot;,fill=NA,color=&quot;gray75&quot;)+
geom_line(aes(x,y,color=z),linewidth=.6)+
geom_segment(data=yearly,aes(x,y,xend=x+365,yend=y,color=z),linewidth=.6,linetype=&quot;42&quot;)+
geom_segment(data=yearly[z!=z[1]],aes(x+182+c(100,-100),14500,xend=x+182,yend=y-500),color=color[2],linewidth=.6,arrow=arrow(type=&quot;closed&quot;,length=unit(4,&quot;pt&quot;)),lineend=&quot;butt&quot;,linejoin=&quot;mitre&quot;)+
geom_text(data=anno,aes(x,y,label=label),hjust=c(0,1),vjust=1,size=3.87,color=color[2],lineheight=.8)+
labs(x=NULL,y=NULL,title=&quot;Monthly cancer diagnoses in England rapid registration data&quot;)+
scale_x_continuous(limits=c(xstart,xend),breaks=xbreak,labels=year(xbreak))+
scale_y_continuous(limits=c(ystart,yend),breaks=ybreak,labels=\(x)ifelse(x&gt;=1e3,paste0(x/1e3,&quot;k&quot;),x))+
scale_color_manual(values=color)+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
guides(color=guide_legend(ncol=1,byrow=F))+
theme(axis.text=element_text(size=11,color=&quot;gray40&quot;),
  axis.text.y=element_text(margin=margin(,1.5)),
  axis.ticks=element_line(linewidth=.4,color=&quot;gray75&quot;),
  axis.ticks.length=unit(0,&quot;pt&quot;),
  axis.ticks.length.y=unit(4,&quot;pt&quot;),
  legend.background=element_blank(),
  legend.box.spacing=unit(0,&quot;pt&quot;),
  legend.direction=&quot;vertical&quot;,
  legend.key=element_blank(),
  legend.key.height=unit(12,&quot;pt&quot;),
  legend.key.width=unit(24,&quot;pt&quot;),
  legend.margin=margin(-2,,4),
  legend.position=&quot;top&quot;,
  legend.spacing.x=unit(2,&quot;pt&quot;),
  legend.spacing.y=unit(0,&quot;pt&quot;),
  legend.text=element_text(size=11),
  legend.title=element_blank(),
  panel.background=element_blank(),
  plot.title=element_text(size=11,hjust=.5,face=2,margin=margin(,,4)))
ggsave(&quot;1.png&quot;,width=5.1,height=3,dpi=300*4)</pre>
</div>
<p>I'm fairly sure that ES manually falsified the data. He has not
documented his methodology precisely enough that other people could
reproduce his work exactly, which also makes it difficult for other
people to bust him falsifying the data. But the 13% drop between 2018
and 2019 seems completely unrealistic, and it's inconsistent with the
real data, but it is consistent with Ethical Skeptic's history of
falsifying data. I have previously busted him outright falsifying data
in his SV40 cancer wave plot, plot for cancer deaths in ages 0-54, plot
for MCD to UCD cancer ratio, and vaccinial plot.</p>
<p>Some points in his plot have irregular horizontal spacing, which
might be if Ethical Skeptic somehow manually moved the points around in
a GUI, so that he ended up not only moving the points vertically but
also horizontally:</p>
<div>
<img src=i/ethical-englandincidence-10.png width=350>
</div>
<p>The next plot shows that I found anomalous features next to two pairs
of months that had irregular horizontal spacing. It's also weird how
there's several segments of months in 2019 and 2020 that look almost
like straight lines, where there's often sudden discontinuities in slope
before or after the lines. In the real data there are only two clear
discontinuities in the slope, which are between March and April of 2020
because the incidence dropped dramatically in April, and between
September and October 2020 because April 2020 fell out of the window of
the moving average:</p>
<div>
<img src=i/ethical-englandincidence-13.png width=700>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>ma=\(x,b=1,f=b){x[]=rowMeans(embed(c(rep(NA,b),x,rep(NA,f)),f+b+1),na.rm=T);x}

rapid=CJ(year=2018:2025,month=1:12)[!(year==2025&amp;month&gt;5)]
rapid$diagnoses=c(24265,23485,24346,25994,27661,26373,25833,25212,24953,24540,24564,25231,25169,24844,24873,26294,26401,25994,25037,25043,24770,25236,24966,25444,25128,25621,24809,16910,17246,18362,19806,21826,23169,23614,24274,24592,23870,23534,24370,26499,27741,25785,25686,25425,25493,25801,25927,25658,25752,26316,25826,27370,28176,27371,26549,26517,26984,26615,27285,26179,26944,26909,26700,28151,29276,27220,26845,26652,26579,26473,28109,27843,27733,27699,28826,28654,29560,28914,28213,27783,27948,27807,27565,28289,27863,28261,27960,28428,27754) # adjusted for number of working days

espop=c(55924500,56230100,56326000,56554900,57112500,57690300,57690300,57690300) # from Statista
espop=espop*c(.1803,.1822,.1834,.1851,.186,.1862,.1873,.1873) # proportion aged 65 and above from ONS website

rapid[,x:=as.Date(paste(year,month,1,sep=&quot;-&quot;))]
p=rapid[,.(x,y=ma(diagnoses/espop[year-2017]*1e5,5,0))]

xstart=as.Date(&quot;2018-1-1&quot;);xend=as.Date(&quot;2025-7-1&quot;);xbreak=seq(xstart,xend-10,&quot;6 month&quot;)
xlab=ifelse(month(xbreak)==1,paste0(year(xbreak),&quot;\nJan&quot;),&quot;&quot;)
ybreak=pretty(c(0,p$y));ystart=0;yend=max(p$y*1.03)

ystart=120;yend=300;ybreak=0:15*20

ggplot(p)+
geom_point(aes(x,y),size=1.4,stroke=0,color=hsv(5/6,1,.4))+
geom_line(aes(x,y),linewidth=.6,color=hsv(5/6,1,.4))+
labs(x=NULL,y=NULL)+
scale_x_continuous(limits=c(xstart,xend),breaks=xbreak,labels=xlab)+
scale_y_continuous(limits=c(ystart,yend),breaks=ybreak)+
guides(color=guide_legend(ncol=3,byrow=F))+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
theme(axis.text=element_text(size=9,color=&quot;black&quot;,lineheight=.8),
  axis.ticks=element_line(color=&quot;black&quot;,linewidth=.3),
  axis.ticks.length=unit(3,&quot;pt&quot;),
  axis.ticks.x=element_line(color=alpha(&quot;black&quot;,1:0)),
  legend.background=element_blank(),
  legend.box.spacing=unit(0,&quot;pt&quot;),
  legend.key=element_blank(),
  legend.key.height=unit(12,&quot;pt&quot;),
  legend.key.width=unit(23,&quot;pt&quot;),
  legend.margin=margin(-2,,14),
  legend.position=&quot;top&quot;,
  legend.spacing.x=unit(2,&quot;pt&quot;),
  legend.spacing.y=unit(0,&quot;pt&quot;),
  legend.text=element_text(size=10,vjust=.5),
  legend.title=element_blank(),
  panel.background=element_blank(),
  panel.grid=element_blank(),
  plot.background=element_rect(fill=&quot;transparent&quot;,color=NA),
  plot.title=element_text(size=11,hjust=.5))
ggsave(&quot;1.png&quot;,width=6,height=3,dpi=300*4)</pre>
</div>
<p>In the next plot I didn't take a moving average of the monthly data,
so it shows more clearly how there was a sudden drop in the number of
diagnoses between March and April of 2020. From the light blue line
where I adjusted the number of new diagnoses for the population size of
ages 65 and above, you can see that the increase between 2021 and 2024
is now less steep than in the dark blue line (even though this is of
course not the proper way to do age adjustment):</p>
<div>
<img src=i/ethical-englandincidence-8.png width=570>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>pop=CJ(year=2018:2024)
pop$o65=c(10082761,10243221,10332210,10469044,10630852,10787479,10981092)

rapid=CJ(year=2018:2025,month=1:12)[!(year==2025&amp;month&gt;5)]
rapid$cases=c(24265,23485,24346,25994,27661,26373,25833,25212,24953,24540,24564,25231,25169,24844,24873,26294,26401,25994,25037,25043,24770,25236,24966,25444,25128,25621,24809,16910,17246,18362,19806,21826,23169,23614,24274,24592,23870,23534,24370,26499,27741,25785,25686,25425,25493,25801,25927,25658,25752,26316,25826,27370,28176,27371,26549,26517,26984,26615,27285,26179,26944,26909,26700,28151,29276,27220,26845,26652,26579,26473,28109,27843,27733,27699,28826,28654,29560,28914,28213,27783,27948,27807,27565,28289,27863,28261,27960,28428,27754) # adjusted for number of working days
p1=rapid[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=cases)]
p1$z=&quot;Rapid registration dashboard&quot;

pop=CJ(year=2018:2024)
pop$o65=c(10082761,10243221,10332210,10469044,10630852,10787479,10981092)
p2=copy(p1)
p2[,y:=y/pop$o65[match(pmin(2024,year(x)),pop$year)]*pop[year==2020,o65]]
p2$z=&quot;Rapid registration dashboard (adjusted for 65+ population)&quot;

es=CJ(year=2018:2025,month=1:12)[1:87]
es$rate=c(239.6,235.7,237.5,242.7,248.6,250.4,253.2,255.5,256.8,254.2,249.6,247.5,239.3,230.8,222.3,218.2,212.1,206.9,206.1,206.4,206.4,204.6,203.1,202.3,206.1,210.5,215.1,206.4,198.9,191.5,184.5,178.6,176.3,185.1,196.1,204.9,212.1,214.6,216.2,220.8,226.2,227.0,230.3,233.1,234.4,233.7,231.3,230.6,230.6,232.1,232.6,236.0,238.5,241.1,242.4,242.4,244.5,243.4,242.1,240.3,242.1,243.9,244.5,248.1,252.4,255.3,254.5,255.0,254.2,251.7,250.1,250.9,253.5,255.5,260.7,266.1,269.4,272.7,273.5,273.5,271.7,269.1,267.3,266.8,268.4,270.9,272.2)
espop=c(55924500,56230100,56326000,56554900,57112500,57690300,57690300,57690300) # from Statista
espop=espop*c(.1803,.1822,.1834,.1851,.186,.1862,.1873,.1873) # proportion aged 65 and above from ONS website
p3=es[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=rate*espop[factor(year)]/1e5)]
p3$z=&quot;Ethical Skeptic&#39;s rate converted to number of diagnoses&quot;

p=rbind(p1,p2,p3)[,z:=factor(z,unique(z))]
color=c(hsv(22/36,c(1,.6),c(.6,1)),&quot;#aaaa00&quot;)

xstart=as.Date(&quot;2018-1-1&quot;);xend=as.Date(&quot;2025-7-1&quot;);xbreak=seq(xstart+182,as.Date(&quot;2025-1-1&quot;),&quot;year&quot;)
ybreak=pretty(c(0,p$y));ystart=0;yend=max(p$y*1.03)

yearly=p[,.(y=mean(y)),.(year=year(x),z)][year%in%c(2018,2019,2021,2024)]
yearly[,x:=as.Date(paste0(year,&quot;-1-1&quot;))]

anno=str_wrap(&quot;The light blue line was divided by the population size of ages 65+ during the current year and multiplied with the population size of ages 65+ in 2020.&quot;,36)

ggplot(p)+
geom_vline(xintercept=seq(xstart,xend,&quot;year&quot;),color=&quot;gray90&quot;,linewidth=.4)+
annotate(&quot;rect&quot;,xmin=xstart,xmax=xend,ymin=ystart,ymax=yend,linewidth=.4,lineend=&quot;square&quot;,linejoin=&quot;mitre&quot;,fill=NA,color=&quot;gray75&quot;)+
geom_line(aes(x,y,color=z),linewidth=.6)+
annotate(&quot;text&quot;,x=xstart+400,y=yend*.5,label=anno,hjust=0,vjust=1,lineheight=.8,size=3.87,color=color[2])+
geom_segment(data=yearly,aes(x,y,xend=x+365,yend=y,color=z),linewidth=.6,linetype=&quot;42&quot;)+
labs(x=NULL,y=NULL,title=&quot;Monthly cancer diagnoses in England rapid registration data&quot;)+
scale_x_continuous(limits=c(xstart,xend),breaks=xbreak,labels=year(xbreak))+
scale_y_continuous(limits=c(ystart,yend),breaks=ybreak,labels=\(x)ifelse(x&gt;=1e3,paste0(x/1e3,&quot;k&quot;),x))+
scale_color_manual(values=color)+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
guides(color=guide_legend(ncol=1,byrow=F))+
theme(axis.text=element_text(size=11,color=&quot;gray40&quot;),
  axis.text.y=element_text(margin=margin(,1.5)),
  axis.ticks=element_line(linewidth=.4,color=&quot;gray75&quot;),
  axis.ticks.length=unit(0,&quot;pt&quot;),
  axis.ticks.length.y=unit(4,&quot;pt&quot;),
  legend.background=element_blank(),
  legend.box.spacing=unit(0,&quot;pt&quot;),
  legend.direction=&quot;vertical&quot;,
  legend.key=element_blank(),
  legend.key.height=unit(12,&quot;pt&quot;),
  legend.key.width=unit(24,&quot;pt&quot;),
  legend.margin=margin(-2,,4),
  legend.position=&quot;top&quot;,
  legend.spacing.x=unit(2,&quot;pt&quot;),
  legend.spacing.y=unit(0,&quot;pt&quot;),
  legend.text=element_text(size=11),
  legend.title=element_blank(),
  panel.background=element_blank(),
  plot.title=element_text(size=11,hjust=.5,face=2,margin=margin(,,4)))
ggsave(&quot;1.png&quot;,width=5.1,height=3,dpi=300*4)</pre>
</div>
<p>In the next plot I calculated age-standardize incidence rates by
downloading age-stratified from here under <span
class="quote">"Demographic factors &gt; Downloads &gt; Download time
trend data for all cancer groups and demographic factors"</span>:
<a href=https://nhsd-ndrs.shinyapps.io/rcrd/.><a
href="https://nhsd-ndrs.shinyapps.io/rcrd/"
class="uri">https://nhsd-ndrs.shinyapps.io/rcrd/</a>.</a> I took yearly
population estimates by age from Nomis.
[<a href=https://www.nomisweb.co.uk/datasets/pestsyoala>https://www.nomisweb.co.uk/datasets/pestsyoala</a>]
The age-standardized incidence increased by about 6% between 2021 and
2024, but it's partially because the number of diagnoses was lower than
usual in early 2021, and there was only a 3% increase between 2022 and
2024:</p>
<div>
<img src=i/ethical-englandincidence-9.png width=570>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>t=r(&quot;Incidence_Treatment_statistics_England.csv.gz&quot;)
t=t[`Cancer group`==&quot;All sites combined&quot;]
t=t[Metric==&quot;New cancer diagnoses (working day adjusted)&quot;]
t=t[Breakdown==&quot;Age-group&quot;]
t[,age:=as.integer(sub(&quot;\\D.*&quot;,&quot;&quot;,Demographic))]
t=t[,.(year=Year,month=match(Month,month.name),diagnoses=Statistic,age)]

pop=fread(&quot;https://sars2.net/f/englandpop.csv&quot;)
ages=c(0,5:8*10)
pop=pop[,.(pop=sum(pop)),.(year,age=ages[findInterval(age,ages)])]
pop=rbind(pop,pop[year==2024][,year:=2025])
t=merge(t,pop)
t=merge(pop[year==2020,.(age,std=pop/sum(pop))],t)

p=t[,.(y=sum(diagnoses/pop*std*1e5)),.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)))]

xstart=as.Date(&quot;2018-1-1&quot;);xend=as.Date(&quot;2025-7-1&quot;);xbreak=seq(xstart+182,as.Date(&quot;2025-1-1&quot;),&quot;year&quot;)
ybreak=pretty(c(0,p$y));ystart=0;yend=max(p$y*1.03)

ggplot(p)+
geom_vline(xintercept=seq(xstart,xend,&quot;year&quot;),color=&quot;gray90&quot;,linewidth=.4)+
annotate(&quot;rect&quot;,xmin=xstart,xmax=xend,ymin=ystart,ymax=yend,linewidth=.4,lineend=&quot;square&quot;,linejoin=&quot;mitre&quot;,fill=NA,color=&quot;gray75&quot;)+
geom_point(aes(x,y),size=1.3,stroke=0)+
geom_line(aes(x,y),linewidth=.6)+
labs(x=NULL,y=NULL,title=&quot;Age-adjusted rate of monthly new cancer diagnoses per\n100,000 people in England rapid registration data&quot;)+
scale_x_continuous(limits=c(xstart,xend),breaks=xbreak,labels=year(xbreak))+
scale_y_continuous(limits=c(ystart,yend),breaks=ybreak)+
scale_color_manual(values=c(hsv(0,.7,1),&quot;black&quot;))+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
guides(color=guide_legend(ncol=1,byrow=F))+
theme(axis.text=element_text(size=11,color=&quot;gray40&quot;),
  axis.text.y=element_text(margin=margin(,1)),
  axis.ticks=element_line(linewidth=.4,color=&quot;gray75&quot;),
  axis.ticks.length=unit(0,&quot;pt&quot;),
  axis.ticks.length.y=unit(4,&quot;pt&quot;),
  panel.background=element_blank(),
  plot.subtitle=element_text(hjust=.5,margin=margin(,,4)),
  plot.title=element_text(size=11,hjust=.5,face=2,margin=margin(,,4)))
ggsave(&quot;1.png&quot;,width=5.2,height=3,dpi=300*4)</pre>
</div>
<p>The next plot also shows how the difference between the pre-2020 and
post-2020 slopes is greatly exaggerated by Ethical Skeptic's fake
data:</p>
<div>
<img src=i/ethical-englandincidence-6.png width=570>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>ma=\(x,b=1,f=b){x[]=rowMeans(embed(c(rep(NA,b),x,rep(NA,f)),f+b+1),na.rm=T);x}

rapid=CJ(year=2018:2025,month=1:12)[!(year==2025&amp;month&gt;5)]
rapid$cases=c(24265,23485,24346,25994,27661,26373,25833,25212,24953,24540,24564,25231,25169,24844,24873,26294,26401,25994,25037,25043,24770,25236,24966,25444,25128,25621,24809,16910,17246,18362,19806,21826,23169,23614,24274,24592,23870,23534,24370,26499,27741,25785,25686,25425,25493,25801,25927,25658,25752,26316,25826,27370,28176,27371,26549,26517,26984,26615,27285,26179,26944,26909,26700,28151,29276,27220,26845,26652,26579,26473,28109,27843,27733,27699,28826,28654,29560,28914,28213,27783,27948,27807,27565,28289,27863,28261,27960,28428,27754)
p1=rapid[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=ma(cases,5,0))]
p1$z=&quot;Real data (adjusted for working days, 6-month moving average)&quot;

es=CJ(year=2018:2025,month=1:12)[1:87]
es$rate=c(239.6,235.7,237.5,242.7,248.6,250.4,253.2,255.5,256.8,254.2,249.6,247.5,239.3,230.8,222.3,218.2,212.1,206.9,206.1,206.4,206.4,204.6,203.1,202.3,206.1,210.5,215.1,206.4,198.9,191.5,184.5,178.6,176.3,185.1,196.1,204.9,212.1,214.6,216.2,220.8,226.2,227.0,230.3,233.1,234.4,233.7,231.3,230.6,230.6,232.1,232.6,236.0,238.5,241.1,242.4,242.4,244.5,243.4,242.1,240.3,242.1,243.9,244.5,248.1,252.4,255.3,254.5,255.0,254.2,251.7,250.1,250.9,253.5,255.5,260.7,266.1,269.4,272.7,273.5,273.5,271.7,269.1,267.3,266.8,268.4,270.9,272.2)
espop=c(55924500,56230100,56326000,56554900,57112500,57690300,57690300,57690300) # from Statista
espop=espop*c(.1803,.1822,.1834,.1851,.186,.1862,.1873,.1873) # proportion aged 65 and above from ONS website
p2=es[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=rate*espop[factor(year)]/1e5)]
p2$z=&quot;Ethical Skeptic&#39;s fake data converted to number of diagnoses&quot;

p=rbind(p1,p2)[,z:=factor(z,unique(z))]

lm=rbind(cbind(p,type=2)[,fit:=year(x)%in%2018:2019],cbind(p,type=3)[,fit:=year(x)%in%2022:2024])
lm=lm[,.(x,y=predict(lm(y~x,.SD[fit==T]),.SD),fit),.(z,type)]
p=rbind(p[,fit:=T][,type:=1],lm)

p[,type:=factor(type,,c(&quot;Actual&quot;,&quot;2018-2019 trend&quot;,&quot;2022-2024 trend&quot;))]

xstart=as.Date(&quot;2018-1-1&quot;);xend=as.Date(&quot;2025-7-1&quot;);xbreak=seq(xstart+182,as.Date(&quot;2025-1-1&quot;),&quot;year&quot;)
ybreak=pretty(c(0,p$y));ystart=0;yend=max(ybreak)

ggplot(p)+
facet_wrap(~z,ncol=1,dir=&quot;v&quot;,scales=&quot;free_x&quot;)+
geom_vline(xintercept=seq(xstart,xend,&quot;year&quot;),color=&quot;gray90&quot;,linewidth=.4)+
annotate(&quot;rect&quot;,xmin=xstart,xmax=xend,ymin=ystart,ymax=yend,linewidth=.4,lineend=&quot;square&quot;,linejoin=&quot;mitre&quot;,fill=NA,color=&quot;gray75&quot;)+
geom_line(aes(x,y,color=type),linewidth=.6,linetype=&quot;11&quot;)+
geom_line(data=p[fit==T],aes(x,y,color=type),linewidth=.6)+
labs(x=NULL,y=NULL,title=&quot;Monthly cancer diagnoses in England rapid registration data&quot;)+
scale_x_continuous(limits=c(xstart,xend),breaks=xbreak,labels=year(xbreak))+
scale_y_continuous(limits=c(ystart,yend),breaks=ybreak,labels=\(x)ifelse(x&gt;=1e3,paste0(x/1e3,&quot;k&quot;),x))+
scale_color_manual(values=c(&quot;black&quot;,hsv(1/3,1,.7),hsv(0,.7,1)))+
scale_alpha_manual(values=c(1,.4,.4))+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
guides(alpha=&quot;none&quot;)+
theme(axis.text=element_text(size=11,color=&quot;gray40&quot;),
  axis.text.y=element_text(margin=margin(,1.5)),
  axis.ticks=element_line(linewidth=.4,color=&quot;gray75&quot;),
  axis.ticks.length=unit(0,&quot;pt&quot;),
  axis.ticks.length.y=unit(4,&quot;pt&quot;),
  legend.background=element_blank(),
  legend.box.spacing=unit(0,&quot;pt&quot;),
  legend.key=element_blank(),
  legend.key.height=unit(12,&quot;pt&quot;),
  legend.key.width=unit(24,&quot;pt&quot;),
  legend.margin=margin(-2,,4),
  legend.position=&quot;top&quot;,
  legend.spacing.x=unit(2,&quot;pt&quot;),
  legend.spacing.y=unit(0,&quot;pt&quot;),
  legend.text=element_text(size=11),
  legend.title=element_blank(),
  panel.background=element_blank(),
  panel.spacing.y=unit(3,&quot;pt&quot;),
  plot.title=element_text(size=11,hjust=.5,face=2,margin=margin(,,4)),
  strip.background=element_rect(fill=&quot;gray90&quot;,color=&quot;gray75&quot;,linewidth=.4),
  strip.text=element_text(size=11,margin=margin(3,,3)))
ggsave(&quot;1.png&quot;,width=5,height=4,dpi=300*4)</pre>
</div>
<p>Yearly cancer incidence data is available from the NHS publication
<span class="quote">"Cancer Registration Statistics, England,
2022"</span>:
<a href=https://digital.nhs.uk/data-and-information/publications/statistical/cancer-registration-statistics/england-2022#resources>https://digital.nhs.uk/data-and-information/publications/statistical/cancer-registration-statistics/england-2022#resources</a>
(file <span class="quote">"Cancer Registration Statistics, updated to
use 2021 census population estimates"</span>).</p>
<p>Without any kind of adjustment for population size or age, the yearly
number of diagnoses increased by only about 3% between 2019 and 2022. In
Ethical Skeptic's plot the rate of new cases per population aged 65 and
above increased by about 10% between 2019 and 2022, even though the
adjustment for population size should make the percentage smaller and
not bigger:</p>
<pre>t=fread(&quot;https://sars2.net/f/Table_1_machine_readable_updated_June2025.csv.gz&quot;)
t=t[stage_at_diagnosis==&quot;All stages&quot;&amp;imd_quintile==&quot;All quintiles&quot;&amp;gender==&quot;Persons&quot;]
t=t[hormone_receptor%in%c(&quot;&quot;,&quot;All&quot;)&amp;hormone_receptor_status%in%c(&quot;&quot;,&quot;All&quot;)] # `All` is for breast cancer, empty is other cancers
t=t[ndrs_detailed_group%like%&quot;^All|ALL&quot;]
print(t[,.(diagnoses=sum(count)),.(year=diagnosisyear)],r=F)
# year diagnoses
# 2013    491633
# 2014    506390
# 2015    521302
# 2016    532723
# 2017    536826
# 2018    554847
# 2019    565363
# 2020    486232
# 2021    551173
# 2022    582160 # about 3% higher than 2019</pre>
<p>Here I overlaid the yearly data from the NHS report over the rapid
registration data, where you can see that the rapid registration data is
missing almost half of all new diagnoses:</p>
<div>
<img src=i/ethical-englandincidence-4.png width=570>
</div>
<div class="spoiler">
<button>
Show code
</button>
<pre>ma=\(x,b=1,f=b){x[]=rowMeans(embed(c(rep(NA,b),x,rep(NA,f)),f+b+1),na.rm=T);x}

y=fread(&quot;https://sars2.net/f/Table_1_machine_readable_updated_June2025.csv.gz&quot;)
y=y[stage_at_diagnosis==&quot;All stages&quot;&amp;imd_quintile==&quot;All quintiles&quot;&amp;gender==&quot;Persons&quot;]
y=y[hormone_receptor%in%c(&quot;&quot;,&quot;All&quot;)&amp;hormone_receptor_status%in%c(&quot;&quot;,&quot;All&quot;)] # `All` is for breast cancer, empty is for other cancers
y=y[ndrs_detailed_group%like%&quot;^All|ALL&quot;]
p1=y[,.(y=sum(count)),.(x=diagnosisyear)][,.(x=as.Date(paste0(x,&quot;-7-1&quot;)),y=y/(365+(x%%4==0)))]
p1$z=&quot;Cancer Registration Statistics, England, 2022&quot;

rapid=CJ(year=2018:2025,month=1:12)[!(year==2025&amp;month&gt;5)]
rapid$cases=c(24265,23485,24346,25994,27661,26373,25833,25212,24953,24540,24564,25231,25169,24844,24873,26294,26401,25994,25037,25043,24770,25236,24966,25444,25128,25621,24809,16910,17246,18362,19806,21826,23169,23614,24274,24592,23870,23534,24370,26499,27741,25785,25686,25425,25493,25801,25927,25658,25752,26316,25826,27370,28176,27371,26549,26517,26984,26615,27285,26179,26944,26909,26700,28151,29276,27220,26845,26652,26579,26473,28109,27843,27733,27699,28826,28654,29560,28914,28213,27783,27948,27807,27565,28289,27863,28261,27960,28428,27754) # adjusted for number of working days
p2=rapid[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=cases)][,y:=y/days_in_month(x)]
p2$z=&quot;Rapid registration dashboard&quot;

p3=copy(p2)
p3[,y:=y/pop$o65[match(pmin(2024,year(x)),pop$year)]*pop[year==2020,o65]]
p3$z=&quot;Rapid registration dashboard (adjusted for 65+ population)&quot;

es=CJ(year=2018:2025,month=1:12)[1:87]
es$rate=c(239.6,235.7,237.5,242.7,248.6,250.4,253.2,255.5,256.8,254.2,249.6,247.5,239.3,230.8,222.3,218.2,212.1,206.9,206.1,206.4,206.4,204.6,203.1,202.3,206.1,210.5,215.1,206.4,198.9,191.5,184.5,178.6,176.3,185.1,196.1,204.9,212.1,214.6,216.2,220.8,226.2,227.0,230.3,233.1,234.4,233.7,231.3,230.6,230.6,232.1,232.6,236.0,238.5,241.1,242.4,242.4,244.5,243.4,242.1,240.3,242.1,243.9,244.5,248.1,252.4,255.3,254.5,255.0,254.2,251.7,250.1,250.9,253.5,255.5,260.7,266.1,269.4,272.7,273.5,273.5,271.7,269.1,267.3,266.8,268.4,270.9,272.2)
espop=c(55924500,56230100,56326000,56554900,57112500,57690300,57690300,57690300) # from Statista
espop=espop*c(.1803,.1822,.1834,.1851,.186,.1862,.1873,.1873) # proportion aged 65 and above from ONS website
p4=es[,.(x=as.Date(paste(year,month,16,sep=&quot;-&quot;)),y=rate*espop[factor(year)]/1e5)]
p4[,y:=y/ma(days_in_month(x),5,0)]
p4$z=&quot;Ethical Skeptic&#39;s rate converted to number of diagnoses&quot;

p=rbind(p1,p2,p3,p4)[,z:=factor(z,unique(z))]

xstart=as.Date(&quot;2013-1-1&quot;);xend=as.Date(&quot;2025-7-1&quot;);xbreak=seq(xstart+182,as.Date(&quot;2025-1-1&quot;),&quot;year&quot;)
ybreak=pretty(c(0,p$y),7);ystart=0;yend=max(ybreak)

ggplot(p)+
geom_vline(xintercept=seq(xstart,xend,&quot;year&quot;),color=&quot;gray90&quot;,linewidth=.4)+
annotate(&quot;rect&quot;,xmin=xstart,xmax=xend,ymin=ystart,ymax=yend,linewidth=.4,lineend=&quot;square&quot;,linejoin=&quot;mitre&quot;,fill=NA,color=&quot;gray75&quot;)+
geom_point(aes(x,y,color=z,alpha=z),size=1.4,stroke=0)+
geom_line(aes(x,y,color=z),linewidth=.6)+
labs(x=NULL,y=NULL,title=&quot;New cancer diagnoses in England (divided by number of\ndays in year or month)&quot;)+
scale_x_continuous(limits=c(xstart,xend),breaks=xbreak,labels=year(xbreak))+
scale_y_continuous(limits=c(ystart,yend),breaks=ybreak)+
scale_color_manual(values=c(hsv(1/3,1,.6),hsv(22/36,c(1,.6),c(.6,1)),&quot;#aaaa00&quot;))+
scale_alpha_manual(values=c(1,0,0,0))+
coord_cartesian(clip=&quot;off&quot;,expand=F)+
guides(color=guide_legend(ncol=1,byrow=F))+
theme(axis.text=element_text(size=11,color=&quot;gray40&quot;),
  axis.text.y=element_text(margin=margin(,1.5)),
  axis.ticks=element_line(linewidth=.4,color=&quot;gray75&quot;),
  axis.ticks.length=unit(0,&quot;pt&quot;),
  axis.ticks.length.y=unit(4,&quot;pt&quot;),
  legend.background=element_blank(),
  legend.box.spacing=unit(0,&quot;pt&quot;),
  legend.direction=&quot;vertical&quot;,
  legend.key=element_blank(),
  legend.key.height=unit(12,&quot;pt&quot;),
  legend.key.width=unit(24,&quot;pt&quot;),
  legend.margin=margin(-2,,4),
  legend.position=&quot;top&quot;,
  legend.spacing.x=unit(2,&quot;pt&quot;),
  legend.spacing.y=unit(0,&quot;pt&quot;),
  legend.text=element_text(size=11),
  legend.title=element_blank(),
  panel.background=element_blank(),
  plot.subtitle=element_text(size=11,hjust=.5,margin=margin(,,4)),
  plot.title=element_text(size=11,hjust=.5,face=2,margin=margin(,,4)))
ggsave(&quot;1.png&quot;,width=5.3,height=3.6,dpi=300*4)</pre>
</div>
<p>The website of the NHS says: <span class="quote">"The Rapid Cancer
Registration Data contains proxy tumour registrations and some
associated events on the cancer patient pathway (e.g.Â surgery,
radiotherapy and systemic anti-cancer therapy data) from January 2018 to
the most recently available data on cancer diagnoses. RCRD provides a
quicker, indicative source of cancer data compared to the National
Cancer Registration Data (NCRD), which is the <span
class="quote">'gold-standard'</span> registration data set and which
relies on additional data sources, enhanced follow-up with trusts and
expert processing by cancer registration officers. Due to the lower
quality of RCRD, the data will not match the eventual National
Statistics published on the full NCRD."</span>
[<a href=https://digital.nhs.uk/ndrs/data/data-sets/rcrd>https://digital.nhs.uk/ndrs/data/data-sets/rcrd</a>]</p>
<p>A document titled <span class="quote">"Rapid Cancer Registration
Dataset - Data Quality - August 2025"</span> says:
[<a href=https://digital.nhs.uk/ndrs/data/data-sets/rcrd>https://digital.nhs.uk/ndrs/data/data-sets/rcrd</a>]</p>
<blockquote>
<p>This document outlines the main features of the data to be aware of
when interpreting the Rapid Cancer Registration Dataset:</p>
<ul>
<li>across all cancer types included approximately 12.1% of cases are
missing and 6.0% of cases are included erroneously or with incorrect
cancer type or diagnosis date (when compared to <span
class="quote">'Gold Standard'</span> registration data for 2018
data)</li>
<li>these figures vary strongly with cancer site. Broadly, more common
cancers (particularly breast and prostate cancer) perform best and less
common cancers (particularly bone and soft tissue and cancers of unknown
primary) perform worst</li>
<li>non-melanoma skin cancer (ICD-10 C44) tumours are excluded from the
majority of data shown (Figure 3 onwards). Carcinoma of the cervix
in-situ (ICD-10 D06) is excluded from all data presented</li>
<li>there are more missing tumours in those aged over 70 compared to
younger age groups</li>
<li>other factors that reduce data completeness include the patient's
route to diagnosis, mortality within 30 days of diagnosis, and the
presence of multiple cancers</li>
<li>usable data is available approximately 4 to 5 months after diagnosis
or other clinical activity occurs</li>
<li>data on cancer stage group at diagnosis is available for a number of
common tumour types, although completeness is lower than that for the
Gold Standard registration data. Where data is available it generally
agrees with the Gold Standard stage group in 80 to 90% of tumours</li>
</ul>
</blockquote>
<p>A presentation about the rapid registration dataset said that the
dataset <span class="quote">"Covers all malignant cancers (excl. NMSC)
and selected non-malignant cancers: Breast, Bladder &amp; Brain (ICD-10
C00-C97 excl. C44, plus D05, D09, D32, D33, D35, D41, D42-D44)"</span>.
[<a href=https://www.ndrs.nhs.uk/wp-content/uploads/2020/10/NDRS-Webinar-Rapid-Registrations-Cancer-Dataset-21.10.2020.pdf>https://www.ndrs.nhs.uk/wp-content/uploads/2020/10/NDRS-Webinar-Rapid-Registrations-Cancer-Dataset-21.10.2020.pdf</a>]</p>
<script>
document.querySelectorAll('pre').forEach(e=>e.innerHTML=e.innerHTML.replace(/((^| )# [^\n]*|^#$)/mg,"<span class=comment>$1</span>"))

const walker=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,false)
const nodes=[]
while(walker.nextNode())nodes.push(walker.currentNode)
nodes.forEach(node=>{
  const text=node.textContent
  if(text.split(/\s+/).some(piece=>piece.length>=20)||/\w{60}/.test(text)){
    const frag=document.createDocumentFragment()
    text.split(/(\w{60}|[\041-\057\072-\100\133-\140\173-\176])/g).forEach(part=>{
      if(part){
        frag.appendChild(document.createTextNode(part))
        if(/^\w{80}$/.test(part)||/^[\041-\057\072-\100\133-\140\173-\176]$/.test(part))
          frag.appendChild(document.createElement('wbr'))
      }
    })
    node.parentNode.replaceChild(frag,node)
  }
})

document.querySelectorAll('.spoiler button').forEach(x=>{x.addEventListener('click',function(){
  let block=this.nextElementSibling
  if(window.getComputedStyle(block).display=='none'){block.style.display='block';this.textContent='Hide code'}
  else{block.style.display='none';this.textContent='Show code'}
})})
</script>
